.user {
	/* tokens */
	--topbar-h: 56px;
	--drawer-w: 260px;
	--pad: 10px;
	--pad-md: 20px;

	position: fixed;
	inset: 0;
	background: var(--c-bg-primary);
	color: var(--c-text-primary);
	display: flex;
	flex-direction: column;
	overflow: hidden;

	/* Top bar */
	&__topbar {
		position: sticky;
		top: 0;
		z-index: 100;
		min-height: var(--topbar-h);
		background: var(--c-basic);
		box-shadow:
			0 3px 5px -1px #0003,
			0 6px 10px #00000024,
			0 1px 18px #0000001f;
		display: flex;
		align-items: center;
		padding-inline: var(--pad-md);
	}

	/* Menu row */
	&__menu {
		display: flex;
		align-items: center;
		gap: 8px;
		margin: 0;
		padding: 0;
		list-style: none;
		inline-size: 100%;
	}
	&__menu-item {
		display: inline-flex;
		align-items: center;
	}
	&__menu-spacer {
		margin-inline: auto;
	}
	&__menu-burger {
		margin-inline-start: 4px;
	}

	/* Links + icon buttons */
	&__link,
	&__iconbtn {
		position: relative;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		padding: 6px 10px;
		border-radius: var(--b-radius-btn);
		color: var(--c-white);
		text-decoration: none;
		transition: var(--transition);
		background: transparent;
		border: 0;
		cursor: pointer;

		.material-icons {
			inline-size: 24px;
			color: var(--c-white);
		}

		&._activeLink::before {
			content: '';
			position: absolute;
			inline-size: 5px;
			block-size: 5px;
			background: var(--c-white);
			border-radius: 50%;
			inset-block-end: -2px;
			transform: translateY(12px);
			opacity: 0;
			animation: userLinkDot 0.75s forwards;
		}
	}

	/* Drawer */
	&__drawer {
		position: fixed;
		top: var(--topbar-h);
		right: 0;
		inset-block-end: 0;
		inline-size: var(--drawer-w);
		background: var(--c-bg-secondary);
		box-shadow:
			0 3px 5px -1px #0003,
			0 6px 10px #00000024,
			0 1px 18px #0000001f;
		transform: translateX(110%); /* hidden by default (mobile) */
		transition: var(--transition);
		z-index: 90;
		display: flex;
		flex-direction: column;
		padding: var(--pad-md);
		overflow: auto;

		&._open {
			transform: translateX(0);
		}
	}

	&__drawer-close {
		align-self: flex-end;
	}

	&__drawer-link {
		display: inline-flex;
		align-items: center;
		gap: 10px;
		color: var(--c-text-primary);
		text-decoration: none;
		padding: 10px;
		border-radius: var(--b-radius);
		transition: var(--transition);

		.material-icons {
			font-size: 28px;
			color: var(--c-text-primary);
		}
	}

	&__drawer-user {
		flex-direction: column;
		align-items: center;
		padding: 8px;
		text-align: center;
	}

	&__avatar {
		border-radius: 50%;
	}
	&__name {
		word-break: break-word;
	}

	&__hr {
		border: none;
		border-top: 2px solid var(--c-text-primary);
		margin: 8px 0;
	}

	/* Main */
	&__main {
		position: relative;
		flex: 1 1 auto;
		min-height: calc(100dvh - var(--topbar-h));
		overflow: auto;
		padding: var(--pad-md);
		/* mobile: no sidebar padding */
	}

	/* ========== Desktop (>=768px): burger hidden, sidebar always shown ========== */
	@media (min-width: 768px) {
		&__menu-burger {
			display: none;
		}

		&__drawer {
			/* keep it fixed on the right, but visible */
			transform: none;
			top: var(--topbar-h);
			right: 0;
			inline-size: var(--drawer-w);
			block-size: calc(100dvh - var(--topbar-h));
		}

		&__drawer-close {
			display: none;
		} /* close X not needed on desktop */

		&__main {
			/* make room for the always-visible drawer */
			padding-right: calc(var(--pad-md) + var(--drawer-w));
		}
	}

	/* ========== Mobile: topbar at bottom; drawer overlays ========== */
	@media (max-width: 767px) {
		&__topbar {
			position: fixed;
			top: auto;
			bottom: 0;
			inline-size: 100%;
			padding-inline: var(--pad);
		}
		&__menu {
			justify-content: space-around;
		}

		&__drawer {
			top: 0;
			inset-block-start: 0;
			inline-size: min(92vw, var(--drawer-w));
			block-size: 100dvh;
		}

		&__topbar + &__main {
			padding-block-start: var(--pad);
			padding-block-end: calc(var(--pad-md) + var(--topbar-h));
		}
	}
}

/* keyframes */
@keyframes userLinkDot {
	0% {
		opacity: 0;
		transform: translateY(12px);
	}
	100% {
		opacity: 1;
		transform: translateY(0);
	}
}
