<div class="user">
	<nav class="user__topbar">
		<ul class="user__menu">
			<li class="user__menu-item">
				<material-icon routerLink="/" icon="home"></material-icon>
			</li>

			<li class="user__menu-item user__menu-spacer"></li>

			<li class="user__menu-item user__menu-burger">
				<icon-burger
					(updated)="isOpen.set($event)"
					aria-label="Menu"
					#burger
				></icon-burger>
			</li>
		</ul>
	</nav>

	<aside class="user__drawer" [class._open]="isOpen()">
		<button
			class="user__iconbtn user__drawer-close"
			aria-label="Close sidebar"
			(click)="burger.toggle()"
			type="button"
		>
			<span class="material-icons">close</span>
		</button>

		<div class="user__drawer-header">
			<a
				(click)="isOpen() && burger.toggle()"
				class="user__drawer-profile"
				routerLink="/profile"
			>
				<img
					[src]="userService.thumb()"
					alt=""
					class="user__avatar user__avatar--sm"
					height="32"
					width="32"
				/>
				<span class="user__title" translate>Profile</span>
			</a>

			<wbutton
				class="user__iconbtn user__logout"
				type="link"
				aria-label="Logout"
				(click)="userService.logout(); isOpen() && burger.toggle()"
			>
				<span class="material-icons">logout</span>
			</wbutton>
		</div>

		<hr class="user__hr" />

		@if (userService.role('admin')) {
		<material-icon
			routerLink="/admin/users"
			icon="manage_accounts"
			name="Users"
			(click)="isOpen() && burger.toggle()"
		></material-icon>

		<material-icon
			routerLink="/admin/clients"
			icon="people"
			name="Clients"
			(click)="isOpen() && burger.toggle()"
		></material-icon>

		<material-icon
			routerLink="/admin/forms"
			icon="backup_table"
			name="Forms"
			(click)="isOpen() && burger.toggle()"
		></material-icon>

		<material-icon
			routerLink="/admin/translates"
			icon="translate"
			name="Translates"
			(click)="isOpen() && burger.toggle()"
		></material-icon>

		<hr class="user__hr" />
		}

		<div class="user__drawer-bottom">
			<button
				(click)="userService.toggleTheme()"
				class="user__drawer-btn"
				type="button"
			>
				<span class="material-icons">
					@if (userService.theme() === 'dark') { dark_mode } @else {
					light_mode }
				</span>
				<span
					[translate]="((userService.theme() || 'dark') | titlecase) + ' theme'"
				></span>
			</button>

			@if (languageService.language()?.name) {
			<button
				(click)="languageService.nextLanguage()"
				aria-label="Switch language"
				class="user__drawer-btn"
				type="button"
			>
				<span class="material-icons">language</span>
				<span
					[translate]="languageService.language()?.name || ''"
				></span>
			</button>

			}
		</div>
	</aside>

	<div class="user__main">
		<router-outlet />
	</div>
</div>
