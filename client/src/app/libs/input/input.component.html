@let _type = type(); @let _name = name(); @let _label = label(); @let _disabled
= disabled(); @let _items = items(); @let _wClass = wClass(); @let _clearable =
clearable(); @let _placeholder = placeholder(); @let _error = error(); @let
_model = model();

<!-- General Input -->
@if (_type !== 'radio' && _type !== 'checkbox' && _type !== 'textarea') {
<label class="winput">
	@if (_label) {
	<span class="winput__label">{{ (_label | translate)() }}</span>
	}
	<div class="winput__control">
		<input
			class="winput__field"
			[placeholder]="((_placeholder || 'Enter text...') | translate)()"
			(ngModelChange)="model.set($event); onChangeAfterWhile()"
			(keyup.enter)="onSubmit()"
			[type]="_type || 'text'"
			(blur)="onBlur()"
			[autocomplete]="getAutocompleteAttr(_type)"
			[class.error]="_error"
			[disabled]="_disabled || (control()?.disabled ?? false)"
			[ngModel]="_model"
			[ngClass]="_wClass"
			[name]="_name"
			#inputEl
		/>
		@if (_clearable) {
		<i
			class="material-icons winput__clear"
			(click)="model.set(null); onSubmit(); focus()"
			>close</i
		>
		}
	</div>

	@if (_error) {
	<div class="winput__error">
		{{ ((_label || _placeholder) + ' is invalid.' | translate)() }}
	</div>
	}
</label>
}

<!-- Textarea -->
@if (_type === 'textarea') {
<label class="winput">
	@if (_label) {
	<span class="winput__label">{{ (_label | translate)() }}</span>
	}
	<div class="winput__control">
		<textarea
			class="winput__field winput__field--textarea"
			[placeholder]="((_placeholder || 'Enter text...') | translate)()"
			(ngModelChange)="model.set($event); onChangeAfterWhile()"
			(keyup.enter)="onSubmit()"
			(blur)="onBlur()"
			[disabled]="_disabled || (control()?.disabled ?? false)"
			[class.error]="_error"
			[ngModel]="_model"
			[ngClass]="_wClass"
			[name]="_name"
			#inputEl
		></textarea>
	</div>

	@if (_error) {
	<div class="winput__error">
		{{ ((_label || _placeholder) + ' is invalid.' | translate)() }}
	</div>
	}
</label>
}

<!-- Radio Buttons -->
@if (_type === 'radio') { @for (item of _items; track $index) {
<label
	class="winput__choice"
	[class.disabled]="_disabled || (control()?.disabled ?? false)"
>
	<span class="winput__choice-text">{{ (item | translate)() }}</span>
	<input
		class="winput__native"
		type="radio"
		[disabled]="_disabled || (control()?.disabled ?? false)"
		[class.error]="_error"
		[ngModel]="_model"
		[ngClass]="_wClass"
		[value]="item"
		[name]="_name"
		(ngModelChange)="model.set($event); onChange()"
		(blur)="onBlur()"
		#inputEl
	/>
	<span class="winput__choice-mark winput__choice-mark--radio"></span>
</label>
} }

<!-- Checkboxes (list) -->
@if (_type === 'checkbox') { @for (item of _items; track $index; let i = $index)
{
<label
	class="winput__choice"
	[class.disabled]="_disabled || (control()?.disabled ?? false)"
>
	<span class="winput__choice-text">{{ (item | translate)() }}</span>
	<input
		class="winput__native"
		type="checkbox"
		[disabled]="_disabled || (control()?.disabled ?? false)"
		[class.error]="_error"
		[ngClass]="_wClass"
		[ngModel]="isChecked(item)"
		(ngModelChange)="setCheckboxValue($event, i)"
		[name]="_name + i"
		(blur)="onBlur()"
		#inputEl
	/>
	<span class="winput__choice-mark"></span>
</label>
}

<!-- Single checkbox (no items) -->
@if (!_items.length) {
<label
	class="winput__choice"
	[class.disabled]="_disabled || (control()?.disabled ?? false)"
>
	@if (_label) {
	<span class="winput__choice-text">{{ (_label | translate)() }}</span>
	}
	<input
		class="winput__native"
		type="checkbox"
		[disabled]="_disabled || (control()?.disabled ?? false)"
		[class.error]="_error"
		[ngClass]="_wClass"
		[ngModel]="_model"
		(ngModelChange)="model.set($event); onChange()"
		[name]="_name"
		(blur)="onBlur()"
		#inputEl
	/>
	<span class="winput__choice-mark"></span>
</label>
} }
