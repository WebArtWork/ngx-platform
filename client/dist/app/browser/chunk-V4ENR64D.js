import{c as D,e as L,f as R}from"./chunk-GH2KIORW.js";import{a as j}from"./chunk-G5C7A5E6.js";import{a as F}from"./chunk-AP5MEQR4.js";import"./chunk-PJAMXDDA.js";import{a as V}from"./chunk-OF33CZNL.js";import{k as O,o as E,w as T}from"./chunk-QOT76O5U.js";import{E as d,F as l,Ha as v,La as g,Q as x,S as _,X as C,aa as P,ea as S,fa as M,fb as y,ka as u,la as o,ma as p,na as h,ob as k,ua as w,wa as m,y as c,ya as b}from"./chunk-H5N67KS5.js";import"./chunk-2VMXMS7J.js";function U(r,i){if(r&1&&h(0,"img",15),r&2){let n=i.$implicit;u("src",n,x)}}function q(r,i){r&1&&h(0,"img",16)}function z(r,i){if(r&1){let n=w();o(0,"wform",17),m("wChange",function(){d(n);let t=b();return l(t.update())}),p()}if(r&2){let n=b();u("config",n.formUser)("submition",n.user)}}var Z=(()=>{let i=class i{constructor(){this.userService=c(V),this.url=T.url,this._formService=c(L),this._coreService=c(O),this._emitterService=c(E),this._cdr=c(k),this.formUser=this._formService.prepareForm({formId:"user",title:"My profile",components:[{name:"Text",key:"name",focused:!0,props:{Placeholder:"Enter your name ...",Label:"Name",Required:!0}},{name:"Text",key:"phone",props:{Placeholder:"Enter your phone ...",Label:"Phone"}},{name:"Text",key:"bio",props:{Placeholder:"Enter your biography ...",Label:"Biography",Textarea:!0}}]}),this.formPassword=this._formService.prepareForm({formId:"changePassword",title:"Change password",components:[{name:"Password",key:"oldPass",focused:!0,props:{Placeholder:"Enter your old password ...",Label:"Old Password",Required:!0}},{name:"Password",key:"newPass",props:{Placeholder:"Enter your new password ...",Label:"New Password",Required:!0}}]}),this._emitterService.onComplete("us.user").subscribe(()=>{let e={};this._coreService.copy(this.userService.user(),e),this.user=e,this._cdr.detectChanges()})}update(){this._coreService.copy(this.user,this.userService.user),this.userService.updateMe()}changePassword(){this._formService.modal(this.formPassword,{label:"Change",click:(e,t)=>{this.userService.changePassword(e.oldPass,e.newPass),t()}})}updateThumb(e){this.userService.user.update(t=>(t.thumb=Array.isArray(e)?e[0]:e,t)),this.userService.updateMe()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=C({type:i,selectors:[["ng-component"]],decls:21,vars:11,consts:[["avatarItem",""],["avatarEmpty",""],[1,"profile-wrapper"],[1,"profile-wrapper__header"],[1,"profile-wrapper__avatar"],[3,"wChange","wModel","container","name","accept","clearable","preview","cropWidth","cropHeight","t_item","t_empty"],[1,"profile-wrapper__body"],[3,"config","submition"],[1,"profile-wrapper__footer"],[1,"profile-wrapper__logout"],["type","danger",3,"click"],[1,"material-icons"],["translate",""],[1,"profile-wrapper__password"],["type","link",3,"click"],["alt","avatar",2,"border-radius","var(--c-img-round)","width","52px","height","52px","object-fit","cover",3,"src"],["src","assets/default.png","alt","avatar",2,"border-radius","var(--c-img-round)","width","52px","height","52px","object-fit","cover"],[3,"wChange","config","submition"]],template:function(t,a){if(t&1){let s=w();o(0,"div",2)(1,"div",3)(2,"div",4),P(3,U,1,1,"ng-template",null,0,y)(5,q,1,0,"ng-template",null,1,y),o(7,"ngx-file",5),m("wChange",function(I){return d(s),l(a.updateThumb(I||""))}),p()()(),o(8,"div",6),S(9,z,1,2,"wform",7),o(10,"div",8)(11,"div",9)(12,"wbutton",10),m("click",function(){return d(s),l(a.userService.logout())}),o(13,"span",11),g(14,"logout"),p(),o(15,"span",12),g(16,"Logout"),p()()(),o(17,"div",13)(18,"wbutton",14),m("click",function(){return d(s),l(a.changePassword())}),o(19,"span",12),g(20," Change Password "),p()()()()()()}if(t&2){let s=v(4),f=v(6);_(7),u("wModel",a.userService.thumb())("container","user")("name",a.userService.user()._id+".jpg")("accept","image/*")("clearable",!1)("preview",!0)("cropWidth",512)("cropHeight",512)("t_item",s)("t_empty",f),_(2),M(a.user?9:-1)}},dependencies:[F,j,D,R],styles:["[_ngcontent-%COMP%]:root{--c-white: #fff;--c-basic: #3558ae;--c-primary: #256eff;--c-primary-hover: #0051f1;--c-secondary: rgb(197, 61, 61);--c-secondary-hover: rgb(150, 42, 42);--c-bg-primary: #f3f4f7;--c-bg-secondary: #ffffff;--c-bg-tertiary: #fcfdfe;--c-border: #f0f1f7;--c-shadow: #f3f3f3;--c-text-primary: #666666;--c-text-secondary: #19235c;--c-placeholder: #313335ab;--c-img-round: 50%;--card-background: #fefefe;--card-border-radius: 10px;--card-box-shadow: 0 4px 12px rgba(0, 0, 0, .15);--card-margin-bottom: 24px;--card-header-padding: 20px;--card-header-background: #e0e0e0;--card-body-padding: 20px;--card-section-padding: 10px 0;--card-footer-padding: 20px;--card-footer-background: #e0e0e0;--card-border-width: 2px;--card-border-color: #cccccc;--file-img-border-radius: 50%;--file-add-bg: #28a745;--file-add-bg-hover: #218838;--file-item-border-radius: 10px;--day-name: #988888;--b-radius-btn: 10px;--transition: all .3s;--events: #4c8e9d;--border: rgba(102, 91, 91, .432);--header-doc: #d8d8d8;--doc-products: #f5f5f5}html.dark[_ngcontent-%COMP%]:root{--c-white: #fff;--c-basic: #333;--c-bg-primary: #282828;--c-bg-secondary: #343434;--c-bg-tertiary: #404040;--c-border: #404040;--c-shadow: #444444;--c-text-primary: #ffffff;--c-text-secondary: #ffffff;--c-placeholder: #d3cdcd;--c-calendar: #141414;--day-name: #dad5d5;--events: #1c2e32;--border: rgb(255 255 255 / 23%);--header-doc: #1b1b1be3;--doc-products: #252222}[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   wcard[_ngcontent-%COMP%]{width:100%;transition:all .3s;display:block}.profile-wrapper[_ngcontent-%COMP%]{padding:unset}.profile-wrapper__header[_ngcontent-%COMP%]{z-index:9;top:20px;position:absolute;right:30px;letter-spacing:0;line-height:23px;font-weight:500;font-size:20px;color:var(--c-text-primary);display:flex;justify-content:space-between;align-items:center;border-radius:12px}.profile-wrapper__avatar[_ngcontent-%COMP%]{border-radius:50%;border:1px solid var(--c-border);position:relative;margin:0 auto;padding:3px;width:60px;height:60px}.profile-wrapper__footer[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}@media (max-width: 767.9px){.profile-wrapper__footer[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.profile-wrapper__footer[_ngcontent-%COMP%]   .profile-wrapper__logout[_ngcontent-%COMP%]{order:2;margin-top:20px}}.profile-wrapper__logout[_ngcontent-%COMP%]   .w-btn[_ngcontent-%COMP%]{margin:0;display:flex;justify-content:space-between;align-items:center}.profile-wrapper__logout[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{margin-right:10px}.profile-wrapper__password[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0});let r=i;return r})();export{Z as ProfileComponent};
