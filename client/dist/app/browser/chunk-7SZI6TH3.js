import{a as H,b as $,c as A}from"./chunk-IRCEMTQO.js";import"./chunk-2T5BTVFY.js";import{a as E}from"./chunk-JCGHU3MU.js";import{a as L,b as P,c as U,i as d,j as v,k}from"./chunk-J5IRV576.js";import{F as V,j}from"./chunk-QO64SOUP.js";import{Aa as h,Ba as b,C as o,H as x,I as C,Ia as y,Ka as M,Ma as _,Za as F,_a as I,ca as u,ea as T,ia as w,ja as D,ya as p,za as f}from"./chunk-L3JEUUTS.js";import{e as g}from"./chunk-6MDQTQU3.js";function q(t,l){if(t&1){let e=y();f(0,"language-selector",4),M("wChange",function(a){x(e);let i=_();return C(i.languageService.setLanguageId((a??"")+""))}),h()}if(t&2){let e,n=_();p("wModel",(e=n.languageService.language())==null?null:e._id)("isMutatable",!0)("clearable",!1)}}function z(t,l){if(t&1&&F(0),t&2){let e=l.$implicit;I(e.text)}}function G(t,l){if(t&1&&b(0,"span",5),t&2){let e=l.$implicit;p("translate",e.text)}}var B=(()=>{class t extends j{allowCreate(){return!1}allowUrl(){return!1}update(e){let n=this._languageService.language()?._id??"",a=e._id;if(n){let i=this._translateService.translate(e.text);this._formService.modal(d,{label:"Update",click:(s,m)=>g(this,null,function*(){m();let r=s.translation;i()!==r&&(yield this._translateService.updateTranslation(r,a,n),i.set(r))})},{translation:i()===e.text?"":i(),text:e.text})}else this._alertService.show({text:"Please select language first"})}constructor(e,n){super(d,e,n,"phrase"),this._formService=e,this._phraseService=n,this._translateService=o(P),this.updatableFields=["_id","text"],this._languageService=o(v),this._alertService=o(E),this.columns=["phrase","translation"],this.configType="local",this.config=this.getConfig(),this.languageService=o(v),this.config.headerButtons.unshift({icon:"edit",click:()=>{let a=this._languageService.language()?._id??"";if(a){let i=[];for(let s of this._phraseService.getDocs())i.push(this._translateService.translate(s.text)());this._formService.modalDocs(i,"Update translations for "+this._languageService.language()?.name).then(s=>g(this,null,function*(){for(let[m,r]of this._phraseService.getDocs().entries()){let c=s[m];if(c===void 0)continue;let S=this._translateService.translate(r.text);S()!==c&&(yield this._translateService.updateTranslation(c,r._id,a),S.set(c))}}))}else this._alertService.show({text:"Please select language first"})}}),this.setDocuments()}static{this.\u0275fac=function(n){return new(n||t)(u(V),u(L))}}static{this.\u0275cmp=T({type:t,selectors:[["ng-component"]],features:[w],decls:4,vars:3,consts:[["title","Translates",3,"rows","columns","config"],["tableHeader",""],["cell","phrase"],["cell","translation"],[3,"wChange","wModel","isMutatable","clearable"],[3,"translate"]],template:function(n,a){n&1&&(f(0,"wtable",0),D(1,q,1,3,"ng-template",1)(2,z,1,1,"ng-template",2)(3,G,1,1,"ng-template",3),h()),n&2&&p("rows",a.documents())("columns",a.columns)("config",a.config)},dependencies:[A,k,H,$,U],encapsulation:2,changeDetection:0})}}return t})();var le=[{path:"",component:B}];export{le as routes};
