import{p as r,r as o,s as d}from"./chunk-4NITVLUQ.js";import{B as g,O as i,P as l,x as u}from"./chunk-VOU2RNQA.js";var m=(()=>{class s extends d{constructor(){super({name:"translatelanguage",unauthorized:!0}),this.language=i(void 0,{}),this.languages=i(this.getDocs(),{}),this._storeService=g(o),this._emitterService=g(r),this._languageId=i(null,{}),this.loaded.subscribe({next:()=>{this.languages.set(this.getDocs()),this._loadLocal()}}),this.get().subscribe(()=>{this.languages.set(this.getDocs()),this._loadLocal()}),this._emitterService.on("translatelanguage_changed").subscribe(()=>{this.languages.set(this.getDocs())}),l(()=>{let e=this._languageId(),t=this.languages();if(!e||!t.length){this.language.set(void 0);return}let a=t.find(n=>n._id===e);a&&(this.language.set(a),this._storeService.set("languageId",e),this._emitterService.emit("languageId",e))})}setLanguageId(e=null){this._languageId.set(e)}setLanguage(e){e?._id&&this._languageId.set(e._id)}nextLanguage(){let e=this.getDocs();if(e.length>1){let t=this.language(),a=t?e.findIndex(n=>n._id===t._id):0;this.setLanguage(a===e.length-1?e[0]:e[a+1])}else this._languageId.set(null)}_loadLocal(){this._storeService.get("languageId",e=>{e&&this._languageId.set(e)})}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{m as a};
