import{f as be,h as xe}from"./chunk-INPKZIN2.js";import{a as ve}from"./chunk-MQXU7KO6.js";import{a as he,j as ge,l as fe,o as Ce}from"./chunk-4NITVLUQ.js";import{Ab as me,B as ne,Ea as j,Fa as M,G as b,H as v,Ha as x,Ja as a,Kb as ue,O as A,P,Pa as Q,Ra as ae,Sa as q,Ua as S,Wa as _,Xa as N,Y as o,Ya as E,_ as D,ba as oe,bb as re,cb as w,da as $,db as g,eb as se,ga as K,hb as ce,ib as de,jb as _e,nb as y,ob as O,pa as f,pb as H,qa as C,rb as J,sa as le,ta as R,tb as B,ua as W,va as L,vb as pe,w as ie,wa as r,wb as m,xa as c,yb as z}from"./chunk-VOU2RNQA.js";var u={disabled:!1,clearable:!1,placeholder:"",multiple:!1,bindLabel:"name",bindValue:"_id",label:"",searchable:!1,searchableBy:"name",items:[],buttons:[],formId:null,formKey:null};var X=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=$({type:e,selectors:[["","wselectView",""]]})}}return e})(),Y=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=$({type:e,selectors:[["","wselectItem",""]]})}}return e})(),Z=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=$({type:e,selectors:[["","wselectSearch",""]]})}}return e})();var Se=()=>[],Oe=e=>({item:e}),Te=(e,l)=>l.icon||l.text,ke=(e,l)=>l().id;function De(e,l){if(e&1&&(r(0,"div",4),_(1),y(2,"translate"),c()),e&2){a();let t=g(1);o(),N(O(2,1,t)())}}function Ie(e,l){if(e&1&&(r(0,"div"),_(1),y(2,"translate"),c()),e&2){a(3);let t=g(0);o(),N(O(2,1,t)())}}function Ve(e,l){e&1&&(r(0,"span"),_(1,", "),c())}function Pe(e,l){if(e&1){let t=M();r(0,"span"),_(1),y(2,"translate"),r(3,"i",14),x("click",function(){b(t);let n=a().$index,s=a(3);return v(s.removeItem(n))}),_(4,"close"),c()()}if(e&2){let t=a().$implicit,i=a(3);o(),E(" ",O(2,1,i.allItem[t])()," ")}}function Le(e,l){if(e&1&&(r(0,"span"),f(1,Ve,2,0,"span"),f(2,Pe,5,3,"span"),c()),e&2){let t=l.$implicit,i=l.$index,n=a(3);o(),C(i&&n.allItem[t]?1:-1),o(),C(n.allItem[t]?2:-1)}}function Ne(e,l){if(e&1&&(r(0,"div",13),f(1,Ie,3,3,"div"),R(2,Le,3,2,"span",null,le),c()),e&2){a(2);let t=g(3);o(),C(t.length?-1:1),o(),W(t)}}function Ee(e,l){if(e&1&&(r(0,"div",13),_(1),y(2,"translate"),c()),e&2){let t=a(2),i=g(0),n=g(4);o(),E(" ",O(2,1,n?t.allItem[n]:i)()," ")}}function Be(e,l){if(e&1&&(r(0,"div",12),f(1,Ne,4,1,"div",13)(2,Ee,3,3,"div",13),c()),e&2){a();let t=g(2);o(),C(t?1:2)}}function Fe(e,l){if(e&1){let t=M();r(0,"div",10),x("click",function(){b(t);let n=a();return v(n.clear())}),_(1,"close"),c()}}function Ae(e,l){if(e&1){let t=M();r(0,"i",17),x("click",function(){b(t);let n=a().$implicit;return v(n.click())}),_(1),c()}if(e&2){let t=a().$implicit;S("_disabled-btn",t.disabled),o(),N(t.icon)}}function $e(e,l){if(e&1){let t=M();r(0,"span",18),x("click",function(){b(t);let n=a().$implicit;return v(n.click())}),_(1),c()}if(e&2){let t=a().$implicit;S("_disabled-btn",t.disabled),o(),N(t.text)}}function Ke(e,l){if(e&1&&f(0,Ae,2,3,"i",15)(1,$e,2,3,"span",16),e&2){let t=l.$implicit;C(t.icon?0:t.text?1:-1)}}function Re(e,l){if(e&1){let t=M();r(0,"winput",23),y(1,"translate"),x("wChange",function(n){b(t);let s=a(3);return v(s.search.set((n??"")+""))}),c()}e&2&&L("placeholder",se(O(1,3,"Enter search text...")()))("focused",!0)}function We(e,l){if(e&1&&(r(0,"div"),j(1,8),K(2,Re,2,5,"ng-template",null,2,J),c()),e&2){let t=q(3),i=a(2);o(),L("ngTemplateOutlet",i.searchTpl()||t)}}function je(e,l){if(e&1&&j(0,21),e&2){let t=l.$implicit;a();let i=q(9),n=a();L("ngTemplateOutlet",n.itemTpl()||i)("ngTemplateOutletContext",_e(2,Oe,t))}}function Qe(e,l){e&1&&(r(0,"div",22),_(1," Nothing was found "),c())}function qe(e,l){if(e&1&&(_(0),y(1,"translate")),e&2){let t=a().item,i=a(2);E(" ",O(1,1,t()[i.bindLabel()])()," ")}}function Je(e,l){e&1&&(_(0),y(1,"translate")),e&2&&E(" ",O(1,1,"Unknown item")()," ")}function ze(e,l){if(e&1){let t=M();r(0,"div",24),x("click",function(){let n=b(t).item,s=a(2);return v(s.selectOption(n()))}),r(1,"div",25),f(2,qe,2,3)(3,Je,2,3),c()()}if(e&2){let t=l.item,i=a(2),n=g(2),s=g(3),p=t().id;o(),S("selected",n?s.includes(p):!1),o(),C(t()[i.bindLabel()]?2:3)}}function Ue(e,l){if(e&1&&(r(0,"div",19),f(1,We,4,1,"div"),r(2,"div",20),R(3,je,1,4,"ng-container",21,ke),y(5,"search"),f(6,Qe,2,0,"div",22),y(7,"search"),c(),K(8,ze,4,3,"ng-template",null,1,J),c()),e&2){let t;a();let i=g(5),n=g(6),s=g(7),p=g(8);S("_search",i),o(),C(i?1:-1),o(2),W(H(5,4,n,p,s+" __search")),o(3),C((t=H(7,8,n,p,s+" __search"))!=null&&t.length?-1:6)}}var st=(()=>{class e{constructor(){this.disabled=m(u.disabled,{}),this.clearable=m(u.clearable,{}),this.placeholder=m(u.placeholder,{}),this.multiple=m(u.multiple,{}),this.bindLabel=m(u.bindLabel,{}),this.bindValue=m(u.bindValue,{}),this.label=m(u.label,{}),this.searchable=m(u.searchable,{}),this.searchableBy=m(u.searchableBy,{}),this.items=m(u.items,{}),this.buttons=m(u.buttons,{}),this.viewTpl=z(X,{read:D}),this.itemTpl=z(Y,{read:D}),this.searchTpl=z(Z,{read:D}),this.formId=m(u.formId,{}),this.formKey=m(u.formKey,{}),this.wModel=me(null,{alias:"wModel"}),this.wChange=pe(),this._core=ne(ge),this.allItem={},this.allItems=A(this._core.toSignalsArray([]),{}),this.showOptions=A(!1,{}),this.search=A("",{}),this.isMulti=B(()=>this.multiple(),{}),this._disabledCva=!1,this.isDisabled=B(()=>this.disabled()||this._disabledCva,{}),this.selectedIds=B(()=>{let i=this.wModel();return this.isMulti()?Array.isArray(i)?i:[]:i==null?[]:[i]},{}),this.selectedId=B(()=>this.selectedIds()[0]??null,{}),this._onChange=()=>{},this._onTouched=()=>{},P(()=>{let i=this.items(),n=this.bindLabel(),s=this.bindValue(),p=this.searchableBy();for(let h of Object.keys(this.allItem))delete this.allItem[h];let U=i.map(h=>{let d=h;if(typeof h=="function")try{d=h()}catch{d=h}let I,V;if(typeof d=="string"||typeof d=="number"||typeof d=="boolean")I=d,V=String(d);else if(d&&typeof d=="object"){let k=d;I=k[s]??k._id,V=k[n]??k.name??k.title??String(I)}else I=String(d),V=String(d);let ee=V;if(d&&typeof d=="object"&&p){let k=p.split(/\s+/).filter(Boolean),G=[];for(let ye of k){let te=d[ye];te!=null&&G.push(String(te))}G.length&&(ee=G.join(" "))}let we={id:I,name:V,__search:ee};return this.allItem[I]=V,we});this.allItems.set(this._core.toSignalsArray(U));let F=new Set(this.allItems().map(h=>h().id)),T=this.wModel();if(this.isMulti()){let h=(Array.isArray(T)?T:[]).filter(d=>F.has(d));JSON.stringify(h)!==JSON.stringify(T)&&this.wModel.set(h)}else(!T||this.allItems().length&&!F.has(T))&&this.wModel.set(null)});let t=!1;P(()=>{let i=this.formId(),n=this.formKey()}),P(()=>{let i=this.formId(),n=this.formKey()}),P(()=>{let i=this.wModel();this._onChange(i),this.wChange.emit(i)})}toggleOptions(t=!this.showOptions()){this.isDisabled()||this.showOptions.set(t)}selectOption(t){if(this.isMulti()){let i=new Set(this.selectedIds());i.has(t.id)?i.delete(t.id):i.add(t.id),this.wModel.set([...i])}else this.wModel.set(t.id),this.showOptions.set(!1);this._onTouched()}removeItem(t){if(!this.isMulti())return;let i=[...this.selectedIds()];i.splice(t,1),this.wModel.set(i)}clear(){this.wModel.set(this.isMulti()?[]:null)}writeValue(t){this._equal(this.wModel(),t)||this.wModel.set(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._disabledCva=t}_equal(t,i){return Array.isArray(t)||Array.isArray(i)?JSON.stringify(t)===JSON.stringify(i):t===i}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=oe({type:e,selectors:[["wselect"]],contentQueries:function(i,n,s){i&1&&(Q(s,n.viewTpl,X,5,D),Q(s,n.itemTpl,Y,5,D),Q(s,n.searchTpl,Z,5,D)),i&2&&ae(3)},inputs:{disabled:[1,"disabled"],clearable:[1,"clearable"],placeholder:[1,"placeholder"],multiple:[1,"multiple"],bindLabel:[1,"bindLabel"],bindValue:[1,"bindValue"],label:[1,"label"],searchable:[1,"searchable"],searchableBy:[1,"searchableBy"],items:[1,"items"],buttons:[1,"buttons"],formId:[1,"formId"],formKey:[1,"formKey"],wModel:[1,"wModel"]},outputs:{wModel:"wModelChange",wChange:"wChange"},features:[ce([{provide:he,useExisting:ie(()=>e),multi:!0}])],decls:24,vars:22,consts:[["defaultView",""],["defaultItem",""],["defaultSearch",""],[1,"wselect",3,"clickOutside"],[1,"wselect__label"],[1,"wselect__body"],[1,"wselect__header",3,"click"],[1,"material-icons"],[3,"ngTemplateOutlet"],[1,"wselect__arrow","material-icons"],[1,"wselect__arrow","material-icons",3,"click"],[1,"wselect__popup",3,"_search"],[1,"wselect__text"],[1,"text-overflow"],[1,"material-icons","avatar__icon",3,"click"],[1,"material-icons",3,"_disabled-btn"],[3,"_disabled-btn"],[1,"material-icons",3,"click"],[3,"click"],[1,"wselect__popup"],[1,"popup-block"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["translate","",1,"popup-block__empty-search"],[3,"wChange","placeholder","focused"],[1,"item",3,"click"],[1,"item__text"]],template:function(i,n){if(i&1){let s=M();re(0)(1)(2)(3)(4)(5)(6)(7)(8),r(9,"div",3),x("clickOutside",function(){return b(s),v(n.toggleOptions(!1))}),f(10,De,3,3,"div",4),r(11,"div",5)(12,"div",6),x("click",function(){return b(s),v(n.toggleOptions())}),r(13,"span",7),_(14,"unfold_more"),c(),j(15,8),K(16,Be,3,1,"ng-template",null,0,J),c(),f(18,Fe,2,0,"div",9),r(19,"div",10),x("click",function(){return b(s),v(n.toggleOptions())}),_(20," expand_more "),c(),R(21,Ke,2,1,null,null,Te),f(23,Ue,10,12,"div",11),c()()}if(i&2){let s=q(17),p=n.showOptions();w(n.placeholder()),o();let U=w(n.label());o();let F=w(n.isMulti());o();let T=w(n.selectedIds());o();let h=w(n.selectedId());o(),w(n.searchable()),o(),w(n.allItems()),o(),w(n.searchableBy()),o(),w(n.search()),o(2),C(U?10:-1),o(),S("_active",p),o(),S("_disabled",n.isDisabled()),o(3),L("ngTemplateOutlet",n.viewTpl()||s),o(3),C(n.clearable()&&(F?T.length:h)?18:-1),o(),S("_disabled",n.isDisabled())("_active",p),o(2),W(n.buttons()||de(21,Se)),o(2),C(p?23:-1)}},dependencies:[ue,ve,xe,fe,Ce,be],styles:["[_nghost-%COMP%]{display:block}._disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.wselect[_ngcontent-%COMP%]{width:100%}.wselect__label[_ngcontent-%COMP%]{margin-bottom:5px}.wselect__body[_ngcontent-%COMP%]{position:relative;cursor:pointer;display:flex;min-height:50px;height:50px;align-items:center;border:2px solid var(--c-text-primary);border-radius:12px;transition:var(--transition)}.wselect__body._active[_ngcontent-%COMP%]{border-color:var(--c-primary)}.wselect__header[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;overflow:hidden;white-space:nowrap;position:relative}.wselect__text[_ngcontent-%COMP%]{margin-right:10px;flex-grow:1;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.wselect__text[_ngcontent-%COMP%]   .text-overflow[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;word-break:keep-all;color:var(--c-text-primary)}.wselect__arrow[_ngcontent-%COMP%]{transition:var(--transition);display:flex;align-items:center;justify-content:center;border-radius:50%}.wselect__arrow._active[_ngcontent-%COMP%]{transform:rotate(180deg)}.wselect[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{color:var(--c-text-primary)}.wselect[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:10px;transition:var(--transition);border-bottom:1px solid var(--c-text-primary)}.wselect[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{background:var(--c-shadow);border-bottom:1px solid var(--c-primary);color:var(--c-primary)}.wselect__popup[_ngcontent-%COMP%]{z-index:9;width:100%;left:0;position:absolute;top:calc(100% + 10px);background:var(--c-bg-secondary);box-shadow:0 0 4px var(--c-border);border-radius:10px;border:2px solid var(--c-primary);color:var(--c-text-primary);padding:0;overflow:hidden}.wselect__popup[_ngcontent-%COMP%]   .popup-block[_ngcontent-%COMP%]{max-height:180px;overflow-y:auto;padding:8px 15px 10px;margin-right:0}.wselect__popup[_ngcontent-%COMP%]   .popup-block__empty-search[_ngcontent-%COMP%]{padding:10px 0;text-align:center;color:var(--c-text-primary)}.wselect__search[_ngcontent-%COMP%]{padding:8px 15px;border-bottom:1px solid var(--c-border)}.wselect[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px;height:5px;background-color:var(--c-white)}.wselect[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:0;background-color:var(--c-border)}.selected[_ngcontent-%COMP%]{font-weight:700}._disabled-btn[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}"],changeDetection:0})}}return e})();export{u as a,st as b};
