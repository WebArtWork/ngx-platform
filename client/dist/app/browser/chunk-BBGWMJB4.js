import{c as O,f as E,g as F}from"./chunk-EJK4N3AH.js";import"./chunk-VIW2MMA5.js";import{a as k}from"./chunk-7REHAIHW.js";import{a as T}from"./chunk-DI2PC7GF.js";import"./chunk-MKE5DK2P.js";import{a as M}from"./chunk-IVOT3ZI4.js";import{j as P,m as C,u as S}from"./chunk-WKLHJP3I.js";import{A as a,Ba as m,G as g,H as h,Oa as p,U as l,_,_a as y,ha as w,ia as b,na as f,nb as x,oa as t,pa as c,xa as v,za as s}from"./chunk-SEEX5V2H.js";import"./chunk-FDERIQAA.js";var L=()=>({"border-radius":"var(--c-img-round)",width:"52px",height:"52px"});function j(i,o){if(i&1){let d=v();t(0,"wform",13),s("wChange",function(){g(d);let r=m();return h(r.update())}),c()}if(i&2){let d=m();f("config",d.formUser)("submition",d.user)}}var K=(()=>{let o=class o{constructor(){this.userService=a(M),this.url=S.url,this._formService=a(E),this.formUser=this._formService.prepareForm({formId:"user",title:"My profile",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Placeholder",value:"Enter your name ..."},{name:"Label",value:"Name"}]},{name:"Text",key:"phone",fields:[{name:"Placeholder",value:"Enter your phone ..."},{name:"Label",value:"Phone"}]},{name:"Text",key:"bio",fields:[{name:"Placeholder",value:"Enter your biography ..."},{name:"Label",value:"Biography"},{name:"Textarea",value:!0}]}]}),this.formPassword=this._formService.prepareForm({formId:"changePassword",title:"Change password",components:[{name:"Password",key:"oldPass",focused:!0,fields:[{name:"Placeholder",value:"Enter your old password ..."},{name:"Label",value:"Old Password"}]},{name:"Password",key:"newPass",fields:[{name:"Placeholder",value:"Enter your new password ..."},{name:"Label",value:"New Password"}]}]}),this._coreService=a(P),this._emitterService=a(C),this._cdr=a(x),this._emitterService.onComplete("us.user").subscribe(()=>{let e={};this._coreService.copy(this.userService.user(),e),this.user=e,this._cdr.detectChanges()})}update(){this._coreService.copy(this.user,this.userService.user),this.userService.updateMe()}changePassword(){this._formService.modal(this.formPassword,{label:"Change",click:(e,r)=>{this.userService.changePassword(e.oldPass,e.newPass),r()}})}updateThumb(e){this.userService.user.update(r=>(r.thumb=Array.isArray(e)?e[0]:e,r)),this.userService.updateMe()}};o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=_({type:o,selectors:[["ng-component"]],decls:17,vars:8,consts:[[1,"profile-wrapper"],[1,"profile-wrapper__header"],[1,"profile-wrapper__avatar"],["err","assets/default.png","container","user",3,"update","value","name","isPhoto","imgStyle","height","width"],[1,"profile-wrapper__body"],[3,"config","submition"],[1,"profile-wrapper__footer"],[1,"profile-wrapper__logout"],["type","danger",3,"click"],[1,"material-icons"],["translate",""],[1,"profile-wrapper__password"],["type","link",3,"click"],[3,"wChange","config","submition"]],template:function(r,n){r&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"ngx-file",3),s("update",function(D){return n.updateThumb(D)}),c()()(),t(4,"div",4),w(5,j,1,2,"wform",5),t(6,"div",6)(7,"div",7)(8,"wbutton",8),s("click",function(){return n.userService.logout()}),t(9,"span",9),p(10,"logout"),c(),t(11,"span",10),p(12,"Logout"),c()()(),t(13,"div",11)(14,"wbutton",12),s("click",function(){return n.changePassword()}),t(15,"span",10),p(16," Change Password "),c()()()()()()),r&2&&(l(3),f("value",n.userService.thumb())("name",n.userService.user()._id+".jpg")("isPhoto",!0)("imgStyle",y(7,L))("height",512)("width",512),l(2),b(n.user?5:-1))},dependencies:[T,k,O,F],styles:["[_ngcontent-%COMP%]:root{--c-white: #fff;--c-basic: #3558ae;--c-primary: #256eff;--c-primary-hover: #0051f1;--c-secondary: rgb(197, 61, 61);--c-secondary-hover: rgb(150, 42, 42);--c-bg-primary: #f3f4f7;--c-bg-secondary: #ffffff;--c-bg-tertiary: #fcfdfe;--c-border: #f0f1f7;--c-shadow: #f3f3f3;--c-text-primary: #666666;--c-text-secondary: #19235c;--c-placeholder: #313335ab;--c-img-round: 50%;--card-background: #fefefe;--card-border-radius: 10px;--card-box-shadow: 0 4px 12px rgba(0, 0, 0, .15);--card-margin-bottom: 24px;--card-header-padding: 20px;--card-header-background: #e0e0e0;--card-body-padding: 20px;--card-section-padding: 10px 0;--card-footer-padding: 20px;--card-footer-background: #e0e0e0;--card-border-width: 2px;--card-border-color: #cccccc;--file-img-border-radius: 50%;--file-add-bg: #28a745;--file-add-bg-hover: #218838;--file-item-border-radius: 10px;--day-name: #988888;--b-radius-btn: 10px;--transition: all .3s;--events: #4c8e9d;--border: rgba(102, 91, 91, .432);--header-doc: #d8d8d8;--doc-products: #f5f5f5}html.dark[_ngcontent-%COMP%]:root{--c-white: #fff;--c-basic: #333;--c-bg-primary: #282828;--c-bg-secondary: #343434;--c-bg-tertiary: #404040;--c-border: #404040;--c-shadow: #444444;--c-text-primary: #ffffff;--c-text-secondary: #ffffff;--c-placeholder: #d3cdcd;--c-calendar: #141414;--day-name: #dad5d5;--events: #1c2e32;--border: rgb(255 255 255 / 23%);--header-doc: #1b1b1be3;--doc-products: #252222}[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   wcard[_ngcontent-%COMP%]{width:100%;transition:all .3s;display:block}.profile-wrapper[_ngcontent-%COMP%]{padding:unset}.profile-wrapper__header[_ngcontent-%COMP%]{z-index:9;top:20px;position:absolute;right:30px;letter-spacing:0;line-height:23px;font-weight:500;font-size:20px;color:var(--c-text-primary);display:flex;justify-content:space-between;align-items:center;border-radius:12px}.profile-wrapper__avatar[_ngcontent-%COMP%]{border-radius:50%;border:1px solid var(--c-border);position:relative;margin:0 auto;padding:3px;width:60px;height:60px}.profile-wrapper__footer[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}@media (max-width: 767.9px){.profile-wrapper__footer[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.profile-wrapper__footer[_ngcontent-%COMP%]   .profile-wrapper__logout[_ngcontent-%COMP%]{order:2;margin-top:20px}}.profile-wrapper__logout[_ngcontent-%COMP%]   .w-btn[_ngcontent-%COMP%]{margin:0;display:flex;justify-content:space-between;align-items:center}.profile-wrapper__logout[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{margin-right:10px}.profile-wrapper__password[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0});let i=o;return i})();export{K as ProfileComponent};
