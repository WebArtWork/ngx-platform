import{$ as fe,A as b,B as d,Bb as j,C as Le,Db as Qe,E as We,Fb as te,Gb as ve,Ha as Ze,J as he,L as T,M as X,O as h,P,Q as C,Qb as U,R as qe,Rb as et,S as ze,Sb as tt,T as V,Tb as it,Ua as Ke,Ub as nt,Vb as rt,Wb as st,Zb as ot,aa as y,c as v,ca as Q,d as J,da as w,ea as Je,f as Y,fa as R,g as xe,h as Ne,ha as pe,hb as me,i as F,ia as Ye,j as Te,k as Z,ka as ge,l as Pe,m as Re,o as je,p as Ue,q as Ge,r as N,s as Be,t as $e,tb as ee,u as He,v as ue,vb as Xe,w as de,wb as _e,x as _,y as K,z as M}from"./chunk-VOU2RNQA.js";import{a as u,b as m,e as p}from"./chunk-FDERIQAA.js";function ye(n,t){let e=t?.injector??d(he),i=new Y(1),r=P(()=>{let s;try{s=n()}catch(o){C(()=>i.error(o));return}C(()=>i.next(s))},{injector:e,manualCleanup:!0});return e.get(T).onDestroy(()=>{r.destroy(),i.complete()}),i.asObservable()}var gt=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(y(fe),y(V))};static \u0275dir=w({type:n})}return n})(),Pt=(()=>{class n extends gt{static \u0275fac=(()=>{let e;return function(r){return(e||(e=ze(n)))(r||n)}})();static \u0275dir=w({type:n,features:[R]})}return n})(),mt=new M("");var Rt={provide:mt,useExisting:de(()=>_t),multi:!0};function jt(){let n=ve()?ve().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Ut=new M(""),_t=(()=>{class n extends gt{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!jt())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(y(fe),y(V),y(Ut,8))};static \u0275dir=w({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&Ze("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},standalone:!1,features:[me([Rt]),R]})}return n})();function Se(n){return n==null||Ae(n)===0}function Ae(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Gt=new M(""),Bt=new M(""),$t=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,at=class{static min(t){return Ht(t)}static max(t){return Lt(t)}static required(t){return Wt(t)}static requiredTrue(t){return qt(t)}static email(t){return zt(t)}static minLength(t){return Jt(t)}static maxLength(t){return Yt(t)}static pattern(t){return Zt(t)}static nullValidator(t){return vt()}static compose(t){return Mt(t)}static composeAsync(t){return St(t)}};function Ht(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function Lt(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function Wt(n){return Se(n.value)?{required:!0}:null}function qt(n){return n.value===!0?null:{required:!0}}function zt(n){return Se(n.value)||$t.test(n.value)?null:{email:!0}}function Jt(n){return t=>{let e=t.value?.length??Ae(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function Yt(n){return t=>{let e=t.value?.length??Ae(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function Zt(n){if(!n)return vt;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Se(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function vt(n){return null}function yt(n){return n!=null}function Dt(n){return Ye(n)?Ne(n):n}function bt(n){let t={};return n.forEach(e=>{t=e!=null?u(u({},t),e):t}),Object.keys(t).length===0?null:t}function Ct(n,t){return t.map(e=>e(n))}function Kt(n){return!n.validate}function wt(n){return n.map(t=>Kt(t)?t:e=>t.validate(e))}function Mt(n){if(!n)return null;let t=n.filter(yt);return t.length==0?null:function(e){return bt(Ct(e,t))}}function Vt(n){return n!=null?Mt(wt(n)):null}function St(n){if(!n)return null;let t=n.filter(yt);return t.length==0?null:function(e){let i=Ct(e,t).map(Dt);return Re(i).pipe(Z(bt))}}function At(n){return n!=null?St(wt(n)):null}function lt(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Xt(n){return n._rawValidators}function Qt(n){return n._rawAsyncValidators}function De(n){return n?Array.isArray(n)?n:[n]:[]}function ne(n,t){return Array.isArray(n)?n.includes(t):n===t}function ct(n,t){let e=De(t);return De(n).forEach(r=>{ne(e,r)||e.push(r)}),e}function ut(n,t){return De(t).filter(e=>!ne(n,e))}var re=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Vt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=At(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},be=class extends re{name;get formDirective(){return null}get path(){return null}},L=class extends re{_parent=null;name=null;valueAccessor=null},Ce=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Yi=(()=>{class n extends Ce{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(y(L,2))};static \u0275dir=w({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Ke("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[R]})}return n})();var G="VALID",ie="INVALID",I="PENDING",B="DISABLED",S=class{},se=class extends S{value;source;constructor(t,e){super(),this.value=t,this.source=e}},$=class extends S{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},H=class extends S{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},E=class extends S{status;source;constructor(t,e){super(),this.status=t,this.source=e}};var we=class extends S{source;constructor(t){super(),this.source=t}};function ei(n){return(oe(n)?n.validators:n)||null}function ti(n){return Array.isArray(n)?Vt(n):n||null}function ii(n,t){return(oe(t)?t.asyncValidators:n)||null}function ni(n){return Array.isArray(n)?At(n):n||null}function oe(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var Me=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return C(this.statusReactive)}set status(t){C(()=>this.statusReactive.set(t))}_status=ee(()=>this.statusReactive(),{});statusReactive=h(void 0,{});get valid(){return this.status===G}get invalid(){return this.status===ie}get pending(){return this.status==I}get disabled(){return this.status===B}get enabled(){return this.status!==B}errors;get pristine(){return C(this.pristineReactive)}set pristine(t){C(()=>this.pristineReactive.set(t))}_pristine=ee(()=>this.pristineReactive(),{});pristineReactive=h(!0,{});get dirty(){return!this.pristine}get touched(){return C(this.touchedReactive)}set touched(t){C(()=>this.touchedReactive.set(t))}_touched=ee(()=>this.touchedReactive(),{});touchedReactive=h(!1,{});get untouched(){return!this.touched}_events=new J;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(ct(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(ct(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(ut(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(ut(t,this._rawAsyncValidators))}hasValidator(t){return ne(this._rawValidators,t)}hasAsyncValidator(t){return ne(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(m(u({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new H(!0,i))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new H(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(m(u({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new $(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new $(!0,i))}markAsPending(t={}){this.status=I;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new E(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(m(u({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=B,this.errors=null,this._forEachChild(r=>{r.disable(m(u({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new se(this.value,i)),this._events.next(new E(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(m(u({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=G,this._forEachChild(i=>{i.enable(m(u({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(m(u({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===G||this.status===I)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new se(this.value,e)),this._events.next(new E(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(m(u({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?B:G}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=I,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let i=Dt(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new E(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new X,this.statusChanges=new X}_calculateStatus(){return this._allControlsDisabled()?B:this.errors?ie:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(I)?I:this._anyControlsHaveStatus(ie)?ie:G}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new $(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new H(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){oe(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=ti(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=ni(this._rawAsyncValidators)}};var Ft=new M("",{factory:()=>Fe}),Fe="always";function ri(n,t){return[...t.path,n]}function si(n,t,e=Fe){ai(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),li(n,t),ui(n,t),ci(n,t),oi(n,t)}function dt(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function oi(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function ai(n,t){let e=Xt(n);t.validator!==null?n.setValidators(lt(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=Qt(n);t.asyncValidator!==null?n.setAsyncValidators(lt(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();dt(t._rawValidators,r),dt(t._rawAsyncValidators,r)}function li(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&It(n,t)})}function ci(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&It(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function It(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ui(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function di(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function hi(n){return Object.getPrototypeOf(n.constructor)===Pt}function fi(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===_t?e=s:hi(s)?i=s:r=s}),r||i||e||null}function ht(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function ft(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var pi=class extends Me{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(ei(e),ii(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),oe(e)&&(e.nonNullable||e.initialValueIsDefault)&&(ft(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),e.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,e?.emitEvent!==!1&&this._events.next(new we(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ht(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ht(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){ft(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var gi={provide:L,useExisting:de(()=>mi)},pt=Promise.resolve(),mi=(()=>{class n extends L{_changeDetectorRef;callSetDisabledState;control=new pi;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new X;constructor(e,i,r,s,o,l){super(),this._changeDetectorRef=o,this.callSetDisabledState=l,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=fi(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),di(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){si(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){pt.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&Qe(i);pt.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?ri(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(y(be,9),y(Gt,10),y(Bt,10),y(mt,10),y(j,8),y(Ft,8))};static \u0275dir=w({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[me([gi]),R,qe]})}return n})();var _i=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Q({type:n});static \u0275inj=K({})}return n})();var Ki=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ft,useValue:e.callSetDisabledState??Fe}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Q({type:n});static \u0275inj=K({imports:[_i]})}return n})();var O=new M("config"),ae={store:{prefix:"waStore"},meta:{useTitleSuffix:!1,warnMissingGuard:!1,defaults:{links:{}}},socket:!1,http:{url:"",headers:{}}},vi={headers:{},url:""},yi={endpoints:["https://api.webart.work/status","https://www.google.com/generate_204","https://www.gstatic.com/generate_204","https://www.cloudflare.com/cdn-cgi/trace"],intervalMs:3e4,timeoutMs:2500,goodLatencyMs:300,maxConsecutiveFails:3};var W=n=>typeof n<"u",Di=(()=>{class n{constructor(e,i,r,s){this.config=e,this.router=i,this.meta=r,this.titleService=s,this.config=this.config||ae,this._meta=this.config.meta||{},this._warnMissingGuard()}setDefaults(e){this._meta.defaults=u(u({},this._meta.defaults),e)}setTitle(e,i){let r=W(e)?e||"":this._meta.defaults?.title||"";return this._meta.useTitleSuffix&&(r+=W(i)?i:this._meta.defaults?.titleSuffix||""),this._updateMetaTag("title",r),this._updateMetaTag("og:title",r),this._updateMetaTag("twitter:title",r),this.titleService.setTitle(r),this}setLink(e){return Object.keys(e).forEach(i=>{let r=document.createElement("link");r.setAttribute("rel",i),r.setAttribute("href",e[i]),document.head.appendChild(r)}),this}setTag(e,i,r){if(e==="title"||e==="titleSuffix")throw new Error(`Attempt to set ${e} through 'setTag': 'title' and 'titleSuffix' are reserved. Use 'MetaService.setTitle' instead.`);let s=(W(i)?i||"":this._meta.defaults?.[e]||"")+"";this._updateMetaTag(e,s,r),e==="description"&&(this._updateMetaTag("og:description",s,r),this._updateMetaTag("twitter:description",s,r))}_updateMetaTag(e,i,r){r=r||(e.startsWith("og:")||e.startsWith("twitter:")?"property":"name"),this.meta.updateTag({[r]:e,content:i})}removeTag(e,i){i=i||(e.startsWith("og:")||e.startsWith("twitter:")?"property":"name"),this.meta.removeTag(`${i}="${e}"`)}_warnMissingGuard(){if(W(this._meta.warnMissingGuard)&&!this._meta.warnMissingGuard)return;let e=!!Object.keys(this._meta.defaults??{}).length,i=o=>o&&o.IDENTIFIER==="MetaGuard",r=!1,s=o=>{let l=o.data&&o.data.meta;!W(o.redirectTo)&&(e||l)&&!(o.canActivate||[]).some(i)&&(console.warn(`Route with path "${o.path}" has ${l?"":"default "}meta tags, but does not use MetaGuard. Please add MetaGuard to the canActivate array in your route configuration`),r=!0),(o.children||[]).forEach(s)};this.router.config.forEach(s),r&&console.warn("To disable these warnings, set metaConfig.warnMissingGuard: false in your MetaConfig passed to MetaModule.forRoot()")}static{this.\u0275fac=function(i){return new(i||n)(b(O,8),b(ot),b(rt),b(st))}}static{this.\u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gn=(()=>{class n{static{this.IDENTIFIER="MetaGuard"}constructor(e,i){this.metaService=e,this.config=i,this.config||(this.config=ae),this._meta=this.config.meta||{},this._meta.defaults=this._meta.defaults||{}}canActivate(e,i){return this._processRouteMetaTags(e.data&&e.data.meta),!0}_processRouteMetaTags(e={}){e.disableUpdate||(e.title&&this.metaService.setTitle(e.title,e.titleSuffix),e.links&&Object.keys(e.links).length&&this.metaService.setLink(e.links),this._meta.defaults?.links&&Object.keys(this._meta.defaults.links).length&&this.metaService.setLink(this._meta.defaults.links),Object.keys(e).forEach(i=>{i==="title"||i==="titleSuffix"||i==="links"||Object.keys(e[i]).forEach(r=>{this.metaService.setTag(r,e[i][r],i)})}),Object.keys(this._meta.defaults).forEach(i=>{i in e||i==="title"||i==="titleSuffix"||i==="links"||this.metaService.setTag(i,this._meta.defaults[i])}))}static{this.\u0275fac=function(i){return new(i||n)(b(Di),b(O,8))}}static{this.\u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();String.prototype.capitalize||(String.prototype.capitalize=function(){return this.length>0?this.charAt(0).toUpperCase()+this.slice(1).toLowerCase():""});var kt=(()=>{class n{constructor(){this.deviceID=localStorage.getItem("deviceID")||(typeof crypto?.randomUUID=="function"?crypto.randomUUID():this.UUID()),this._afterWhile={},this.device="",this.version="1.0.0",this.appVersion="",this.dateVersion="",this._locked={},this._unlockResolvers={},localStorage.setItem("deviceID",this.deviceID),this.detectDevice()}UUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let i=Math.random()*16|0;return(e==="x"?i:i&3|8).toString(16)})}ota(e,i=!1){if(Array.isArray(e))return e;if(typeof e!="object"||e===null)return[];let r=[];for(let s in e)e.hasOwnProperty(s)&&(e[s]||typeof e[s]=="number"||typeof e[s]=="boolean")&&(i?r.push(s):r.push(e[s]));return r}splice(e,i,r="_id"){if(!Array.isArray(e)||!Array.isArray(i))return i;let s=new Set(e.map(o=>o[r]));return i.filter(o=>!s.has(o[r]))}ids2id(...e){return e.sort((i,r)=>Number(i.toString().substring(0,8))>Number(r.toString().substring(0,8))?1:-1),e.join()}afterWhile(e,i,r=1e3){typeof e=="function"&&(i=e,e="common"),typeof i=="function"&&typeof r=="number"&&(typeof e=="string"?(clearTimeout(this._afterWhile[e]),this._afterWhile[e]=window.setTimeout(i,r)):typeof e=="object"?(clearTimeout(e.__afterWhile),e.__afterWhile=window.setTimeout(i,r)):console.warn("badly configured after while"))}copy(e,i){for(let r in e)typeof e[r]!="object"||e[r]instanceof Date||Array.isArray(e[r])||e[r]===null?i[r]=e[r]:((typeof i[r]!="object"||i[r]instanceof Date||Array.isArray(i[r])||i[r]===null)&&(i[r]={}),this.copy(e[r],i[r]))}detectDevice(){let e=navigator.userAgent||navigator.vendor||window.opera;/windows phone/i.test(e)?this.device="Windows Phone":/android/i.test(e)?this.device="Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?this.device="iOS":this.device="Web"}isMobile(){return this.device==="Windows Phone"||this.device==="Android"||this.device==="iOS"}isTablet(){return this.device==="iOS"&&/iPad/.test(navigator.userAgent)}isWeb(){return this.device==="Web"}isAndroid(){return this.device==="Android"}isIos(){return this.device==="iOS"}setVersion(){this.version=this.appVersion||"",this.version+=this.version&&this.dateVersion?" ":"",this.version+=this.dateVersion||""}setAppVersion(e){this.appVersion=e,this.setVersion()}setDateVersion(e){this.dateVersion=e,this.setVersion()}lock(e){this._locked[e]=!0,this._unlockResolvers[e]||(this._unlockResolvers[e]=[])}unlock(e){this._locked[e]=!1,this._unlockResolvers[e]&&(this._unlockResolvers[e].forEach(i=>i()),this._unlockResolvers[e]=[])}onUnlock(e){return this._locked[e]?new Promise(i=>{this._unlockResolvers[e]||(this._unlockResolvers[e]=[]),this._unlockResolvers[e].push(i)}):Promise.resolve()}locked(e){return!!this._locked[e]}toSignal(e,i={}){if(Object.keys(i).length){let r={};for(let s in i)r[s]=h(i[s](e));return h(u(u({},e),r))}else return h(e)}toSignalsArray(e,i={}){return e.map(r=>this.toSignal(r,i))}pushSignal(e,i,r={}){e.push(this.toSignal(i,r))}removeSignalByField(e,i,r="_id"){let s=e.findIndex(o=>o()[r]===i);s>-1&&e.splice(s,1)}trackBySignalField(e){return(i,r)=>r()[e]}findSignalByField(e,i,r="_id"){return e.find(s=>s()[r]===i)}updateSignalByField(e,i,r,s){let o=this.findSignalByField(e,i,s);o&&o.update(r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Et=class{constructor(t,e,i,r=""){this.documents=h([],{}),this.page=1,this.__core=d(kt),this.__cdr=d(j),this.updatableFields=["_id","name","description","data"],this.configType="server",this.perPage=20,this._module="";let s=t;this.__form=e,this.form=s,this.crudService=i,this._module=r}setDocuments(t=this.page,e=""){return new Promise(i=>{this.configType==="server"?(this.page=t,this.__core.afterWhile(this,()=>{this.crudService.get({page:t,query:e},this.getOptions()).subscribe(r=>{this.documents.update(()=>r.map(s=>this.crudService.getSignal(s))),i(),this.__cdr.markForCheck()})},250)):(this.documents.update(()=>this.crudService.getDocs().map(r=>this.crudService.getSignal(r))),this.crudService.loaded.pipe(N(1)).subscribe(()=>{i(),this.__cdr.markForCheck()}))})}preCreate(t){delete t.__creating}allowCreate(){return!0}allowMutate(){return!0}allowUrl(){return!0}allowSort(){return!1}getOptions(){return{}}bulkManagement(t=!0){return()=>{this.__form.modalDocs(t?[]:this.documents().map(e=>Object.fromEntries(this.updatableFields.map(i=>[i,e()[i]])))).then(e=>p(this,null,function*(){if(t)for(let i of e)this.preCreate(i),yield F(this.crudService.create(i));else{for(let i of this.documents())e.find(r=>r._id===i()._id)||(yield F(this.crudService.delete(i())));for(let i of e){let r=this.documents().find(s=>s()._id===i._id);r?(r.update(s=>(this.__core.copy(i,s),s)),yield F(this.crudService.update(r()))):(this.preCreate(i),yield F(this.crudService.create(i)))}}this.setDocuments()}))}}create(){this.__form.modal(this.form,{label:"Create",click:(t,e)=>p(this,null,function*(){e(),this.preCreate(t),yield F(this.crudService.create(t)),this.setDocuments()})})}update(t){this.__form.modal(this.form,{label:"Update",click:(e,i)=>{i(),this.__core.copy(e,t),this.crudService.update(t),this.__cdr.markForCheck()}},t)}delete(t){return p(this,null,function*(){this.crudService.delete(t).subscribe(()=>{this.setDocuments()})})}mutateUrl(t){this.__form.modalUnique(this._module,"url",t)}moveUp(t){let e=this.documents().findIndex(i=>i()._id===t._id);e&&this.documents.update(i=>(i.splice(e,1),i.splice(e-1,0,this.crudService.getSignal(t)),i));for(let i=0;i<this.documents().length;i++)this.documents()[i]().order!==i&&(this.documents()[i]().order=i,this.crudService.update(this.documents()[i]()));this.__cdr.markForCheck()}getConfig(){let t={create:this.allowCreate()?()=>{this.create()}:null,update:this.allowMutate()?e=>{this.update(e)}:null,delete:this.allowMutate()?e=>{this.delete(e)}:null,buttons:[],headerButtons:[],allDocs:!0};return this.allowUrl()&&t.buttons.push({icon:"cloud_download",click:e=>{this.mutateUrl(e)}}),this.allowSort()&&t.buttons.push({icon:"arrow_upward",click:e=>{this.moveUp(e)}}),this.allowCreate()&&t.headerButtons.push({icon:"playlist_add",click:this.bulkManagement(),class:"playlist"}),this.allowMutate()&&t.headerButtons.push({icon:"edit_note",click:this.bulkManagement(!1),class:"edit"}),this.configType==="server"?m(u({},t),{paginate:this.setDocuments.bind(this),perPage:this.perPage,setPerPage:this.crudService.setPerPage?.bind(this.crudService),allDocs:!1}):t}},mn=(()=>{class n{constructor(){this.clickOutside=Xe(),this._host=d(V),this._cdr=d(j),this._dref=d(T),this.handler=e=>{this._host.nativeElement.contains(e.target)||(this.clickOutside.emit(e),this._cdr.markForCheck())},document.addEventListener("pointerdown",this.handler,!0),this._dref.onDestroy(()=>document.removeEventListener("pointerdown",this.handler,!0))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=w({type:n,selectors:[["","clickOutside",""]],outputs:{clickOutside:"clickOutside"}})}}return n})(),_n=(()=>{class n{constructor(){this.el=d(V),this.manualDisabled=_e(null,{alias:"manualDisabled"}),this.syncDisabledEffect=P(()=>{let e=this.manualDisabled();if(e==null)return;let i=this.el.nativeElement;i&&(i.disabled=!!e)},{})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=w({type:n,selectors:[["input","manualDisabled",""],["textarea","manualDisabled",""]],inputs:{manualDisabled:[1,"manualDisabled"]}})}}return n})();var vn=(()=>{class n{constructor(){this.el=d(V),this.manualType=_e(null,{alias:"manualType"}),this.syncTypeEffect=P(()=>{let e=this.manualType();if(!e)return;let i=this.el.nativeElement;i&&i.type!==e&&(i.type=e)},{})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=w({type:n,selectors:[["input","manualType",""],["textarea","manualType",""]],inputs:{manualType:[1,"manualType"]}})}}return n})();var yn=(()=>{class n{transform(e,i,r,s,o=!1,l){let c=pe(i)?i():i,a=pe(r)?r():r;typeof a=="number"&&(s=a,a=void 0);let g=Array.isArray(e)?e:Object.values(e);if(o||!c)return s?g.slice(0,s):g;let xt=a?Array.isArray(a)?a:a.trim().split(/\s+/):["name"],Nt=Array.isArray(c)?c.map(f=>f.toLowerCase()):typeof c=="object"?Object.keys(c).filter(f=>c[f]).map(f=>f.toLowerCase()):[c.toLowerCase()],Ie=f=>{if(f==null)return!1;let D=f.toString().toLowerCase();return Nt.some(A=>D.includes(A)||A.includes(D))},le=(f,D)=>{if(!f)return!1;let[A,...q]=D,z=f[A];return Array.isArray(z)?z.some(Oe=>q.length?le(Oe,q):Ie(Oe)):q.length?le(z,q):Ie(z)},ce=[],Ee=new Set,ke=(f,D)=>{for(let A of xt)if(le(f,A.split("."))){Ee.has(D)||(ce.push(f),Ee.add(D));break}};return Array.isArray(e)?g.forEach((f,D)=>ke(f,D)):Object.entries(e).forEach(([f,D])=>ke(D,f)),s?ce.slice(0,s):ce}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=Je({name:"search",type:n,pure:!0})}}return n})();var x=(()=>{class n{constructor(){this._signals=new Map,this._closers=new Map,this._streams=new Map,this._done=new Map}_getSignal(e){let i=this._signals.get(e);return i||(i=h(void 0,{equal:()=>!1}),this._signals.set(e,i)),i}_getCloser(e){let i=this._closers.get(e);return i||(i=new J,this._closers.set(e,i)),i}_getStream(e){let i=this._streams.get(e);if(!i){let r=this._getSignal(e),s=this._getCloser(e);i=ye(r).pipe(He(1),ue(s),$e()),this._streams.set(e,i)}return i}emit(e,i){this._getSignal(e).set(i)}on(e){return this._getStream(e)}off(e){let i=this._closers.get(e);i&&(i.next(),i.complete(),this._closers.delete(e)),this._signals.delete(e),this._streams.delete(e)}offAll(){for(let e of Array.from(this._closers.keys()))this.off(e)}has(e){return this._signals.has(e)}_getDoneSignal(e){let i=this._done.get(e);return i||(i=h(void 0),this._done.set(e,i)),i}complete(e,i=!0){this._getDoneSignal(e).set(i)}clearCompleted(e){(this._done.get(e)??this._getDoneSignal(e)).set(void 0)}completed(e){return this._getDoneSignal(e)()}isCompleted(e){return this._getDoneSignal(e)()!==void 0}onComplete(e,i){let r=(Array.isArray(e)?e:[e]).filter(Boolean),s=r.map(l=>ye(this._getDoneSignal(l)).pipe(Ue(c=>c!==void 0),Z(c=>c))),o;if(r.length<=1?o=s[0]?.pipe(N(1))??new v:i?.mode==="any"?o=je(...s).pipe(N(1)):o=Pe(s).pipe(N(1)),i?.timeoutMs&&Number.isFinite(i.timeoutMs)&&(o=o.pipe(Te({first:i.timeoutMs}))),i?.abort){let l=new v(c=>{let a=()=>{c.next(),c.complete()};return i.abort.addEventListener("abort",a),()=>i.abort.removeEventListener("abort",a)});o=o.pipe(ue(l))}return o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bi=(()=>{class n{constructor(e,i){if(this._http=i,this.errors=[],this.url=localStorage.getItem("wacom-http.url")||"",this.locked=!1,this.awaitLocked=[],this._headers=localStorage.getItem("wacom-http.headers")?JSON.parse(localStorage.getItem("wacom-http.headers")):{},this._http_headers=new U(this._headers),this._config=u(u({},vi),e.http||{}),typeof this._config.url=="string"&&this.setUrl(this._config.url),typeof this._config.headers=="object"){for(let r in this._config.headers)this._headers[r]=this._config.headers[r];this._http_headers=new U(this._headers)}}setUrl(e){this.url=e,localStorage.setItem("wacom-http.url",e)}removeUrl(){this.url=this._config.url||"",localStorage.removeItem("wacom-http.url")}set(e,i){this._headers[e]=i,localStorage.setItem("wacom-http.headers",JSON.stringify(this._headers)),this._http_headers=new U(this._headers)}header(e){return this._headers[e]}remove(e){delete this._headers[e],localStorage.setItem("wacom-http.headers",JSON.stringify(this._headers)),this._http_headers=new U(this._headers)}_httpMethod(e,i,r,s){return e==="post"?this._http.post(i,r,s):e==="put"?this._http.put(i,r,s):e==="patch"?this._http.patch(i,r,s):e==="delete"?this._http.delete(i,s):this._http.get(i,s)}_post(e,i,r=l=>{},s={},o="post"){if(typeof s=="function"&&(s={err:s}),s.err||(s.err=a=>{}),this.locked&&!s.skipLock)return new v(a=>{let g=setTimeout(()=>{this._post(e,i,r,s,o).subscribe(a)},100);this.awaitLocked.push(g)});let l=(s.url||this.url)+e;this.prepare_handle(l,i);let c=new Y(1);return this._httpMethod(o,l,i,{headers:this._http_headers}).pipe(Be(),Ge(a=>(this.handleError(s.err,()=>{this._post(e,i,r,s,o).subscribe(c)})(a),c.error(a),xe))).subscribe({next:a=>{if(s.acceptance&&typeof s.acceptance=="function"&&!s.acceptance(a)){let g=new et({error:"Acceptance failed",status:400});this.handleError(s.err,()=>{})(g),c.error(g);return}if(s.replace&&typeof s.replace=="function"&&(Array.isArray(this._getObjectToReplace(a,s.data))?this._getObjectToReplace(a,s.data).map(g=>s.replace(g)):this._getObjectToReplace(a,s.data)&&s.replace(this._getObjectToReplace(a,s.data))),Array.isArray(s.fields)){if(Array.isArray(this._getObjectToReplace(a,s.data)))this._getObjectToReplace(a,s.data).map(g=>this._newDoc(g,s.fields));else if(this._getObjectToReplace(a,s.data)){let g=this._newDoc(this._getObjectToReplace(a,s.data),s.fields);s.data?this._setObjectToReplace(a,s.data,g):a=g}}this.response_handle(l,a,()=>r(a)),c.next(a),c.complete()},error:a=>c.error(a),complete:()=>c.complete()}),c.asObservable()}post(e,i,r=o=>{},s={}){return this._post(e,i,r,s)}put(e,i,r=o=>{},s={}){return this._post(e,i,r,s,"put")}patch(e,i,r=o=>{},s={}){return this._post(e,i,r,s,"patch")}delete(e,i=s=>{},r={}){return this._post(e,null,i,r,"delete")}get(e,i=s=>{},r={}){return this._post(e,null,i,r,"get")}clearLocked(){for(let e of this.awaitLocked)clearTimeout(e);this.awaitLocked=[]}lock(){this.locked=!0}unlock(){this.locked=!1}handleError(e,i){return r=>new Promise(s=>{this.err_handle(r,e,i),s()})}err_handle(e,i,r){typeof i=="function"&&i(e);for(let s of this.errors)typeof s=="function"&&s(e,r)}prepare_handle(e,i){}response_handle(e,i,r){typeof r=="function"&&r()}_getObjectToReplace(e,i=""){if(i.includes(".")){let r=i.split(""),s=r.pop()||"";return this._getObjectToReplace(e[s]||{},r.join("."))}else return i?e[i]:e}_setObjectToReplace(e,i="",r){for(;i.includes(".");){let s=i.split(""),o=s.pop()||"";e=e[o]||{},i=s.join(".")}e[i]=r}_newDoc(e,i){let r={};for(let s of i)r[s]=e[s];return r}static{this.\u0275fac=function(i){return new(i||n)(b(O,8),b(tt))}}static{this.\u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ci=(()=>{class n{constructor(e){this._status=h(navigator.onLine?"poor":"none",{}),this._latencyMs=h(null,{}),this._isOnline=h(navigator.onLine,{}),this.status=this._status.asReadonly(),this.latencyMs=this._latencyMs.asReadonly(),this.isOnline=this._isOnline.asReadonly(),this.fails=0,this._emitterService=d(x),this._config=u(u({},yi),e.network||{}),this._bindEvents(),this.recheckNow(),window.setInterval(()=>this.recheckNow(),this._config.intervalMs)}recheckNow(){return p(this,null,function*(){let e=yield this._pingAny();e.ok&&e.latency!=null?(this.fails=0,this._latencyMs.set(e.latency),this._isOnline.set(!0)):(this.fails++,this._latencyMs.set(null)),this._updateClassification()})}_updateClassification(){if(!this._isOnline()||this.fails>=this._config.maxConsecutiveFails){this._status()!=="none"&&(this._status.set("none"),this._emitterService.emit("wacom_offline"));return}let e=this._latencyMs();e!=null&&e<=this._config.goodLatencyMs?this._status()!=="good"&&(this._status.set("good"),this._emitterService.emit("wacom_online")):this._status()!=="poor"&&(this._status.set("poor"),this._emitterService.emit("wacom_online"))}_bindEvents(){window.addEventListener("online",()=>{this._isOnline.set(!0),this.recheckNow()}),window.addEventListener("offline",()=>{this._isOnline.set(!1),this._updateClassification()}),navigator.connection?.addEventListener?.("change",()=>this.recheckNow())}_pingAny(){return p(this,null,function*(){for(let e of this._config.endpoints){let i=!e.includes("api.webart.work"),r=yield this._measure(e,this._config.timeoutMs,i).catch(()=>null);if(r?.ok)return r}return{ok:!1,latency:null}})}_measure(e,i,r=!1){return p(this,null,function*(){let s=new AbortController,o=setTimeout(()=>s.abort(),i),l=performance.now();try{let c=yield fetch(e+(e.includes("?")?"&":"?")+"t="+Date.now(),{method:"GET",cache:"no-store",credentials:"omit",signal:s.signal,mode:r?"no-cors":"cors"});clearTimeout(o);let a=Math.round(performance.now()-l);return{ok:r?!0:c.ok,latency:a}}catch{return clearTimeout(o),{ok:!1,latency:null}}})}static{this.\u0275fac=function(i){return new(i||n)(b(O,8))}}static{this.\u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wi=(()=>{class n{constructor(e){this._prefix="",this._config=u(u({},ae),e?.store||{})}setPrefix(e){this._prefix=e}set(e,i,r=()=>{},s=()=>{}){return p(this,null,function*(){e=this._applyPrefix(e);try{return this._config.set?yield this._config.set(e,i,r,s):(localStorage.setItem(e,i),r()),!0}catch(o){return console.error(o),s(o),!1}})}get(e,i,r=()=>{}){return p(this,null,function*(){e=this._applyPrefix(e);try{if(this._config.get)return(yield this._config.get(e,o=>{i?.(o??null)},r))??null;{let s=localStorage.getItem(e);return i?.(s??null),s??null}}catch(s){return console.error(s),r(s),null}})}setJson(e,i,r=()=>{},s=()=>{}){return p(this,null,function*(){return yield this.set(e,JSON.stringify(i),r,s)})}getJson(e,i,r=()=>{}){return p(this,null,function*(){let s=yield this.get(e);if(s===null)return null;try{let o=JSON.parse(s);return i?.(o),o}catch(o){return r?.(o),console.error(o),null}})}remove(e,i=()=>{},r=()=>{}){return p(this,null,function*(){e=this._applyPrefix(e);try{return this._config.remove?yield this._config.remove(e,i,r):(localStorage.removeItem(e),i(),!0)}catch(s){return console.error(s),r(s),!1}})}clear(e,i){return p(this,null,function*(){try{return this._config.clear?yield this._config.clear():localStorage.clear(),e?.(),!0}catch(r){return console.error(r),i?.(r),!1}})}_applyPrefix(e){return this._config.prefix&&(e=this._config.prefix+e),this._prefix&&(e=this._prefix+e),e}static{this.\u0275fac=function(i){return new(i||n)(b(O,8))}}static{this.\u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),k=class{constructor(t){this._config=t,this._url="/api/",this._docs=[],this._perPage=20,this._filteredDocumentsCallbacks=[],this.__httpService=d(bi),this.__storeService=d(wi),this.__coreService=d(kt),this.__emitterService=d(x),this.__networkService=d(Ci),this._signals={},this._fetchingId={},this._onOnline=[],this._randomCount=0,this._config.signalFields=this._config.signalFields||{},this._url+=this._config.name,this.loaded=this.__emitterService.onComplete(this._config.name+"_loaded"),this.getted=this.__emitterService.onComplete(this._config.name+"_getted"),this._config.unauthorized?this.restoreDocs():localStorage.getItem("waw_user")&&JSON.parse(localStorage.getItem("waw_user"))._id===localStorage.getItem(this._config.name+"waw_user_id")&&this.restoreDocs(),this.__emitterService.on("wipe").subscribe(()=>{this.clearDocs(),this._filterDocuments()}),this.__emitterService.on("wacom_online").subscribe(()=>{for(let e of this._onOnline)e();this._onOnline.length=0})}getSignal(t){if(typeof t!="string"&&(t=this._id(t)),this._signals[t])return this._signals[t];let e=this.doc(t);return this._signals[t]=this.__coreService.toSignal(e,this._config.signalFields),this._signals[t]}removeSignals(t=[]){for(let e in this._signals)t.includes(e)||delete this._signals[e]}restoreDocs(){return p(this,null,function*(){let t=yield this.__storeService.getJson("docs_"+this._config.name);if(t?.length){this._docs.length=0,this._docs.push(...t);for(let e in this._signals){let i=this._docs.find(r=>this._id(r)===e);i&&this._syncSignalForDoc(i)}this._filterDocuments();for(let e of this._docs);this.__emitterService.complete(this._config.name+"_loaded",this._docs)}})}setDocs(){this.__storeService.setJson("docs_"+this._config.name,this._docs)}getDocs(t=()=>!0){return this._docs.filter(t)}getDoc(t){return this._docs.find(t)}clearDocs(){this._docs.splice(0,this._docs.length),this.setDocs()}addDocs(t){if(Array.isArray(t))for(let e of t)this.addDoc(e)}addDoc(t){this._config.replace&&this._config.replace(t);let e=this._docs.find(i=>this._id(t)&&this._id(i)===this._id(t)||t._localId&&i._localId===t._localId);e?(this.__coreService.copy(t,e),this.__coreService.copy(e,t),this._syncSignalForDoc(e)):(this._docs.push(t),this._syncSignalForDoc(t)),this.setDocs()}new(t={}){return m(u({},t),{_id:void 0,_localId:this._localId(),__created:!1,__modified:!1})}doc(t){if(this._signals[t])return this._signals[t]();let e=this._docs.find(i=>this._id(i)===t||i._localId&&i._localId===Number(t))||null;return e||(e=this.new({_id:t}),this._docs.push(e),this.setDocs()),!this._docs.find(i=>this._id(i)===t)&&!this._fetchingId[t]&&(this._fetchingId[t]=!0,setTimeout(()=>{this.fetch({_id:t}).subscribe(i=>{this._fetchingId[t]=!1,i&&(this.__coreService.copy(i,e),this._syncSignalForDoc(e))})})),e}setPerPage(t){this._perPage=t}get(t={},e={}){if(!this.__networkService.isOnline())return new v(o=>{this._onOnline.push(()=>{this.get(t,e).subscribe(o)})});if(!this._config.unauthorized&&localStorage.getItem("waw_user")){let o=JSON.parse(localStorage.getItem("waw_user"));localStorage.setItem(this._config.name+"waw_user_id",o._id)}let i=`${this._url}/get${e.name||""}`,r=(typeof t.page=="number"||t.query?"?":"")+(t.query||"")+(typeof t.page=="number"?`&skip=${this._perPage*(t.page-1)}&limit=${this._perPage}`:""),s=this.__httpService.get(`${i}${r}`);return s.subscribe({next:o=>{o=o||[],typeof t.page!="number"&&this.clearDocs(),o.forEach(l=>this.addDoc(l)),e.callback&&e.callback(o),typeof t.page!="number"&&(this._filterDocuments(),this.__emitterService.complete(this._config.name+"_getted",this._docs)),this.__emitterService.emit(`${this._config.name}_get`,this._docs),this.__emitterService.emit(`${this._config.name}_changed`,this._docs)},error:o=>{e.errCallback&&e.errCallback(o)}}),s}create(t={},e={}){if(t._id)return this.update(t,e);if(t._localId||=this._localId(),t.__options||={},t.__options.create=e,this.addDoc(t),this._filterDocuments(),!this.__networkService.isOnline())return new v(r=>{this._onOnline.push(()=>{this.create(t,e).subscribe(r)})});if(t.__creating)return new v(r=>{r.error(new Error("Document is currently already creating."))});this._config.appId&&(t.appId=this._config.appId),t.__creating=!0;let i=this.__httpService.post(`${this._url}/create${e.name||""}`,t);return i.subscribe({next:r=>{r?(this.__coreService.copy(r,t),this.addDoc(t),this._filterDocuments(),e.callback&&e.callback(t)):(t.__creating=!1,e.errCallback&&e.errCallback(r)),this.__emitterService.emit(`${this._config.name}_create`,t),this.__emitterService.emit(`${this._config.name}_list`,t),this.__emitterService.emit(`${this._config.name}_changed`,t)},error:r=>{t.__creating=!1,e.errCallback&&e.errCallback(r)}}),i}fetch(t={},e={}){if(!this.__networkService.isOnline())return new v(r=>{this._onOnline.push(()=>{this.fetch(t,e).subscribe(r)})});let i=this.__httpService.post(`${this._url}/fetch${e.name||""}`,t);return i.subscribe({next:r=>{r?(this.addDoc(r),this._filterDocuments(),e.callback&&e.callback(r),this.__emitterService.emit(`${this._config.name}_changed`,r)):e.errCallback&&e.errCallback(r)},error:r=>{e.errCallback&&e.errCallback(r)}}),i}updateAfterWhile(t,e={}){return new v(i=>{this.__coreService.afterWhile(this._id(t),()=>{this.update(t,e).subscribe({next:r=>{i.next(r)},error:r=>{i.error(r)},complete:()=>{i.complete()}})})})}update(t,e={}){if(this._updateModified(t,"up"+(e.name||""),e),!this.__networkService.isOnline())return new v(r=>{this._onOnline.push(()=>{this.update(t,e).subscribe(r)})});let i=this.__httpService.post(`${this._url}/update${e.name||""}`,t);return i.subscribe({next:r=>{if(r){this._removeModified(t,"up"+(e.name||""));let s=this.doc(t._id);this.__coreService.copy(r,s),this.__coreService.copy(r,t),this._syncSignalForDoc(s),e.callback&&e.callback(t)}else e.errCallback&&e.errCallback(r);this.__emitterService.emit(`${this._config.name}_update`,t),this.__emitterService.emit(`${this._config.name}_changed`,t)},error:r=>{e.errCallback&&e.errCallback(r)}}),i}unique(t,e={}){if(this._updateModified(t,"un"+(e.name||""),e),!this.__networkService.isOnline())return new v(r=>{this._onOnline.push(()=>{this.unique(t,e).subscribe(r)})});let i=this.__httpService.post(`${this._url}/unique${e.name||""}`,t);return i.subscribe({next:r=>{r?(this._removeModified(t,"un"+(e.name||"")),t[e.name]=r,this._syncSignalForDoc(t),e.callback&&e.callback(t)):e.errCallback&&e.errCallback(r),this.__emitterService.emit(`${this._config.name}_unique`,t),this.__emitterService.emit(`${this._config.name}_changed`,t)},error:r=>{e.errCallback&&e.errCallback(r)}}),i}delete(t,e={}){if(t.__deleted=!0,t.__options||={},t.__options.delete=e,this.addDoc(t),this._filterDocuments(),!this.__networkService.isOnline())return new v(r=>{this._onOnline.push(()=>{this.delete(t,e).subscribe(r)})});let i=this.__httpService.post(`${this._url}/delete${e.name||""}`,t);return i.subscribe({next:r=>{if(r){let s=this._docs.findIndex(o=>this._id(o)===this._id(t));s!==-1&&this._docs.splice(s,1),this.setDocs(),this._syncSignalForDoc(m(u({},t),{__deleted:!0})),this._filterDocuments(),e.callback&&e.callback(t)}else e.errCallback&&e.errCallback(r);this.__emitterService.emit(`${this._config.name}_delete`,t),this.__emitterService.emit(`${this._config.name}_changed`,t)},error:r=>{e.errCallback&&e.errCallback(r)}}),i}filteredDocuments(t,e={}){let i=()=>{if(Array.isArray(t)){let r=this._docs.filter(s=>!s.__deleted).filter(e.valid??(()=>!0));t.length=0,typeof e.sort=="function"&&(r=r.sort(e.sort)),t.push(...r)}else{let r=t;for(let s in r)for(let o=r[s].length-1;o>=0;o--){let l=typeof e.field=="function"?e.field(r[s][o]):e.field||"author",c=r[s][o];this._docs.find(a=>Array.isArray(a[l])?a[l].includes(c[this._id(a)]):a[l]===c[this._id(a)])||r[s].splice(o,1)}for(let s of this._docs){if(s.__deleted)continue;let o=typeof e.field=="function"?e.field(s):e.field||"author";(typeof e.valid=="function"?!e.valid(s):Array.isArray(s[o])?!s[o]?.length:!s[o])||(typeof e.field=="function"?e.field(s)&&!r[s[o]].find(l=>l._id===s._id)&&r[s[o]].push(s):Array.isArray(s[o])?s[o].forEach(l=>{r[l]=r[l]||[],r[l].find(c=>c._id===s._id)||r[l].push(s)}):(r[s[o]]=r[s[o]]||[],r[s[o]].find(l=>l._id===s._id)||r[s[o]].push(s)))}if(typeof e.sort=="function")for(let s in r)r[s].sort(e.sort)}e.filtered?.(t)};return this._filteredDocumentsCallbacks.push(i),i}_id(t){return t[this._config._id||"_id"]?.toString()}_filterDocuments(){for(let t of this._filteredDocumentsCallbacks)t();this.__emitterService.emit(`${this._config.name}_filtered`)}_updateModified(t,e,i){t.__modified||=[],t.__options||={},t.__options[e]=i,t.__modified.find(r=>r===e)||(t.__modified.push(e),this.addDoc(t))}_removeModified(t,e){t.__modified||=[],t.__modified.find(i=>i===e)&&(t.__modified.splice(t.__modified.findIndex(i=>i===e),1),this.addDoc(t))}_localId(){return+(Date.now()+""+this._randomCount++)}_syncSignalForDoc(t){let e=this._id(t);if(!e)return;let i=this._signals[e];i&&i.set(t)}},Dn=(()=>{class n{constructor(){this._appRef=d(ge),this._injector=d(We),this._providedIn={}}appendById(e,i={},r){let s=te(e,{environmentInjector:this._injector});this.projectComponentInputs(s,i),this._appRef.attachView(s.hostView);let o=s.hostView.rootNodes[0],l=document.getElementById(r);return l&&typeof l.appendChild=="function"&&l.appendChild(o),{nativeElement:o,componentRef:s,remove:()=>this.removeComponent(s)}}appendComponent(e,i={},r=document.body){if(i.providedIn){if(this._providedIn[i.providedIn])return;this._providedIn[i.providedIn]=!0}let s=te(e,{environmentInjector:this._injector});this.projectComponentInputs(s,i),this._appRef.attachView(s.hostView);let o=s.hostView.rootNodes[0];return r&&typeof r.appendChild=="function"&&r.appendChild(o),{nativeElement:o,componentRef:s,remove:()=>this.removeComponent(s,i.providedIn)}}getComponentRef(e,i={}){let r=te(e,{environmentInjector:this._injector});return this.projectComponentInputs(r,i),this._appRef.attachView(r.hostView),r}projectComponentInputs(e,i){if(i){let r=Object.getOwnPropertyNames(i);for(let s of r)e.instance[s]=i[s]}return e}removeComponent(e,i){this._appRef.detachView(e.hostView),e.destroy(),i&&delete this._providedIn[i]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bn(n=ae){return Le([{provide:O,useValue:n},it(nt())])}var Mn={roles:[],production:!0,appId:"appId",url:"https://api.webart.work",sign:{logo:"",email:"",password:""},image:{default:"https://ngx.webart.work/assets/logo.png",logo:"https://ngx.webart.work/assets/logo.png"},meta:{title:"Web Art Work",description:"An amazing solution to build web or mobile app for your business",favicon:"https://ngx.webart.work/assets/favicon.ico",image:"https://ngx.webart.work/assets/logo.png"},defaultLanguageCode:"en",languages:[{name:"Ukrainian",origin:"\u0443\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",code:"uk"},{code:"en",name:"English",origin:"English"}]};var Ot=(()=>{class n extends k{constructor(){super({name:"translatephrase",unauthorized:!0}),this.phrases=h(this.getDocs(),{}),this._phrasesByText={},this._creating={},this._syncPending=!1,this._initialized=!1,this._emitter=d(x),this.ready=new Promise(e=>{this._readyResolve=e}),this.filteredDocuments(this._phrasesByText,{field:"text",filtered:()=>this._scheduleSync()}),this.get().subscribe(()=>{this._scheduleSync(),this._initialized=!0,this._readyResolve?.()})}getByText(e){return this._phrasesByText[e]?.[0]}hasText(e){return!!this.getByText(e)}ensurePhrase(e){return p(this,null,function*(){if(e){if(!this._initialized)try{yield this.ready}catch{return}this.hasText(e)||this._creating[e]||(this._creating[e]=!0,this.create({text:e}).subscribe({error:()=>{delete this._creating[e]},complete:()=>{delete this._creating[e]}}))}})}_scheduleSync(){this._syncPending||(this._syncPending=!0,queueMicrotask(()=>{this._syncPending=!1,this.phrases.set(this.getDocs()),this._emitter.emit("translatephrase_changed")}))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Tn=(()=>{class n extends k{constructor(){super({name:"translate",unauthorized:!0,replace:e=>{e.slug=e.phrase+e.language}}),this._phraseService=d(Ot),this._emitterService=d(x),this._translates={},this._signalTranslates={},this._languageId="",this._recalcPending=!1,this._recalcInProgress=!1,this.filteredDocuments(this._translates,{field:"slug",filtered:()=>this._scheduleRecalc()}),this._emitterService.on("languageId").subscribe(e=>{this.loadTranslate(e)}),this._emitterService.on("translatephrase_changed").subscribe(()=>this._scheduleRecalc())}loadTranslate(e){this._languageId!==e&&(this._languageId=e,this.get({query:"language="+e}).subscribe(()=>{this._scheduleRecalc()}))}translate(e){return this._signalTranslates[e]||(this._signalTranslates[e]=h(this._getTranslation(e)),queueMicrotask(()=>void this._phraseService.ensurePhrase(e))),this._signalTranslates[e]}updateTranslation(e,i,r){return p(this,null,function*(){let s=yield this.getDoc(o=>o.language===r&&o.phrase===i);s?(s.text=e,s.text!==e&&this.update(s)):this.create({language:r,phrase:i,text:e})})}_scheduleRecalc(){this._recalcPending||(this._recalcPending=!0,queueMicrotask(()=>{this._recalcPending=!1,this._reTranslateNow()}))}_reTranslateNow(){if(!this._recalcInProgress){this._recalcInProgress=!0;try{for(let e of Object.keys(this._signalTranslates)){let i=this._getTranslation(e);this._signalTranslates[e]()!==i&&this._signalTranslates[e].set(i)}}finally{this._recalcInProgress=!1}}}_getTranslation(e){let i=this._phraseService.getByText(e);if(i&&this._languageId){let r=i._id+this._languageId,s=this._translates[r];if(s?.length)return s[0].text}return e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{mt as a,_t as b,at as c,L as d,Yi as e,Me as f,mi as g,Ki as h,gn as i,kt as j,Et as k,mn as l,_n as m,vn as n,yn as o,x as p,bi as q,wi as r,k as s,Dn as t,bn as u,Mn as v,Ot as w,Tn as x};
