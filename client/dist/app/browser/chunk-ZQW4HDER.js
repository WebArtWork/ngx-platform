import{F as Y,b as $e,i as Qe,j as qe,k as ze,l as We,m as Ke,n as G,p as Ue,q as X,x as Je}from"./chunk-MFYGYTBJ.js";import{$a as x,A as K,Aa as V,Ba as d,Bb as H,Ca as _,Cb as Ae,Da as ie,E as T,Hb as Re,J as p,Ja as se,K as u,Ka as S,Kb as je,Ma as w,Oa as r,R as L,S as E,Ua as Fe,Va as ce,W as Te,Wa as ne,Xa as de,Za as I,aa as l,ab as k,ba as Le,bb as R,ca as q,ea as De,fb as _e,ga as U,gb as D,hb as a,ia as J,ib as Pe,ja as Ve,ka as ke,la as re,lb as Ne,mb as Oe,ob as Be,qa as O,qb as b,ra as ee,rb as v,s as Ie,sa as te,sb as pe,ua as f,ub as F,va as g,wa as le,wb as j,xa as Ee,xb as h,ya as B,yb as ue,z as Me,za as A,zb as me}from"./chunk-3BU3K6CC.js";import{a as Ce,e as ae}from"./chunk-6MDQTQU3.js";var He=(()=>{class i extends X{constructor(){super({name:"translatephrase",unauthorized:!0}),this.phrases=L(this.getDocs()),this._phrasesByText={},this._creating={},this._syncPending=!1,this._initialized=!1,this._emitter=T(G),this.ready=new Promise(e=>{this._readyResolve=e}),this.filteredDocuments(this._phrasesByText,{field:"text",filtered:()=>this._scheduleSync()}),this.get().subscribe(()=>{this._scheduleSync(),this._initialized=!0,this._readyResolve?.()})}getByText(e){return this._phrasesByText[e]?.[0]}hasText(e){return!!this.getByText(e)}ensurePhrase(e){return ae(this,null,function*(){if(e){if(!this._initialized)try{yield this.ready}catch{return}this.hasText(e)||this._creating[e]||(this._creating[e]=!0,this.create({text:e}).subscribe({error:()=>{delete this._creating[e]},complete:()=>{delete this._creating[e]}}))}})}_scheduleSync(){this._syncPending||(this._syncPending=!0,queueMicrotask(()=>{this._syncPending=!1,this.phrases.set(this.getDocs()),this._emitter.emit("translatephrase_changed")}))}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=K({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var he=(()=>{class i extends X{constructor(){super({name:"translate",unauthorized:!0,replace:e=>{e.slug=e.phrase+e.language}}),this._phraseService=T(He),this._emitterService=T(G),this._translates={},this._signalTranslates={},this._languageId="",this._recalcPending=!1,this._recalcInProgress=!1,this.filteredDocuments(this._translates,{field:"slug",filtered:()=>this._scheduleRecalc()}),this._emitterService.on("languageId").subscribe(e=>{this.loadTranslate(e)}),this._emitterService.on("translatephrase_changed").subscribe(()=>this._scheduleRecalc())}loadTranslate(e){this._languageId!==e&&(this._languageId=e,this.get({query:"language="+e}).subscribe(()=>{this._scheduleRecalc()}))}translate(e){return this._signalTranslates[e]||(this._signalTranslates[e]=L(this._getTranslation(e)),queueMicrotask(()=>{this._phraseService.ensurePhrase(e)})),this._signalTranslates[e]}updateTranslation(e,t,n){return ae(this,null,function*(){let o=yield this.getDoc(c=>c.language===n&&c.phrase===t);o?(o.text=e,o.text!==e&&this.update(o)):this.create({language:n,phrase:t,text:e})})}_scheduleRecalc(){this._recalcPending||(this._recalcPending=!0,queueMicrotask(()=>{this._recalcPending=!1,this._reTranslateNow()}))}_reTranslateNow(){if(!this._recalcInProgress){this._recalcInProgress=!0;try{for(let e of Object.keys(this._signalTranslates)){let t=this._getTranslation(e);this._signalTranslates[e]()!==t&&this._signalTranslates[e].set(t)}}finally{this._recalcInProgress=!1}}}_getTranslation(e){let t=this._phraseService.getByText(e);if(t&&this._languageId){let n=t._id+this._languageId,o=this._translates[n];if(o?.length)return o[0].text}return e}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=K({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Z=(()=>{class i{constructor(){this._translateService=T(he)}transform(e){return this._translateService.translate(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=Ve({name:"translate",type:i,pure:!0})}}return i})();var P={type:"text",name:"name",label:"",placeholder:"",items:[],disabled:!1,focused:!1,clearable:!1,wClass:"",autocomplete:void 0,error:null};var et=["inputEl"];function tt(i,s){if(i&1&&(d(0,"span",2),x(1),b(2,"translate"),_()),i&2){r(2);let e=a(3);l(),k(v(2,1,e)())}}function it(i,s){if(i&1){let e=S();d(0,"input",9,0),b(2,"translate"),w("keyup.enter",function(){p(e);let n=r(2);return u(n.onSubmit())})("input",function(n){p(e);let o=r(2);return u(o.onInput(n))})("blur",function(){p(e);let n=r(2);return u(n.onBlur())}),_(),ee()}if(i&2){let e=r(2),t=a(0),n=a(1),o=a(4),c=a(6),m=a(8),y=a(9);I("error",y),V("placeholder",v(2,9,m||"Enter text...")())("autocomplete",e.getAutocompleteAttr(n))("manualDisabled",o)("ngClass",c)("manualType",n==="password"?e.showPassword()?"text":"password":n||"text"),te(t,"formField")}}function nt(i,s){if(i&1){let e=S();d(0,"input",10,0),b(2,"translate"),w("keyup.enter",function(){p(e);let n=r(2);return u(n.onSubmit())})("input",function(n){p(e);let o=r(2);return u(o.onInput(n))})("blur",function(){p(e);let n=r(2);return u(n.onBlur())}),_()}if(i&2){let e=r(2),t=a(1),n=a(2),o=a(4),c=a(6),m=a(8),y=a(9);I("error",y),V("placeholder",v(2,9,m||"Enter text...")())("autocomplete",e.getAutocompleteAttr(t))("value",e.wModel()??"")("ngClass",c),O("disabled",o?"":null)("name",n)("type",t==="password"?e.showPassword()?"text":"password":t||"text")}}function ot(i,s){if(i&1){let e=S();d(0,"button",11),b(1,"translate"),w("click",function(){p(e);let n=r(2);return u(n.onClear())}),x(2," close "),_()}i&2&&O("aria-label",v(1,1,"Clear")())}function at(i,s){if(i&1){let e=S();d(0,"button",12),b(1,"translate"),w("click",function(){p(e);let n=r(2);return u(n.showPassword.set(!n.showPassword()))}),x(2," visibility "),_()}if(i&2){let e=r(2);O("aria-label",v(1,1,e.showPassword()?"Hide password":"Show password"))}}function rt(i,s){if(i&1&&(d(0,"div",8),x(1),b(2,"translate"),_()),i&2){r(2);let e=a(9);l(),k(v(2,1,e)())}}function lt(i,s){if(i&1&&(d(0,"label",1),f(1,tt,3,3,"span",2),d(2,"div",3),f(3,it,3,11,"input",4)(4,nt,3,11,"input",5),f(5,ot,3,3,"button",6),f(6,at,3,3,"button",7),_(),f(7,rt,3,3,"div",8),_()),i&2){r();let e=a(0),t=a(1),n=a(3),o=a(7),c=a(9);l(),g(n?1:-1),l(),I("winput__control--two-icons",o&&t==="password"),l(),g(e?3:4),l(2),g(o?5:-1),l(),g(t==="password"?6:-1),l(),g(c?7:-1)}}function st(i,s){if(i&1&&(d(0,"span",2),x(1),b(2,"translate"),_()),i&2){r(2);let e=a(3);l(),k(v(2,1,e)())}}function ct(i,s){if(i&1){let e=S();d(0,"textarea",15,0),b(2,"translate"),w("input",function(n){p(e);let o=r(2);return u(o.onInput(n))})("blur",function(){p(e);let n=r(2);return u(n.onBlur())}),_(),ee()}if(i&2){r(2);let e=a(0),t=a(4),n=a(6),o=a(8),c=a(9);I("error",c),V("placeholder",v(2,7,o||"Enter text...")())("manualDisabled",t)("ngClass",n),te(e,"formField")}}function dt(i,s){if(i&1){let e=S();d(0,"textarea",16,0),b(2,"translate"),w("input",function(n){p(e);let o=r(2);return u(o.onInput(n))})("blur",function(){p(e);let n=r(2);return u(n.onBlur())}),_()}if(i&2){let e=r(2),t=a(2),n=a(4),o=a(6),c=a(8),m=a(9);I("error",m),V("placeholder",v(2,7,c||"Enter text...")())("value",e.wModel()??"")("ngClass",o),O("disabled",n?"":null)("name",t)}}function _t(i,s){if(i&1&&(d(0,"div",8),x(1),b(2,"translate"),_()),i&2){r(2);let e=a(9);l(),k(v(2,1,e)())}}function pt(i,s){if(i&1&&(d(0,"label",1),f(1,st,3,3,"span",2),d(2,"div",3),f(3,ct,3,9,"textarea",13)(4,dt,3,9,"textarea",14),_(),f(5,_t,3,3,"div",8),_()),i&2){r();let e=a(0),t=a(3),n=a(9);l(),g(t?1:-1),l(2),g(e?3:4),l(2),g(n?5:-1)}}function ut(i,s){if(i&1){let e=S();d(0,"label",18)(1,"input",19,0),w("input",function(n){p(e);let o=r(3);return u(o.onInput(n))})("blur",function(){p(e);let n=r(3);return u(n.onBlur())}),_(),ee(),ie(3,"span",20),d(4,"span",21),x(5),b(6,"translate"),_()()}if(i&2){let e=s.$implicit;r(3);let t=a(0),n=a(4),o=a(6),c=a(9);I("disabled",n),l(),I("error",c),V("manualDisabled",n)("ngClass",o)("value",e),te(t,"formField"),l(4),k(v(6,10,e)())}}function mt(i,s){if(i&1&&B(0,ut,7,12,"label",17,le),i&2){r(2);let e=a(5);A(e)}}function ht(i,s){if(i&1){let e=S();d(0,"label",18)(1,"input",22,0),w("input",function(n){let o=p(e).$implicit,c=r(3);return u(c.onInput(n,o))})("blur",function(){p(e);let n=r(3);return u(n.onBlur())}),_(),ie(3,"span",20),d(4,"span",21),x(5),b(6,"translate"),_()()}if(i&2){let e=s.$implicit,t=r(3),n=a(2),o=a(4),c=a(6),m=a(9);I("disabled",o),l(),I("error",m),V("checked",t.wModel()===e)("disabled",o)("ngClass",c)("value",e)("name",n),l(4),k(v(6,10,e)())}}function ft(i,s){if(i&1&&B(0,ht,7,12,"label",17,le),i&2){r(2);let e=a(5);A(e)}}function gt(i,s){if(i&1&&f(0,mt,2,0)(1,ft,2,0),i&2){r();let e=a(0);g(e?0:1)}}function Ct(i,s){if(i&1){let e=S();d(0,"label",18)(1,"input",23,0),w("input",function(n){let o=p(e).$implicit,c=r(3);return u(c.onInput(n,o))})("blur",function(){p(e);let n=r(3);return u(n.onBlur())}),_(),ie(3,"span",24),d(4,"span",21),x(5),b(6,"translate"),_()()}if(i&2){let e=s.$implicit,t=s.$index,n=r(3),o=a(2),c=a(4),m=a(6),y=a(9);I("disabled",c),l(),I("error",y),V("checked",n.isItemChecked(e))("name",o+t)("disabled",c)("ngClass",m)("value",e),l(4),k(v(6,10,e)())}}function xt(i,s){if(i&1&&B(0,Ct,7,12,"label",17,le),i&2){r(2);let e=a(5);A(e)}}function bt(i,s){if(i&1){let e=S();d(0,"input",27,0),w("input",function(n){p(e);let o=r(3);return u(o.onInput(n))})("blur",function(){p(e);let n=r(3);return u(n.onBlur())}),_(),ee()}if(i&2){r(3);let e=a(0),t=a(4),n=a(6),o=a(9);I("error",o),V("manualDisabled",t)("ngClass",n),te(e,"formField")}}function vt(i,s){if(i&1){let e=S();d(0,"input",28,0),w("input",function(n){p(e);let o=r(3);return u(o.onInput(n))})("blur",function(){p(e);let n=r(3);return u(n.onBlur())}),_()}if(i&2){let e=r(3),t=a(2),n=a(4),o=a(6),c=a(9);I("error",c),V("disabled",n)("checked",!!e.wModel())("ngClass",o)("name",t)}}function wt(i,s){if(i&1&&(d(0,"span",21),x(1),b(2,"translate"),_()),i&2){r(3);let e=a(3);l(),k(v(2,1,e)())}}function yt(i,s){if(i&1&&(d(0,"label",18),f(1,bt,2,6,"input",25)(2,vt,2,6,"input",26),ie(3,"span",24),f(4,wt,3,3,"span",21),_()),i&2){r(2);let e=a(0),t=a(3),n=a(4);I("disabled",n),l(),g(e?1:2),l(3),g(t?4:-1)}}function St(i,s){if(i&1&&f(0,xt,2,0)(1,yt,5,4,"label",17),i&2){r();let e=a(5);g(e.length?0:1)}}var Ge=(()=>{class i{constructor(){this.formField=h(null),this.wModel=H(null,{alias:"wModel"}),this.type=h(P.type),this.name=h(P.name),this.label=h(P.label),this.placeholder=h(P.placeholder),this.items=h(P.items),this.disabled=h(P.disabled),this.focused=h(P.focused),this.clearable=h(P.clearable),this.wClass=h(P.wClass),this.autocomplete=h(P.autocomplete),this.error=h(P.error),this.wChange=j(),this.wSubmit=j(),this.wBlur=j(),this.showPassword=L(!1),this._inputEl=ue("inputEl"),this.fieldState=F(()=>{let e=this.formField();return e?e():null}),this.fieldError=F(()=>{let e=this.error();if(e)return e;let t=this.fieldState();if(!t)return null;let n=typeof t.touched=="function"?t.touched():!1,o=typeof t.dirty=="function"?t.dirty():!1;if(!((typeof t.invalid=="function"?t.invalid():!1)&&(n||o)))return null;let m=typeof t.errors=="function"?t.errors():null;if(!m)return null;let y=Array.isArray(m)?m:Object.values(m);if(!y.length)return null;let C=y[0];return C?typeof C=="string"?C:C.message&&typeof C.message=="string"?C.message:null:null})}ngAfterViewInit(){this.focused()&&this._inputEl()&&this._inputEl().nativeElement.focus()}onInput(e,t){let n=e.target,o=n.type,c=null;if(o==="checkbox"&&n instanceof HTMLInputElement)if(t!=null&&this.items().length&&!this.formField()){let m=this.wModel(),y=Array.isArray(m)?[...m]:[],C=y.indexOf(t);n.checked&&C===-1?y.push(t):!n.checked&&C!==-1&&y.splice(C,1),c=y}else c=n.checked;else o==="radio"?c=t??n.value:c=n.value;this.formField()||this.wModel.set(c),this.wChange.emit(c)}onBlur(){this.wBlur.emit()}onSubmit(){this.wSubmit.emit()}onClear(){this.formField()||this.wModel.set(null),this.wChange.emit(null),this.onSubmit(),this._inputEl()&&this._inputEl().nativeElement.focus()}getAutocompleteAttr(e){let t=this.autocomplete();return t??(e==="password"?"current-password":null)}isItemChecked(e){let t=this.wModel();return Array.isArray(t)?t.includes(e):!!t}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=U({type:i,selectors:[["winput"]],viewQuery:function(t,n){t&1&&ce(n._inputEl,et,5),t&2&&ne()},inputs:{formField:[1,"formField"],wModel:[1,"wModel"],type:[1,"type"],name:[1,"name"],label:[1,"label"],placeholder:[1,"placeholder"],items:[1,"items"],disabled:[1,"disabled"],focused:[1,"focused"],clearable:[1,"clearable"],wClass:[1,"wClass"],autocomplete:[1,"autocomplete"],error:[1,"error"]},outputs:{wModel:"wModelChange",wChange:"wChange",wSubmit:"wSubmit",wBlur:"wBlur"},decls:14,vars:14,consts:[["inputEl",""],[1,"winput"],[1,"winput__label"],[1,"winput__control"],[1,"winput__field",3,"placeholder","autocomplete","manualDisabled","error","ngClass","formField","manualType"],[1,"winput__field",3,"placeholder","autocomplete","value","error","ngClass"],["type","button",1,"winput__icon-btn","winput__clear","material-icons"],["type","button",1,"winput__icon-btn","winput__eye","material-icons"],[1,"winput__error"],[1,"winput__field",3,"keyup.enter","input","blur","placeholder","autocomplete","manualDisabled","ngClass","formField","manualType"],[1,"winput__field",3,"keyup.enter","input","blur","placeholder","autocomplete","value","ngClass"],["type","button",1,"winput__icon-btn","winput__clear","material-icons",3,"click"],["type","button",1,"winput__icon-btn","winput__eye","material-icons",3,"click"],[1,"winput__field","winput__field--textarea",3,"placeholder","manualDisabled","error","formField","ngClass"],[1,"winput__field","winput__field--textarea",3,"placeholder","value","error","ngClass"],[1,"winput__field","winput__field--textarea",3,"input","blur","placeholder","manualDisabled","formField","ngClass"],[1,"winput__field","winput__field--textarea",3,"input","blur","placeholder","value","ngClass"],[1,"winput__choice",3,"disabled"],[1,"winput__choice"],["type","radio",1,"winput__native",3,"input","blur","manualDisabled","ngClass","formField","value"],[1,"winput__choice-mark","winput__choice-mark--radio"],[1,"winput__choice-text"],["type","radio",1,"winput__native",3,"input","blur","checked","disabled","ngClass","value","name"],["type","checkbox",1,"winput__native",3,"input","blur","checked","name","disabled","ngClass","value"],[1,"winput__choice-mark"],["type","checkbox",1,"winput__native",3,"manualDisabled","error","formField","ngClass"],["type","checkbox",1,"winput__native",3,"disabled","error","checked","ngClass","name"],["type","checkbox",1,"winput__native",3,"input","blur","manualDisabled","formField","ngClass"],["type","checkbox",1,"winput__native",3,"input","blur","disabled","checked","ngClass","name"]],template:function(t,n){if(t&1&&(_e(0)(1)(2)(3)(4)(5)(6)(7)(8)(9),f(10,lt,8,7,"label",1),f(11,pt,6,3,"label",1),f(12,gt,2,1),f(13,St,2,1)),t&2){D(n.formField()),l();let o=D(n.type());l(),D(n.name()),l(),D(n.label()),l(),D(n.disabled()),l(),D(n.items()),l(),D(n.wClass()),l(),D(n.clearable()),l(),D(n.placeholder()),l(),D(n.fieldError()),l(),g(o!=="radio"&&o!=="checkbox"&&o!=="textarea"?10:-1),l(),g(o==="textarea"?11:-1),l(),g(o==="radio"?12:-1),l(),g(o==="checkbox"?13:-1)}},dependencies:[Je,Re,Ke,We,Z],styles:[".winput[_ngcontent-%COMP%]{display:grid;gap:6px}.winput__label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--c-text-primary)}.winput__control[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--sp-2);border:1px solid var(--c-border);border-radius:var(--radius);background:var(--c-bg-secondary);padding:10px 12px;box-shadow:var(--shadow-sm);transition:border-color var(--motion-fast) var(--easing),box-shadow var(--motion-fast) var(--easing),background-color var(--motion-fast) var(--easing)}.winput__control[_ngcontent-%COMP%]:focus-within{box-shadow:var(--focus-ring);border-color:color-mix(in srgb,var(--c-primary) 40%,var(--c-border))}.winput__control._disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.winput__control._textarea[_ngcontent-%COMP%]{align-items:stretch}.winput__field[_ngcontent-%COMP%]{flex:1 1 auto;min-width:0;border:0;outline:0;background:transparent;color:var(--c-text-primary);font:inherit}.winput__field[_ngcontent-%COMP%]::placeholder{color:var(--c-placeholder)}.winput__hint[_ngcontent-%COMP%]{font-size:.8rem;color:var(--c-text-muted)}.winput__error[_ngcontent-%COMP%]{font-size:.8rem;color:var(--c-secondary)}"],changeDetection:0})}}return i})();var Xe=(()=>{class i{constructor(){this.translate=h(""),this._el=T(Te),this._translateService=T(he),this._original=L(""),this._lastKey="",this._lastSignal=L(""),Le(()=>{let e=(this._el.nativeElement.textContent??"").trim();this._original.set(e)}),E(()=>{let e=this._original().trim(),n=((this.translate()||"").trim()||e).trim();n&&(n!==this._lastKey&&(this._lastKey=n,this._lastSignal=this._translateService.translate(n)),this._el.nativeElement.textContent=this._lastSignal())})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=J({type:i,selectors:[["","translate",""]],inputs:{translate:[1,"translate"]}})}}return i})();var Li={formId:"phrase",title:"Phrase",components:[{name:"Input",key:"text",props:{label:"Origin text",placeholder:"Enter origin text...",type:"textarea",disabled:!0}},{name:"Input",key:"translation",focused:!0,props:{label:"Translation",placeholder:"Enter translation text...",type:"textarea"}}]};var fe=(()=>{class i extends X{constructor(){super({name:"translatelanguage",unauthorized:!0}),this.language=L(void 0),this.languages=L(this.getDocs()),this._storeService=T(Ue),this._emitterService=T(G),this._languageId=L(null),this.loaded.subscribe({next:()=>{this.languages.set(this.getDocs()),this._loadLocal()}}),this.get().subscribe(()=>{this.languages.set(this.getDocs()),this._loadLocal()}),this._emitterService.on("translatelanguage_changed").subscribe(()=>{this.languages.set(this.getDocs())}),E(()=>{let e=this._languageId(),t=this.languages();if(!e||!t.length){this.language.set(void 0);return}let n=t.find(o=>o._id===e);n&&(this.language.set(n),this._storeService.set("languageId",e),this._emitterService.emit("languageId",e))})}setLanguageId(e=null){this._languageId.set(e)}setLanguage(e){e?._id&&this._languageId.set(e._id)}nextLanguage(){let e=this.getDocs();if(e.length>1){let t=this.language(),n=t?e.findIndex(o=>o._id===t._id):0;this.setLanguage(n===e.length-1?e[0]:e[n+1])}else this._languageId.set(null)}_loadLocal(){this._storeService.get("languageId",e=>{e&&this._languageId.set(e)})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=K({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var xe={formId:"language",components:[{name:"Input",key:"name",focused:!0,props:{placeholder:"Enter language name ...",label:"Language name"}}]};var N={disabled:!1,clearable:!1,placeholder:"Select an option...",multiple:!1,bindLabel:"name",bindValue:"_id",label:"",searchable:!1,searchableBy:"name",items:[],buttons:[]};var be=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=J({type:i,selectors:[["","wselectView",""]]})}}return i})(),ve=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=J({type:i,selectors:[["","wselectItem",""]]})}}return i})(),we=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=J({type:i,selectors:[["","wselectSearch",""]]})}}return i})();var Mt=["popupListEl"],Tt=()=>[],Lt=(i,s)=>({item:i,index:s}),Dt=(i,s)=>s.icon||s.text,Vt=(i,s)=>s().id;function kt(i,s){if(i&1&&(d(0,"div",5),x(1),b(2,"translate"),_()),i&2){r();let e=a(1);l(),R(" ",v(2,1,e)()," ")}}function Et(i,s){if(i&1&&(d(0,"span",15),x(1),b(2,"translate"),_()),i&2){r(3);let e=a(0);l(),k(v(2,1,e)())}}function Ft(i,s){i&1&&(d(0,"span"),x(1,",\xA0"),_())}function Pt(i,s){if(i&1){let e=S();d(0,"span",16),f(1,Ft,2,0,"span"),d(2,"span",17)(3,"span"),x(4),b(5,"translate"),_(),d(6,"button",18),w("click",function(n){p(e);let o=r().$index;return r(3).removeItem(o),u(n.stopPropagation())}),x(7," close "),_()()()}if(i&2){let e=r(),t=e.$implicit,n=e.$index,o=r(3);l(),g(n?1:-1),l(3),k(v(5,2,o.allItem[t])())}}function Nt(i,s){if(i&1&&f(0,Pt,8,4,"span",16),i&2){let e=s.$implicit,t=r(3);g(t.allItem[e]?0:-1)}}function Ot(i,s){if(i&1&&(d(0,"div",14),f(1,Et,3,3,"span",15),B(2,Nt,1,1,null,null,Ee),_()),i&2){r(2);let e=a(3);l(),g(e.length?-1:1),l(),A(e)}}function Bt(i,s){if(i&1&&(x(0),b(1,"translate")),i&2){let e=r(3),t=a(4);R(" ",v(1,1,e.allItem[t])()," ")}}function At(i,s){if(i&1&&(d(0,"span",15),x(1),b(2,"translate"),_()),i&2){r(3);let e=a(0);l(),k(v(2,1,e)())}}function Rt(i,s){if(i&1&&(d(0,"div",14),f(1,Bt,2,3)(2,At,3,3,"span",15),_()),i&2){r(2);let e=a(4);l(),g(e?1:2)}}function jt(i,s){if(i&1&&(d(0,"div",13),f(1,Ot,4,1,"div",14)(2,Rt,3,1,"div",14),_()),i&2){r();let e=a(2);l(),g(e?1:2)}}function $t(i,s){if(i&1){let e=S();d(0,"button",19),w("click",function(n){return p(e),r().clear(),u(n.stopPropagation())}),x(1," close "),_()}}function Qt(i,s){if(i&1){let e=S();d(0,"button",22),w("click",function(n){return p(e),r().$implicit.click(),u(n.stopPropagation())}),x(1),_()}if(i&2){let e=r().$implicit;I("_disabled-btn",e.disabled),l(),R(" ",e.icon," ")}}function qt(i,s){if(i&1){let e=S();d(0,"button",23),w("click",function(n){return p(e),r().$implicit.click(),u(n.stopPropagation())}),x(1),_()}if(i&2){let e=r().$implicit;I("_disabled-btn",e.disabled),l(),R(" ",e.text," ")}}function zt(i,s){if(i&1&&f(0,Qt,2,3,"button",20)(1,qt,2,3,"button",21),i&2){let e=s.$implicit;g(e.icon?0:e.text?1:-1)}}function Wt(i,s){if(i&1){let e=S();d(0,"winput",29),b(1,"translate"),w("wChange",function(n){p(e);let o=r(3);return u(o.search.set((n??"")+""))}),_()}i&2&&V("placeholder",Pe(v(1,3,"Enter search text...")()))("focused",!0)}function Kt(i,s){if(i&1&&(d(0,"div",25),se(1,9),re(2,Wt,2,5,"ng-template",null,3,pe),_()),i&2){let e=de(3),t=r(2);l(),V("ngTemplateOutlet",t.searchTpl()||e)}}function Ut(i,s){if(i&1&&se(0,27),i&2){let e=s.$implicit,t=s.$index;r();let n=de(8),o=r();V("ngTemplateOutlet",o.itemTpl()||n)("ngTemplateOutletContext",Be(2,Lt,e,t))}}function Jt(i,s){i&1&&(d(0,"div",28),x(1," Nothing was found "),_())}function Ht(i,s){if(i&1&&(x(0),b(1,"translate")),i&2){let e=r().item,t=r(2);R(" ",v(1,1,e()[t.bindLabel()])()," ")}}function Gt(i,s){i&1&&(x(0),b(1,"translate")),i&2&&R(" ",v(1,1,"Unknown item")()," ")}function Xt(i,s){if(i&1){let e=S();d(0,"button",30),w("click",function(){let n=p(e).item,o=r(2);return u(o.selectOption(n()))}),d(1,"span",31),x(2),_(),d(3,"div",32)(4,"div",33),f(5,Ht,2,3)(6,Gt,2,3),_()()()}if(i&2){let e=s.item,t=s.index,n=r(2),o=a(2),c=a(3),m=a(4),y=e().id,C=o?c.includes(y):m===y,M=n.activeIndex()===t;I("_selected",C)("_active",M),O("aria-selected",C?"true":"false")("data-index",t),l(2),R(" ",C?"check":""," "),l(3),g(e()[n.bindLabel()]?5:6)}}function Yt(i,s){if(i&1){let e=S();d(0,"div",24),w("click",function(n){return p(e),u(n.stopPropagation())}),f(1,Kt,4,1,"div",25),d(2,"div",26,1),B(4,Ut,1,5,"ng-container",27,Vt),f(6,Jt,2,0,"div",28),_(),re(7,Xt,7,8,"ng-template",null,2,pe),_()}if(i&2){r();let e=a(2),t=a(5),n=a(6);I("_search",t),O("aria-multiselectable",e?"true":null),l(),g(t?1:-1),l(3),A(n),l(2),g(n!=null&&n.length?-1:6)}}var oe=(()=>{class i{constructor(){this.disabled=h(N.disabled),this.clearable=h(N.clearable),this.placeholder=h(N.placeholder),this.multiple=h(N.multiple),this.bindLabel=h(N.bindLabel),this.bindValue=h(N.bindValue),this.label=h(N.label),this.searchable=h(N.searchable),this.searchableBy=h(N.searchableBy),this.items=h(N.items),this.buttons=h(N.buttons),this.formField=h(null,{alias:"formField"}),this.field=h(null,{alias:"field"}),this._resolvedField=F(()=>this.formField()??this.field()),this.viewTpl=me(be,{read:q}),this.itemTpl=me(ve,{read:q}),this.searchTpl=me(we,{read:q}),this.wModel=H(null,{alias:"wModel"}),this.wChange=j(),this._core=T(Qe),this.allItem={},this.allItems=L(this._core.toSignalsArray([])),this.showOptions=L(!1),this.search=L(""),this.activeIndex=L(-1),this._popupListEl=ue("popupListEl"),this.isMulti=F(()=>this.multiple()),this._disabledCva=!1,this.isDisabled=F(()=>this.disabled()||this._disabledCva),this.selectedIds=F(()=>{let e=this.wModel();return this.isMulti()?Array.isArray(e)?e:[]:e==null?[]:[e]}),this.selectedId=F(()=>this.selectedIds()[0]??null),this.filteredItems=F(()=>{let e=(this.search()??"").toString().trim().toLowerCase(),t=this.allItems();return e?t.filter(n=>{let o=n();return(o.__search??o.name??"").toString().toLowerCase().includes(e)}):t}),this._onChange=()=>{},this._onTouched=()=>{},E(()=>{let e=this._resolvedField();if(e)try{let n=e()?.value?.();this._equal(this.wModel(),n)||this.wModel.set(n)}catch{}}),E(()=>{let e=this._resolvedField();if(e)try{let t=e();t?.value?.set&&t.value.set(this.wModel())}catch{}}),E(()=>{let e=this.items(),t=this.bindLabel(),n=this.bindValue(),o=this.searchableBy();for(let C of Object.keys(this.allItem))delete this.allItem[C];let c=e.map(C=>{let M=C;if(typeof C=="function")try{M=C()}catch{M=C}let z,W;if(typeof M=="string"||typeof M=="number"||typeof M=="boolean")z=M,W=String(M);else if(M&&typeof M=="object"){let Q=M;z=Q[n]??Q._id,W=Q[t]??Q.name??Q.title??String(z)}else z=String(M),W=String(M);let ye=W;if(M&&typeof M=="object"&&o){let Q=o.split(/\s+/).filter(Boolean),ge=[];for(let Ze of Q){let Se=M[Ze];Se!=null&&ge.push(String(Se))}ge.length&&(ye=ge.join(" "))}let Ye={id:z,name:W,__search:ye};return this.allItem[z]=W,Ye});this.allItems.set(this._core.toSignalsArray(c));let m=new Set(this.allItems().map(C=>C().id)),y=this.wModel();if(this.isMulti()){let C=(Array.isArray(y)?y:[]).filter(M=>m.has(M));JSON.stringify(C)!==JSON.stringify(y)&&this.wModel.set(C)}else(!y||this.allItems().length&&!m.has(y))&&this.wModel.set(null)}),E(()=>{let e=this.wModel();this._onChange(e),this.wChange.emit(e)}),E(()=>{if(!this.showOptions())return;let e=this.filteredItems().length;if(!e){this.activeIndex.set(-1);return}let t=this.activeIndex();(t<0||t>=e)&&(this.activeIndex.set(0),queueMicrotask(()=>this._scrollActiveIntoView()))})}toggleOptions(e=!this.showOptions()){this.isDisabled()||(this.showOptions.set(e),e?(this._primeActiveIndex(),queueMicrotask(()=>this._scrollActiveIntoView())):this.activeIndex.set(-1))}selectOption(e){if(this.isMulti()){let t=new Set(this.selectedIds());t.has(e.id)?t.delete(e.id):t.add(e.id),this.wModel.set([...t])}else this.wModel.set(e.id),this.showOptions.set(!1),this.activeIndex.set(-1);this._onTouched()}selectOptionAt(e){let t=this.filteredItems();e<0||e>=t.length||this.selectOption(t[e]())}removeItem(e){if(!this.isMulti())return;let t=[...this.selectedIds()];t.splice(e,1),this.wModel.set(t)}clear(){this.wModel.set(this.isMulti()?[]:null)}onKeydown(e){if(this.isDisabled())return;let t=e.key;if(!this.showOptions()){(t==="ArrowDown"||t==="ArrowUp"||t==="Enter"||t===" ")&&(e.preventDefault(),this.toggleOptions(!0));return}let n=this.filteredItems().length;switch(t){case"Escape":{e.preventDefault(),this.toggleOptions(!1);return}case"Tab":{this.toggleOptions(!1);return}case"ArrowDown":{if(e.preventDefault(),!n)return;let o=Math.min(this.activeIndex()<0?0:this.activeIndex()+1,n-1);this.activeIndex.set(o),this._scrollActiveIntoView();return}case"ArrowUp":{if(e.preventDefault(),!n)return;let o=Math.max(this.activeIndex()<0?n-1:this.activeIndex()-1,0);this.activeIndex.set(o),this._scrollActiveIntoView();return}case"Home":{if(e.preventDefault(),!n)return;this.activeIndex.set(0),this._scrollActiveIntoView();return}case"End":{if(e.preventDefault(),!n)return;this.activeIndex.set(n-1),this._scrollActiveIntoView();return}case"Enter":case" ":{e.preventDefault();let o=this.activeIndex();o>=0&&this.selectOptionAt(o);return}}}_primeActiveIndex(){let e=this.filteredItems();if(!e.length){this.activeIndex.set(-1);return}let t=this.selectedId();if(!this.isMulti()&&t!=null){let n=e.findIndex(o=>o().id===t);this.activeIndex.set(n>=0?n:0);return}if(this.isMulti()&&this.selectedIds().length){let n=new Set(this.selectedIds()),o=e.findIndex(c=>n.has(c().id));this.activeIndex.set(o>=0?o:0);return}this.activeIndex.set(0)}_scrollActiveIntoView(){let e=this.activeIndex();if(e<0)return;let t=this._popupListEl()?.nativeElement;if(!t)return;t.querySelector(`[data-index="${e}"]`)?.scrollIntoView({block:"nearest"})}writeValue(e){this._equal(this.wModel(),e)||this.wModel.set(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._disabledCva=e}_equal(e,t){return Array.isArray(e)||Array.isArray(t)?JSON.stringify(e)===JSON.stringify(t):e===t}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=U({type:i,selectors:[["wselect"]],contentQueries:function(t,n,o){t&1&&Fe(o,n.viewTpl,be,5,q)(o,n.itemTpl,ve,5,q)(o,n.searchTpl,we,5,q),t&2&&ne(3)},viewQuery:function(t,n){t&1&&ce(n._popupListEl,Mt,5),t&2&&ne()},inputs:{disabled:[1,"disabled"],clearable:[1,"clearable"],placeholder:[1,"placeholder"],multiple:[1,"multiple"],bindLabel:[1,"bindLabel"],bindValue:[1,"bindValue"],label:[1,"label"],searchable:[1,"searchable"],searchableBy:[1,"searchableBy"],items:[1,"items"],buttons:[1,"buttons"],formField:[1,"formField"],field:[1,"field"],wModel:[1,"wModel"]},outputs:{wModel:"wModelChange",wChange:"wChange"},features:[Ne([{provide:$e,useExisting:Me(()=>i),multi:!0}])],decls:22,vars:21,consts:[["defaultView",""],["popupListEl",""],["defaultItem",""],["defaultSearch",""],[1,"wselect","w-full",3,"clickOutside","keydown"],[1,"wselect__label","mb-[var(--sp-2)]","text-[14px]","font-medium","text-[var(--c-text-primary)]"],["role","combobox","tabindex","0",1,"wselect__body","relative","flex","items-center","w-full","min-h-[48px]","h-[48px]","border","border-[var(--c-border)]","rounded-[var(--b-radius)]","bg-transparent","transition","px-[var(--sp-3)]","gap-[var(--sp-2)]"],[1,"wselect__header","flex","items-center","w-full","min-w-0","gap-[var(--sp-2)]",3,"click"],[1,"material-icons","text-[20px]","text-[var(--c-text-muted)]","select-none"],[3,"ngTemplateOutlet"],["type","button","aria-label","Clear",1,"wselect__icon-btn","material-icons","inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-[20px]","text-[var(--c-text-muted)]","hover:bg-black/5"],["type","button","aria-label","Toggle options",1,"wselect__icon-btn","material-icons","inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-[20px]","text-[var(--c-text-muted)]","transition","hover:bg-black/5",3,"click"],["role","listbox",1,"wselect__popup","absolute","left-0","top-[calc(100%+var(--sp-2))]","z-10","w-full","bg-[var(--c-bg-secondary)]","border","border-[var(--c-border)]","rounded-[var(--b-radius-card)]","shadow-[0_0_4px_var(--c-border)]","overflow-hidden",3,"_search"],[1,"wselect__text","flex-1","min-w-0"],[1,"text-overflow","truncate","text-[var(--c-text-primary)]"],[1,"opacity-70"],[1,"inline-flex","items-center","align-middle"],[1,"inline-flex","items-center","gap-1"],["type","button","aria-label","Remove",1,"material-icons","text-[18px]","leading-none","inline-flex","items-center","justify-center","rounded-full","p-1","hover:bg-black/5",3,"click"],["type","button","aria-label","Clear",1,"wselect__icon-btn","material-icons","inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-[20px]","text-[var(--c-text-muted)]","hover:bg-black/5",3,"click"],["type","button","aria-label","Action",1,"wselect__icon-btn","material-icons","inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-[20px]","text-[var(--c-text-muted)]","hover:bg-black/5",3,"_disabled-btn"],["type","button",1,"text-[14px]","font-medium","text-[var(--c-text-secondary)]","px-2","py-1","rounded-md","hover:bg-black/5",3,"_disabled-btn"],["type","button","aria-label","Action",1,"wselect__icon-btn","material-icons","inline-flex","items-center","justify-center","w-8","h-8","rounded-full","text-[20px]","text-[var(--c-text-muted)]","hover:bg-black/5",3,"click"],["type","button",1,"text-[14px]","font-medium","text-[var(--c-text-secondary)]","px-2","py-1","rounded-md","hover:bg-black/5",3,"click"],["role","listbox",1,"wselect__popup","absolute","left-0","top-[calc(100%+var(--sp-2))]","z-10","w-full","bg-[var(--c-bg-secondary)]","border","border-[var(--c-border)]","rounded-[var(--b-radius-card)]","shadow-[0_0_4px_var(--c-border)]","overflow-hidden",3,"click"],[1,"wselect__search","p-[var(--sp-3)]","border-b","border-[var(--c-border)]"],[1,"popup-block","max-h-[220px]","overflow-y-auto","p-[var(--sp-2)]"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["translate","",1,"popup-block__empty-search","py-[var(--sp-3)]","text-center","text-[var(--c-text-primary)]","opacity-80"],[3,"wChange","placeholder","focused"],["type","button","role","option",1,"wselect__item","w-full","text-left","flex","items-center","gap-[var(--sp-2)]","px-[var(--sp-3)]","py-[var(--sp-2)]","rounded-[10px]","transition","hover:bg-black/5",3,"click"],[1,"material-icons","text-[18px]","leading-none","select-none","text-[var(--c-text-muted)]"],[1,"min-w-0","flex-1"],[1,"truncate","text-[14px]","text-[var(--c-text-primary)]"]],template:function(t,n){if(t&1){let o=S();_e(0)(1)(2)(3)(4)(5)(6),d(7,"div",4),w("clickOutside",function(){return p(o),u(n.toggleOptions(!1))})("keydown",function(m){return p(o),u(n.onKeydown(m))}),f(8,kt,3,3,"div",5),d(9,"div",6)(10,"div",7),w("click",function(){return p(o),u(n.toggleOptions())}),d(11,"span",8),x(12," unfold_more "),_(),se(13,9),re(14,jt,3,1,"ng-template",null,0,pe),_(),f(16,$t,2,0,"button",10),d(17,"button",11),w("click",function(m){return p(o),n.toggleOptions(),u(m.stopPropagation())}),x(18," expand_more "),_(),B(19,zt,2,1,null,null,Dt),f(21,Yt,9,5,"div",12),_()()}if(t&2){let o=de(15),c=n.showOptions();D(n.placeholder()),l();let m=D(n.label());l();let y=D(n.isMulti());l();let C=D(n.selectedIds());l();let M=D(n.selectedId());l(),D(n.searchable()),l(),D(n.filteredItems()),l(2),g(m?8:-1),l(),I("_active",c),O("aria-expanded",c?"true":"false"),l(),I("_disabled",n.isDisabled()),l(3),V("ngTemplateOutlet",n.viewTpl()||o),l(3),g(n.clearable()&&(y?C.length:M)?16:-1),l(),I("_disabled",n.isDisabled())("_active",c),l(2),A(n.buttons()||Oe(20,Tt)),l(2),g(c?21:-1)}},dependencies:[je,Xe,Ge,ze,Z],styles:['[_nghost-%COMP%]{display:block}._disabled[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}._disabled-btn[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}.wselect__body._active[_ngcontent-%COMP%]{border-color:var(--c-primary)}.wselect__body[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:var(--focus-ring)}.wselect[_ngcontent-%COMP%]   .wselect__icon-btn._active[_ngcontent-%COMP%]{transform:rotate(180deg)}.wselect__item._selected[_ngcontent-%COMP%]{font-weight:600;background:#0000000d;position:relative}.wselect__item._selected[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:8px;bottom:8px;width:3px;border-radius:999px;background:var(--c-primary)}.wselect__item._active[_ngcontent-%COMP%]{outline:none;box-shadow:var(--focus-ring)}.wselect[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px;height:6px;background-color:transparent}.wselect[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:999px;background-color:var(--c-border)}'],changeDetection:0})}}return i})();var Vn=(()=>{class i extends qe{constructor(e){super(xe,T(Y),e,"language"),this.configType="local",this._languageService=T(fe),this._form=T(Y),this._cdr=T(Ae),this.searchable=h(!0),this.clearable=h(!0),this.disabled=h(!1),this.isMutatable=h(!1),this.wModel=H(null,{alias:"wModel"}),this.wChange=j(),this.placeholder=F(()=>(this.documents().length?"Select language":"Create new language")+"..."),this.buttons=L([]),this._languageService.loaded.pipe(Ie(1)).subscribe(()=>{this.setDocuments()}),E(()=>{if(this._languageService.language()?._id&&this.wModel.set(this._languageService.language()?._id),this.isMutatable()){let t=!!this._languageService.language()?._id;this.buttons.set([{icon:t?"edit":"",click:()=>this.mutate(!0)},{icon:t?"delete":"",click:()=>this.deleteCurrent()},{icon:"add",click:()=>this.mutate(!1)}])}this._cdr.markForCheck()})}mutate(e=!0){let t=this.wModel()??null,n=e?this._languageService.getSignal(t):void 0;console.log(n?.()||{}),this._form.modal(xe,{label:e?"Update":"Create",click:(o,c)=>{e&&this._languageService.language()?this._languageService.update(Ce(Ce({},this._languageService.language()),o)).subscribe(()=>{this.setDocuments()}):this._languageService.create(o).subscribe(m=>{this.setDocuments(),this._languageService.setLanguage(m),this.wModel.set(m._id),this.wChange.emit(m._id)}),c()}},n?.()||{})}deleteCurrent(){let e=this._languageService.language();e&&(this._languageService.languages().length>1?(this._languageService.nextLanguage(),console.log(this._languageService.language()),this.wModel.set(this._languageService.language()?._id)):this._languageService.setLanguageId(),this._languageService.delete(e).subscribe(()=>{this.setDocuments()}))}static{this.\u0275fac=function(t){return new(t||i)(De(fe))}}static{this.\u0275cmp=U({type:i,selectors:[["language-selector"]],inputs:{searchable:[1,"searchable"],clearable:[1,"clearable"],disabled:[1,"disabled"],isMutatable:[1,"isMutatable"],wModel:[1,"wModel"]},outputs:{wModel:"wModelChange",wChange:"wChange"},features:[ke],decls:2,vars:9,consts:[[3,"wChange","placeholder","disabled","searchable","clearable","buttons","wModel","items"]],template:function(t,n){if(t&1){let o=S();d(0,"wselect",0),b(1,"translate"),w("wChange",function(m){return p(o),n.wModel.set(m),u(n.wChange.emit(m))}),_()}if(t&2){let o=n.documents();V("placeholder",v(1,7,n.placeholder())())("disabled",n.disabled()||!o.length)("searchable",n.searchable())("clearable",n.clearable())("buttons",n.buttons())("wModel",n.wModel())("items",o)}},dependencies:[oe,Z],encapsulation:2,changeDetection:0})}}return i})();export{He as a,he as b,Xe as c,Z as d,P as e,Ge as f,N as g,oe as h,Li as i,fe as j,Vn as k};
