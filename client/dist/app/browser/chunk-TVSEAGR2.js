import{e as T}from"./chunk-WTO3H2IH.js";import{$a as v,J as n,K as f,L as d,Q as p,Qa as u,W as h,Wa as _,ab as C,hb as y,ob as g,q as l,qb as S,r as m}from"./chunk-FODE3CW3.js";var b={formId:"test",title:"Test",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Placeholder",value:"fill test title"},{name:"Label",value:"Title"}]},{name:"Text",key:"description",fields:[{name:"Placeholder",value:"fill test description"},{name:"Label",value:"Description"}]}]};var k=(()=>{class e extends C{constructor(){super({name:"test"}),this.tests=this.getDocs(),this.testsByAuthor={},this.get(),this.filteredDocuments(this.testsByAuthor)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var I=(()=>{class e{get rows(){return this._testService.tests}constructor(o,i,t,r,a){this._translate=o,this._testService=i,this._alert=t,this._form=r,this._core=a,this.columns=["name","description"],this.form=this._form.getForm("test",b),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(s,c)=>{this._preCreate(s),this._testService.create(s),c()}})},update:s=>{this._form.modal(this.form,[],s).then(c=>{this._core.copy(c,s),this._testService.update(s)})},delete:s=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this test?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._testService.delete(s)}}]})},buttons:[{icon:"cloud_download",click:s=>{this._form.modalUnique("test","url",s)}}],headerButtons:[{icon:"playlist_add",click:this._bulkManagement(),class:"playlist"},{icon:"edit_note",click:this._bulkManagement(!1),class:"edit"}]}}_bulkManagement(o=!0){return()=>{this._form.modalDocs(o?[]:this.rows).then(i=>{if(o)for(let t of i)this._preCreate(t),this._testService.create(t);else{for(let t of this.rows)i.find(r=>r._id===t._id)||this._testService.delete(t);for(let t of i){let r=this.rows.find(a=>a._id===t._id);r?(this._core.copy(t,r),this._testService.update(r)):(this._preCreate(t),this._testService.create(t))}}})}}_preCreate(o){delete o.__created}static{this.\u0275fac=function(i){return new(i||e)(n(y),n(k),n(v),n(S),n(_))}}static{this.\u0275cmp=f({type:e,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","Tests",3,"columns","config","rows"]],template:function(i,t){i&1&&h(0,"wtable",0),i&2&&p("columns",t.columns)("config",t.config)("rows",t.rows)},dependencies:[g],encapsulation:2})}}return e})();var j=[{path:"",component:I}],Y=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=d({type:e})}static{this.\u0275inj=m({imports:[u.forChild(j),T]})}}return e})();export{Y as TestsModule};
