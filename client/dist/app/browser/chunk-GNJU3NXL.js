import{a as G,b as H}from"./chunk-BWJCBN3E.js";import{a as f}from"./chunk-NHSUGEJN.js";import{a as A,d as T,e as u}from"./chunk-WE3LUQF6.js";import"./chunk-G5C7A5E6.js";import"./chunk-C6AZOIPQ.js";import{a as z,b as v}from"./chunk-YFSGOCWZ.js";import{l as y}from"./chunk-QOT76O5U.js";import{$ as C,Ca as k,Da as N,E as w,Ea as P,F as b,La as L,Ma as x,Pa as j,Qa as R,Ra as E,S as V,W as p,X as d,Za as Q,aa as M,bb as U,cb as W,fb as B,ib as F,ka as s,kb as O,la as m,lb as _,ma as c,nb as $,sb as q,ua as S,wa as h,y as r}from"./chunk-H5N67KS5.js";import{a as D}from"./chunk-2VMXMS7J.js";var J={formId:"phrase",title:"Phrase",components:[{name:"Text",key:"text",focused:!0,fields:[{name:"Label",value:"Origin text"},{name:"Placeholder",value:"fill origin text..."},{name:"Textarea",value:!0}]},{name:"Text",key:"translation",fields:[{name:"Label",value:"Translation"},{name:"Placeholder",value:"fill translation..."},{name:"Textarea",value:!0}]}]};var K={formId:"language",title:"Language",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Label",value:"Name"},{name:"Placeholder",value:"fill language name"}]}]};var te=["templateRef"],ae=()=>[];function ne(i,n){if(i&1){let o=S();m(0,"wselect",1),E("wModelChange",function(e){let a=w(o).$implicit;return R(a.submition[a.key],e)||(a.submition[a.key]=e),b(e)}),h("wChange",function(){let e=w(o).$implicit;return b(e.wChange())}),c()}if(i&2){let o=n.$implicit;j("wModel",o.submition[o.key]),s("multiple",o.field.Multiple||!1)("placeholder",o.field.Placeholder)("bindValue",o.field.Value||"_id")("bindLabel",o.field.Name||"name")("ngClass",o.component.class)("items",o.field.Items||Q(8,ae))("searchable",!0)}}var Y=(()=>{let n=class n{constructor(){this._form=r(u)}ngOnInit(){this._form.addTemplateComponent("Language",this.templateRef)}select(t){return t.value?.name||t.value||""}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=d({type:n,selectors:[["ng-component"]],viewQuery:function(e,a){if(e&1&&k(te,7),e&2){let l;N(l=P())&&(a.templateRef=l.first)}},decls:2,vars:0,consts:[["templateRef",""],[3,"wModelChange","wChange","wModel","multiple","placeholder","bindValue","bindLabel","ngClass","items","searchable"]],template:function(e,a){e&1&&M(0,ne,1,9,"ng-template",null,0,B)},dependencies:[T,q],encapsulation:2,changeDetection:0});let i=n;return i})();var Z=(()=>{let n=class n extends y{constructor(t){super(Y,r(u),r(v),t,"language"),this.searchable=_(!0),this.clearable=_(!0),this.disabled=_(!1),this.isMutatable=_(!1),this.wModel=$(null,{alias:"wModel"}),this.wChange=O(),this.placeholder=F(()=>(this.documents().length?"Select language":"Create new language")+"..."),this.buttons=F(()=>{if(!this.isMutatable())return[];let e=!!this.languageService.language();return[{icon:e?"edit":"",click:()=>this.mutate(!0)},{icon:e?"delete":"",click:()=>this.deleteCurrent()},{icon:"add",click:()=>this.mutate(!1)}]}),this.languageService=r(f),this._form=r(u),this._translate=r(v),this.setDocuments()}mutate(t=!0){let e=this.wModel()??null,a=t?this.documents().find(l=>l()._id===e):void 0;this._form.modal(K,{label:t?"Update":"Create",click:l=>{t&&this.languageService.language()?this.languageService.update(D(D({},this.languageService.language()),l)):this.languageService.create(l).subscribe(g=>{this.languageService.setLanguage(g),this.wModel.set(g._id),this.wChange.emit(g._id)})}},a?.())}deleteCurrent(){let t=this.languageService.language();t&&(this.languageService.delete(t),this.languageService.nextLanguage())}};n.\u0275fac=function(e){return new(e||n)(p(f))},n.\u0275cmp=d({type:n,selectors:[["language-selector"]],inputs:{searchable:[1,"searchable"],clearable:[1,"clearable"],disabled:[1,"disabled"],isMutatable:[1,"isMutatable"],wModel:[1,"wModel"]},outputs:{wModel:"wModelChange",wChange:"wChange"},features:[C],decls:2,vars:9,consts:[[3,"wChange","placeholder","disabled","searchable","clearable","items","buttons","wModel"]],template:function(e,a){if(e&1){let l=S();m(0,"wselect",0),U(1,"translate"),h("wChange",function(I){return w(l),a.wModel.set(I),b(a.wChange.emit(I))}),c()}if(e&2){let l=a.documents();s("placeholder",W(1,7,a.placeholder())())("disabled",a.disabled()||!l.length)("searchable",a.searchable())("clearable",a.clearable())("items",l)("buttons",a.buttons())("wModel",a.wModel())}},dependencies:[T,A],encapsulation:2,changeDetection:0});let i=n;return i})();function ie(i,n){if(i&1&&L(0),i&2){let o=n.$implicit;x(o.text)}}function le(i,n){if(i&1&&L(0),i&2){let o=n.$implicit;x(o.translation)}}var ee=(()=>{let n=class n extends y{allowCreate(){return!1}allowUrl(){return!1}update(t){t.translation=this._translateService.translate(t.text)(),this._formService.modal(this.form,{label:"Update",click:(e,a)=>{a(),t.text!==e.text&&(t.text=e.text,this._phraseService.update(t)),t.translation,e.translation,console.log(this.languageService.language()?._id,t.text,e.text,t.translation,e.translation)}},t)}constructor(t,e,a){super(J,a,t,e,"phrase"),this._translateService=t,this._phraseService=e,this._formService=a,this.columns=["phrase","translation"],this.configType="local",this.config=this.getConfig(),this.languageService=r(f),this.setDocuments()}};n.\u0275fac=function(e){return new(e||n)(p(v),p(z),p(u))},n.\u0275cmp=d({type:n,selectors:[["ng-component"]],features:[C],decls:4,vars:6,consts:[[3,"wChange","wModel","clearable","isMutatable"],["title","Translates",3,"rows","columns","config"],["cell","phrase"],["cell","translation"]],template:function(e,a){if(e&1&&(m(0,"language-selector",0),h("wChange",function(g){return a.languageService.setLanguageId((g??"")+"")}),c(),m(1,"wtable",1),M(2,ie,1,1,"ng-template",2)(3,le,1,1,"ng-template",3),c()),e&2){let l;s("wModel",(l=a.languageService.language())==null?null:l._id)("clearable",!1)("isMutatable",!0),V(),s("rows",a.documents())("columns",a.columns)("config",a.config)}},dependencies:[H,Z,G],encapsulation:2,changeDetection:0});let i=n;return i})();var qe=[{path:"",component:ee}];export{qe as routes};
