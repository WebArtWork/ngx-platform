import{a as B,b as z}from"./chunk-JJMECHBX.js";import{a as v}from"./chunk-KZJ3USX5.js";import{a as A,e as T,f as m}from"./chunk-EJK4N3AH.js";import"./chunk-VIW2MMA5.js";import"./chunk-7REHAIHW.js";import"./chunk-DI2PC7GF.js";import{a as q,b as h}from"./chunk-MKE5DK2P.js";import{i as U,j as $,k as y,m as O}from"./chunk-WKLHJP3I.js";import{A as o,Fa as M,G as b,Ga as k,H as _,Ha as V,Oa as D,Pa as x,U as I,Ya as j,Z as s,_ as g,bb as N,ca as S,cb as P,da as C,fb as E,kb as R,lb as f,na as c,oa as u,pa as p,tb as Q,xa as w,za as d}from"./chunk-SEEX5V2H.js";import"./chunk-FDERIQAA.js";var G={formId:"phrase",title:"Phrase",components:[{name:"Text",key:"text",focused:!0,fields:[{name:"Label",value:"Origin text"},{name:"Placeholder",value:"fill origin text..."},{name:"Textarea",value:!0}]},{name:"Text",key:"translation",fields:[{name:"Label",value:"Translation"},{name:"Placeholder",value:"fill translation..."},{name:"Textarea",value:!0}]}]};var H={formId:"language",title:"Language",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Label",value:"Name"},{name:"Placeholder",value:"fill language name"}]}]};var Y=["templateRef"];function Z(n,i){if(n&1){let l=w();u(0,"wselect",1),d("modelChange",function(t){let e=b(l).$implicit;return e.submition[e.key]=t,_(e.wChange())}),p()}if(n&2){let l=i.$implicit;c("value",l.submition[l.key])("multiple",l.field.Multiple||!1)("placeholder",l.field.Placeholder)("bindValue",l.field.Value||"_id")("bindLabel",l.field.Name||"name")("ngClass",l.component.class)("items",l.field.Items)("searchable",!0)}}var K=(()=>{let i=class i{constructor(){this._form=o(m)}ngOnInit(){this._form.addTemplateComponent("Language",this.templateRef)}select(a){return a.value?.name||a.value||""}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=g({type:i,selectors:[["ng-component"]],viewQuery:function(t,e){if(t&1&&M(Y,7),t&2){let r;k(r=V())&&(e.templateRef=r.first)}},decls:2,vars:0,consts:[["templateRef",""],[3,"modelChange","value","multiple","placeholder","bindValue","bindLabel","ngClass","items","searchable"]],template:function(t,e){t&1&&C(0,Z,1,8,"ng-template",null,0,E)},dependencies:[T,Q],encapsulation:2,changeDetection:0});let n=i;return n})();var W=(()=>{let i=class i extends y{constructor(a,t,e){super(K,e,t,a,"language"),this.mutatable=f(!1),this.searchable=f(!0),this.clearable=f(!0),this.disabled=f(!1),this.value=f(""),this.wChange=R(),this.languageService=o(v),this._emitterService=o(O),this.buttons=[{icon:this.languageService.language()?"edit":"",click:()=>{this.mutate()}},{icon:this.languageService.language()?"delete":"",click:()=>{this.delete(this.languageService.language())}},{icon:"add",click:()=>{this.mutate(!1)}}],this._coreService=o($),this._alertService=o(U),this._formService=o(m),this._translateService=o(h),this.setDocuments(),this._emitterService.on("languageId").subscribe(r=>{this.buttons[0].icon="edit",this.buttons[1].icon="delete"})}mutate(a=!0){let t=a?this.documents().find(e=>e()._id===(this.selected||this.value()))||{}:{};this._formService.modal(H,{click:e=>{a?(this.languageService.language.update(r=>(r=r||{},this._coreService.copy(e,r),r)),this.languageService.update(this.languageService.language())):this.languageService.create(e).subscribe(r=>{this.languageService.setLanguage(r)})},label:a?"Update":"Create"},t)}};i.\u0275fac=function(t){return new(t||i)(s(v),s(h),s(m))},i.\u0275cmp=g({type:i,selectors:[["language-selector"]],inputs:{mutatable:[1,"mutatable"],searchable:[1,"searchable"],clearable:[1,"clearable"],disabled:[1,"disabled"],value:[1,"value"]},outputs:{wChange:"wChange"},features:[S],decls:2,vars:10,consts:[[3,"wChange","placeholder","disabled","searchable","clearable","items","buttons","value"]],template:function(t,e){if(t&1){let r=w();u(0,"wselect",0),N(1,"translate"),d("wChange",function(F){return b(r),e.wChange.emit(F),_(e.selected=F)}),p()}if(t&2){let r=e.documents();c("placeholder",j(P(1,8,(r.length?"Select language":"Create new language")+"...")()))("disabled",e.disabled()||!r.length)("searchable",e.searchable())("clearable",e.clearable())("items",r)("buttons",e.buttons)("value",e.value())}},dependencies:[T,A],encapsulation:2,changeDetection:0});let n=i;return n})();function ae(n,i){if(n&1&&D(0),n&2){let l=i.$implicit;x(l.text)}}function ie(n,i){if(n&1&&D(0),n&2){let l=i.$implicit;x(l.text)}}var X=(()=>{let i=class i extends y{allowCreate(){return!1}allowUrl(){return!1}update(a){a.translation=this._translateService.translate(a.text)(),this._formService.modal(this.form,{label:"Update",click:(t,e)=>{e(),a.text!==t.text&&(a.text=t.text,this._phraseService.update(a)),a.translation,t.translation,console.log(this.languageService.language()?._id,a.text,t.text,a.translation,t.translation)}},a)}constructor(a,t,e){super(G,e,a,t,"phrase"),this._translateService=a,this._phraseService=t,this._formService=e,this.columns=["phrase","translation"],this.configType="local",this.config=this.getConfig(),this.languageService=o(v),this.setDocuments()}};i.\u0275fac=function(t){return new(t||i)(s(h),s(q),s(m))},i.\u0275cmp=g({type:i,selectors:[["ng-component"]],features:[S],decls:4,vars:6,consts:[[3,"wChange","value","clearable","mutatable"],["title","Translates",3,"rows","columns","config"],["cell","phrase"],["cell","translation"]],template:function(t,e){if(t&1&&(u(0,"language-selector",0),d("wChange",function(L){return e.languageService.setLanguageId(L+"")}),p(),u(1,"wtable",1),C(2,ae,1,1,"ng-template",2)(3,ie,1,1,"ng-template",3),p()),t&2){let r;c("value",(r=e.languageService.language())==null?null:r._id)("clearable",!1)("mutatable",!0),I(),c("rows",e.documents())("columns",e.columns)("config",e.config)}},dependencies:[z,W,B],encapsulation:2,changeDetection:0});let n=i;return n})();var Ue=[{path:"",component:X}];export{Ue as routes};
