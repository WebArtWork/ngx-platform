import{o as h,p as o}from"./chunk-LX222HT6.js";import{A as r,L as c,O as u,Y as g,w as n}from"./chunk-LNXCJEQM.js";var f=(()=>{let t=class t extends o{constructor(){super({name:"translatelanguage",unauthorized:!0}),this.language=c({}),this.languages=c(this.getDocs()),this._storeService=r(h),this._storeService.get("languageId",e=>{e&&this.setLanguageId(e)}),this.get().subscribe(()=>{this.languages.set(this.getDocs())})}setLanguage(e){this.language.set(e),this._storeService.setJson("languageId",e._id)}setLanguageId(e){let s=this.languages().find(a=>a._id===e||a._localId===+e);s&&this.setLanguage(s)}nextLanguage(){let e=this.languages();if(e.length>1){let s=this.language(),a=e.findIndex(m=>m._id===s._id);this.setLanguage(a===e.length-1?e[0]:e[a])}}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var d=(()=>{let t=class t extends o{constructor(){super({name:"translatephrase",unauthorized:!0}),this.storeService=r(h),this.get()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var p=(()=>{let t=class t extends o{constructor(){super({name:"translate",unauthorized:!0,replace:e=>{e.slug=e.phrase+e.language}}),this._resets={},this._phraseService=r(d),this._languageService=r(f),this._phrases={},this._translates={},this._phrasesInitialized=!1,this._phraseService.loaded.subscribe(()=>{this._phrasesInitialized=!0}),this._phraseService.filteredDocuments(this._phrases,{field:"text",filtered:this._reTranslate.bind(this)}),this.filteredDocuments(this._translates,{field:"slug",filtered:this._reTranslate.bind(this)}),this.get()}translate(e,s){if(!e)return"";if(this._resets[e]||=[],s&&this._resets[e].push(s),!this._phrases[e]?.length)return this._phrasesInitialized&&this._phraseService.create({text:e}),e;let a=this._phrases[e][0]._id??""+this._languageService.language()._id;return this._translates[a]?.length&&this._translates[a][0].text||e}_reTranslate(){for(let e in this._resets){this._resets[e]||=[];for(let s of this._resets[e])s(this.translate(e))}}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=n({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var F=(()=>{let t=class t{constructor(){this._elementRef=r(u),this._translateService=r(p)}ngOnInit(){this._elementRef.nativeElement.innerHTML=this._translateService.translate(this._elementRef.nativeElement.innerHTML,e=>{this._elementRef.nativeElement.innerHTML=e})}};t.\u0275fac=function(s){return new(s||t)},t.\u0275dir=g({type:t,selectors:[["","translate",""]]});let i=t;return i})();export{f as a,d as b,p as c,F as d};
