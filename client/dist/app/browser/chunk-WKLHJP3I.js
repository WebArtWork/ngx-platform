import{$ as de,$a as ft,A as h,B as Ke,Ba as x,Bb as K,C as Qe,Cb as wt,Db as bt,E as Xe,Eb as Ct,Fa as lt,Fb as Dt,G as B,Ga as ct,Gb as Mt,H as q,Ha as ut,Hb as Vt,J as le,K as et,Ka as dt,Kb as At,L as H,Ma as fe,N as g,Na as ht,O as tt,Oa as pe,P as Ve,Q as P,Qa as Ee,U as C,V as ce,Y as ue,Z as _,Za as Y,_ as W,aa as V,b as w,c as ne,ca as O,da as it,e as re,ea as nt,f as $e,fa as Ae,g as Le,h as I,ha as N,hb as S,i as Ge,ia as T,ib as J,j as se,ja as rt,jb as pt,k as Be,kb as mt,l as qe,la as Se,ma as xe,n as He,na as R,nb as Z,o as We,oa as b,p as ze,pa as A,pb as gt,q as oe,qa as he,r as Ye,ra as st,rb as me,s as Je,sa as ot,sb as ke,t as Ze,ta as at,tb as _t,u as Me,ub as vt,v as G,vb as yt,w as v,x as ae,xa as z,xb as ge,y as k,z as m,za as D}from"./chunk-SEEX5V2H.js";import{a as c,b as p,e as y}from"./chunk-FDERIQAA.js";function Ie(r,t){let n=t?.injector??h(le),e=new re(1),i=pt(()=>{let s;try{s=r()}catch(o){S(()=>e.error(o));return}S(()=>e.next(s))},{injector:n,manualCleanup:!0});return n.get(H).onDestroy(()=>{i.destroy(),e.complete()}),e.asObservable()}var Pt=(()=>{class r{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,e){this._renderer=n,this._elementRef=e}setProperty(n,e){this._renderer.setProperty(this._elementRef.nativeElement,n,e)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(e){return new(e||r)(_(ue),_(P))};static \u0275dir=V({type:r})}return r})(),Re=(()=>{class r extends Pt{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ve(r)))(i||r)}})();static \u0275dir=V({type:r,features:[O]})}return r})(),be=new k(""),Xt={provide:be,useExisting:G(()=>ei),multi:!0},ei=(()=>{class r extends Re{writeValue(n){this.setProperty("checked",n)}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ve(r)))(i||r)}})();static \u0275dir=V({type:r,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,i){e&1&&D("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Y([Xt]),O]})}return r})(),ti={provide:be,useExisting:G(()=>Nt),multi:!0};function ii(){let r=ke()?ke().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}var ni=new k(""),Nt=(()=>{class r extends Pt{_compositionMode;_composing=!1;constructor(n,e,i){super(n,e),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!ii())}writeValue(n){let e=n??"";this.setProperty("value",e)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(e){return new(e||r)(_(ue),_(P),_(ni,8))};static \u0275dir=V({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){e&1&&D("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Y([ti]),O]})}return r})();var ri=new k(""),si=new k("");function Tt(r){return r!=null}function Rt(r){return nt(r)?Le(r):r}function jt(r){let t={};return r.forEach(n=>{t=n!=null?c(c({},t),n):t}),Object.keys(t).length===0?null:t}function Ut(r,t){return t.map(n=>n(r))}function oi(r){return!r.validate}function $t(r){return r.map(t=>oi(t)?t:n=>t.validate(n))}function ai(r){if(!r)return null;let t=r.filter(Tt);return t.length==0?null:function(n){return jt(Ut(n,t))}}function Lt(r){return r!=null?ai($t(r)):null}function li(r){if(!r)return null;let t=r.filter(Tt);return t.length==0?null:function(n){let e=Ut(n,t).map(Rt);return qe(e).pipe(se(jt))}}function Gt(r){return r!=null?li($t(r)):null}function St(r,t){return r===null?[t]:Array.isArray(r)?[...r,t]:[r,t]}function ci(r){return r._rawValidators}function ui(r){return r._rawAsyncValidators}function Oe(r){return r?Array.isArray(r)?r:[r]:[]}function ve(r,t){return Array.isArray(r)?r.includes(t):r===t}function xt(r,t){let n=Oe(t);return Oe(r).forEach(i=>{ve(n,i)||n.push(i)}),n}function Et(r,t){return Oe(t).filter(n=>!ve(r,n))}var ye=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Lt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Gt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Fe=class extends ye{name;get formDirective(){return null}get path(){return null}},$=class extends ye{_parent=null;name=null;valueAccessor=null},Pe=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},di={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Pn=p(c({},di),{"[class.ng-submitted]":"isSubmitted"}),Nn=(()=>{class r extends Pe{constructor(n){super(n)}static \u0275fac=function(e){return new(e||r)(_($,2))};static \u0275dir=V({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){e&2&&fe("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[O]})}return r})();var Q="VALID",_e="INVALID",j="PENDING",X="DISABLED",F=class{},we=class extends F{value;source;constructor(t,n){super(),this.value=t,this.source=n}},ee=class extends F{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},te=class extends F{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},U=class extends F{status;source;constructor(t,n){super(),this.status=t,this.source=n}};var Ne=class extends F{source;constructor(t){super(),this.source=t}};function hi(r){return(Ce(r)?r.validators:r)||null}function fi(r){return Array.isArray(r)?Lt(r):r||null}function pi(r,t){return(Ce(t)?t.asyncValidators:r)||null}function mi(r){return Array.isArray(r)?Gt(r):r||null}function Ce(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}var Te=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return S(this.statusReactive)}set status(t){S(()=>this.statusReactive.set(t))}_status=J(()=>this.statusReactive());statusReactive=g(void 0);get valid(){return this.status===Q}get invalid(){return this.status===_e}get pending(){return this.status==j}get disabled(){return this.status===X}get enabled(){return this.status!==X}errors;get pristine(){return S(this.pristineReactive)}set pristine(t){S(()=>this.pristineReactive.set(t))}_pristine=J(()=>this.pristineReactive());pristineReactive=g(!0);get dirty(){return!this.pristine}get touched(){return S(this.touchedReactive)}set touched(t){S(()=>this.touchedReactive.set(t))}_touched=J(()=>this.touchedReactive());touchedReactive=g(!1);get untouched(){return!this.touched}_events=new ne;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(xt(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(xt(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Et(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Et(t,this._rawAsyncValidators))}hasValidator(t){return ve(this._rawValidators,t)}hasAsyncValidator(t){return ve(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let e=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(p(c({},t),{sourceControl:e})),n&&t.emitEvent!==!1&&this._events.next(new te(!0,e))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let e=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:e})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e),n&&t.emitEvent!==!1&&this._events.next(new te(!1,e))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let e=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(p(c({},t),{sourceControl:e})),n&&t.emitEvent!==!1&&this._events.next(new ee(!1,e))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let e=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),n&&t.emitEvent!==!1&&this._events.next(new ee(!0,e))}markAsPending(t={}){this.status=j;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new U(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(p(c({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=X,this.errors=null,this._forEachChild(i=>{i.disable(p(c({},t),{onlySelf:!0}))}),this._updateValue();let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new we(this.value,e)),this._events.next(new U(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(p(c({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Q,this._forEachChild(e=>{e.enable(p(c({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(p(c({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let e=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Q||this.status===j)&&this._runAsyncValidator(e,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new we(this.value,n)),this._events.next(new U(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(p(c({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?X:Q}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=j,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let e=Rt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((e,i)=>e&&e._find(i),this)}getError(t,n){let e=n?this.get(n):this;return e&&e.errors?e.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,e){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||e)&&this._events.next(new U(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,e)}_initObservables(){this.valueChanges=new ce,this.statusChanges=new ce}_calculateStatus(){return this._allControlsDisabled()?X:this.errors?_e:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(j)?j:this._anyControlsHaveStatus(_e)?_e:Q}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let e=!this._anyControlsDirty(),i=this.pristine!==e;this.pristine=e,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new ee(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new te(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ce(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=fi(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=mi(this._rawAsyncValidators)}};var je=new k("",{providedIn:"root",factory:()=>De}),De="always";function gi(r,t){return[...t.path,r]}function _i(r,t,n=De){yi(r,t),t.valueAccessor.writeValue(r.value),(r.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(r.disabled),wi(r,t),Ci(r,t),bi(r,t),vi(r,t)}function kt(r,t){r.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function vi(r,t){if(t.valueAccessor.setDisabledState){let n=e=>{t.valueAccessor.setDisabledState(e)};r.registerOnDisabledChange(n),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(n)})}}function yi(r,t){let n=ci(r);t.validator!==null?r.setValidators(St(n,t.validator)):typeof n=="function"&&r.setValidators([n]);let e=ui(r);t.asyncValidator!==null?r.setAsyncValidators(St(e,t.asyncValidator)):typeof e=="function"&&r.setAsyncValidators([e]);let i=()=>r.updateValueAndValidity();kt(t._rawValidators,i),kt(t._rawAsyncValidators,i)}function wi(r,t){t.valueAccessor.registerOnChange(n=>{r._pendingValue=n,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&Bt(r,t)})}function bi(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&Bt(r,t),r.updateOn!=="submit"&&r.markAsTouched()})}function Bt(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function Ci(r,t){let n=(e,i)=>{t.valueAccessor.writeValue(e),i&&t.viewToModelUpdate(e)};r.registerOnChange(n),t._registerOnDestroy(()=>{r._unregisterOnChange(n)})}function Di(r,t){if(!r.hasOwnProperty("model"))return!1;let n=r.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function Mi(r){return Object.getPrototypeOf(r.constructor)===Re}function Vi(r,t){if(!t)return null;Array.isArray(t);let n,e,i;return t.forEach(s=>{s.constructor===Nt?n=s:Mi(s)?e=s:i=s}),i||e||n||null}function It(r,t){let n=r.indexOf(t);n>-1&&r.splice(n,1)}function Ot(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var Ai=class extends Te{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,e){super(hi(n),pi(e,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ce(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Ot(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(e=>e(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Ne(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){It(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){It(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Ot(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Si={provide:$,useExisting:G(()=>xi)},Ft=Promise.resolve(),xi=(()=>{class r extends ${_changeDetectorRef;callSetDisabledState;control=new Ai;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ce;constructor(n,e,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=n,this._setValidators(e),this._setAsyncValidators(i),this.valueAccessor=Vi(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let e=n.name.previousValue;this.formDirective.removeControl({name:e,path:this._getPath(e)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),Di(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){_i(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Ft.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let e=n.isDisabled.currentValue,i=e!==0&&gt(e);Ft.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?gi(n,this._parent):[n]}static \u0275fac=function(e){return new(e||r)(_(Fe,9),_(ri,10),_(si,10),_(be,10),_(Z,8),_(je,8))};static \u0275dir=V({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Y([Si]),O,tt]})}return r})();var Ei={provide:be,useExisting:G(()=>Ii),multi:!0};var ki=(()=>{class r{_accessors=[];add(n,e){this._accessors.push([n,e])}remove(n){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===n){this._accessors.splice(e,1);return}}select(n){this._accessors.forEach(e=>{this._isSameGroup(e,n)&&e[1]!==n&&e[1].fireUncheck(n.value)})}_isSameGroup(n,e){return n[0].control?n[0]._parent===e._control._parent&&n[1].name===e.name:!1}static \u0275fac=function(e){return new(e||r)};static \u0275prov=v({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Ii=(()=>{class r extends Re{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=h(je,{optional:!0})??De;constructor(n,e,i,s){super(n,e),this._registry=i,this._injector=s}ngOnInit(){this._control=this._injector.get($),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(n){this._state=n===this.value,this.setProperty("checked",this._state)}registerOnChange(n){this._fn=n,this.onChange=()=>{n(this.value),this._registry.select(this)}}setDisabledState(n){(this.setDisabledStateFired||n||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",n),this.setDisabledStateFired=!0}fireUncheck(n){this.writeValue(n)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(e){return new(e||r)(_(ue),_(P),_(ki),_(le))};static \u0275dir=V({type:r,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,i){e&1&&D("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[Y([Ei]),O]})}return r})();var Oi=(()=>{class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=de({type:r});static \u0275inj=ae({})}return r})();var Rn=(()=>{class r{static withConfig(n){return{ngModule:r,providers:[{provide:je,useValue:n.callSetDisabledState??De}]}}static \u0275fac=function(e){return new(e||r)};static \u0275mod=de({type:r});static \u0275inj=ae({imports:[Oi]})}return r})();var Fi=["alertRef"],Pi=r=>({"animation-duration":r}),Ni=(r,t)=>t.text;function Ti(r,t){if(r&1&&(b(0,"div",4),he(1,"span",10),A()),r&2){let n=x(2);C(),R("ngClass","wacom-alert__progress-bar--"+n.type)("ngStyle",ft(2,Pi,(n.timeout+350)/1e3+"s"))}}function Ri(r,t){if(r&1&&he(0,"div"),r&2){let n=x(2);ht(n.icon)}}function ji(r,t){if(r&1){let n=z();b(0,"button",12),D("click",function(){let i=B(n).$implicit,s=x(3);return q(s.remove(i.callback))}),pe(1),A()}if(r&2){let n=t.$implicit;C(),Ee(" ",n.text," ")}}function Ui(r,t){if(r&1&&(b(0,"div"),Se(1,ji,2,1,"button",11,Ni),A()),r&2){let n=x(2);C(),xe(n.buttons)}}function $i(r,t){if(r&1){let n=z();b(0,"div",13),D("click",function(){B(n);let i=x(2);return q(i.remove())}),A()}}function Li(r,t){if(r&1&&(b(0,"div",2)(1,"div",3,0),N(3,Ti,2,4,"div",4),b(4,"div",5)(5,"div",6),N(6,Ri,1,2,"div",7),b(7,"div",8),pe(8),A()(),N(9,Ui,3,0,"div"),N(10,$i,1,0,"div",9),A()()()),r&2){let n=x();fe("wacom-alert--closing",n.delete_animation),R("ngClass",n.class),C(),R("ngClass","wacom-alert__content--color-"+n.type),C(2),T(n.progress?3:-1),C(3),T(n.icon?6:-1),C(2),Ee(" ",n.text," "),C(),T(n.type==="question"?9:-1),C(),T(n.closable?10:-1)}}function Gi(r,t){if(r&1){let n=z();b(0,"span",3),D("click",function(){B(n);let i=x();return q(i.close())}),pe(1,"\xD7"),A()}}function Bi(r,t){if(r&1){let n=z();b(0,"input",2,0),D("change",function(i){let s=B(n).$implicit,o=dt(1);return x().fs.change(i,s),q(o.value="")}),A()}if(r&2){let n=t.$implicit;R("id",n.id)("hidden",!0)("accept",n.accept||n.part&&"image/*"||"")("multiple",n.multiple&&!0||"")}}var qi={text:"",type:"info",class:"",progress:!0,position:"bottom",timeout:3e3,closable:!0,buttons:[]},E=new k("config"),M={store:{prefix:"waStore"},meta:{useTitleSuffix:!1,warnMissingGuard:!1,defaults:{links:{}}},socket:!1,http:{url:"",headers:{}},theme:{primary:"#fff",secondary:"#000",info:"#9ddeff",error:"#ffafb4",success:"#a6efb8",warning:"#ffcfa5",question:"#fff9b2"}};var Hi={size:"mid",timeout:0,class:"",closable:!0},ie=r=>typeof r<"u",Wi=(()=>{let t=class t{constructor(e,i,s,o){this.config=e,this.router=i,this.meta=s,this.titleService=o,this.config=this.config||M,this._meta=this.config.meta||{},this._warnMissingGuard()}setDefaults(e){this._meta.defaults=c(c({},this._meta.defaults),e)}setTitle(e,i){let s=ie(e)?e||"":this._meta.defaults?.title||"";return this._meta.useTitleSuffix&&(s+=ie(i)?i:this._meta.defaults?.titleSuffix||""),this._updateMetaTag("title",s),this._updateMetaTag("og:title",s),this._updateMetaTag("twitter:title",s),this.titleService.setTitle(s),this}setLink(e){return Object.keys(e).forEach(i=>{let s=document.createElement("link");s.setAttribute("rel",i),s.setAttribute("href",e[i]),document.head.appendChild(s)}),this}setTag(e,i,s){if(e==="title"||e==="titleSuffix")throw new Error(`Attempt to set ${e} through 'setTag': 'title' and 'titleSuffix' are reserved. Use 'MetaService.setTitle' instead.`);let o=(ie(i)?i||"":this._meta.defaults?.[e]||"")+"";this._updateMetaTag(e,o,s),e==="description"&&(this._updateMetaTag("og:description",o,s),this._updateMetaTag("twitter:description",o,s))}_updateMetaTag(e,i,s){s=s||(e.startsWith("og:")||e.startsWith("twitter:")?"property":"name"),this.meta.updateTag({[s]:e,content:i})}removeTag(e,i){i=i||(e.startsWith("og:")||e.startsWith("twitter:")?"property":"name"),this.meta.removeTag(`${i}="${e}"`)}_warnMissingGuard(){if(ie(this._meta.warnMissingGuard)&&!this._meta.warnMissingGuard)return;let e=!!Object.keys(this._meta.defaults??{}).length,i=a=>a&&a.IDENTIFIER==="MetaGuard",s=!1,o=a=>{let l=a.data&&a.data.meta;!ie(a.redirectTo)&&(e||l)&&!(a.canActivate||[]).some(i)&&(console.warn(`Route with path "${a.path}" has ${l?"":"default "}meta tags, but does not use MetaGuard. Please add MetaGuard to the canActivate array in your route configuration`),s=!0),(a.children||[]).forEach(o)};this.router.config.forEach(o),s&&console.warn("To disable these warnings, set metaConfig.warnMissingGuard: false in your MetaConfig passed to MetaModule.forRoot()")}};t.\u0275fac=function(i){return new(i||t)(m(E,8),m(At),m(Mt),m(Vt))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})(),lr=(()=>{let t=class t{constructor(e,i){this.metaService=e,this.config=i,this.config||(this.config=M),this._meta=this.config.meta||{},this._meta.defaults=this._meta.defaults||{}}canActivate(e,i){return this._processRouteMetaTags(e.data&&e.data.meta),!0}_processRouteMetaTags(e={}){e.disableUpdate||(e.title&&this.metaService.setTitle(e.title,e.titleSuffix),e.links&&Object.keys(e.links).length&&this.metaService.setLink(e.links),this._meta.defaults?.links&&Object.keys(this._meta.defaults.links).length&&this.metaService.setLink(this._meta.defaults.links),Object.keys(e).forEach(i=>{i==="title"||i==="titleSuffix"||i==="links"||Object.keys(e[i]).forEach(s=>{this.metaService.setTag(s,e[i][s],i)})}),Object.keys(this._meta.defaults).forEach(i=>{i in e||i==="title"||i==="titleSuffix"||i==="links"||this.metaService.setTag(i,this._meta.defaults[i])}))}};t.IDENTIFIER="MetaGuard",t.\u0275fac=function(i){return new(i||t)(m(Wi),m(E,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})(),zi=(()=>{let t=class t{constructor(){this.type="info",this.position="bottom",this.delete_animation=!1,this.buttons=[],this._removed=!1}ngAfterViewInit(){if(this.timeout){let e=JSON.parse(JSON.stringify(this.timeout)),i=window.setTimeout(()=>{this.remove()},e),s=new Date;this.alertRef.nativeElement.addEventListener("mouseenter",()=>{clearTimeout(i),e-=new Date().getTime()-s.getTime()},!1),this.alertRef.nativeElement.addEventListener("mouseleave",()=>{s=new Date,clearTimeout(i),i=window.setTimeout(()=>{this.remove()},e)},!1)}}remove(e){this._removed||(this._removed=!0,e?.(),this.delete_animation=!0,setTimeout(()=>{this.close(),this.delete_animation=!1},350))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=W({type:t,selectors:[["alert"]],viewQuery:function(i,s){if(i&1&&lt(Fi,5),i&2){let o;ct(o=ut())&&(s.alertRef=o.first)}},decls:1,vars:1,consts:[["alertRef",""],[1,"wacom-alert","wacom-alert--auto-height",3,"wacom-alert--closing","ngClass"],[1,"wacom-alert","wacom-alert--auto-height",3,"ngClass"],[1,"wacom-alert__content","wacom-alert__content--bounce-in-up",3,"ngClass"],[1,"wacom-alert__progress"],[1,"wacom-alert__body"],[1,"wacom-alert__texts"],[3,"class"],[1,"wacom-alert__message","wacom-alert__message--slide-in"],[1,"wacom-alert__close"],[1,"wacom-alert__progress-bar",3,"ngClass","ngStyle"],[1,"wacom-alert__button"],[1,"wacom-alert__button",3,"click"],[1,"wacom-alert__close",3,"click"]],template:function(i,s){i&1&&N(0,Li,11,9,"div",1),i&2&&T(s.text?0:-1)},dependencies:[ge,_t,yt],styles:['@keyframes _ngcontent-%COMP%_iziT-bounceInUp{0%{opacity:0;transform:translateY(200px)}50%{opacity:1;transform:translateY(-10px)}70%{transform:translateY(5px)}to{transform:translateY(0)}}@keyframes _ngcontent-%COMP%_wacom-alert-progress{0%{width:100%}to{width:0%}}.wacom-alert[_ngcontent-%COMP%]{font-size:0;height:100px;width:100%;transform:translateZ(0);backface-visibility:hidden;transition:.3s all ease-in-out;opacity:1}.wacom-alert--closing[_ngcontent-%COMP%]{opacity:0;transition:.3s all ease-in-out}.wacom-alert--auto-height[_ngcontent-%COMP%]{height:auto!important}.wacom-alert__content[_ngcontent-%COMP%]{display:inline-block;clear:both;position:relative;font-family:Lato,Tahoma,Arial;font-size:14px;padding:8px 0 9px;background:#eeeeeee6;border-color:#eeeeeee6;width:100%;pointer-events:all;cursor:default;transform:translate(0);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;min-height:54px}.wacom-alert__content[_ngcontent-%COMP%]:hover   .wacom-alert__progress-bar[_ngcontent-%COMP%]{animation-play-state:paused}.wacom-alert__content--bounce-in-up[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_iziT-bounceInUp .7s ease-in-out both;animation:_ngcontent-%COMP%_iziT-bounceInUp .7s ease-in-out both}.wacom-alert__content--theme-dark[_ngcontent-%COMP%]{background:#565c70;border-color:#565c70}.wacom-alert__content--theme-dark[_ngcontent-%COMP%]   .wacom-alert__message[_ngcontent-%COMP%]{color:#ffffffb3;font-weight:300}.wacom-alert__content--color-info[_ngcontent-%COMP%]{background-color:var(--wacom-info)}.wacom-alert__content--color-error[_ngcontent-%COMP%]{background-color:var(--wacom-error)}.wacom-alert__content--color-success[_ngcontent-%COMP%]{background-color:var(--wacom-success)}.wacom-alert__content--color-warning[_ngcontent-%COMP%]{background-color:var(--wacom-warning)}.wacom-alert__content--color-question[_ngcontent-%COMP%]{background-color:var(--wacom-question)}.wacom-alert__close[_ngcontent-%COMP%]{width:15px;height:15px;right:17px;top:-5px;opacity:.3;position:relative;order:2}.wacom-alert__close[_ngcontent-%COMP%]:hover{opacity:1}.wacom-alert__close[_ngcontent-%COMP%]:before, .wacom-alert__close[_ngcontent-%COMP%]:after{cursor:pointer;position:absolute;left:15px;content:" ";height:12px;width:2px;background-color:var(--wacom-secondary)}.wacom-alert__close[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.wacom-alert__close[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.wacom-alert__progress[_ngcontent-%COMP%]{bottom:0;position:absolute;width:100%;margin-bottom:0;border-radius:50px}.wacom-alert__progress[_ngcontent-%COMP%]:hover   .wacom-alert__progress-bar[_ngcontent-%COMP%]{animation-play-state:paused}.wacom-alert__progress-bar[_ngcontent-%COMP%]{display:block;width:100%;height:2px;background-color:#a5a5a5ed;animation-name:_ngcontent-%COMP%_wacom-alert-progress;animation-duration:10s;border-radius:50px}.wacom-alert__progress-bar--info[_ngcontent-%COMP%]{background-color:var(--wacom-info)}.wacom-alert__progress-bar--error[_ngcontent-%COMP%]{background-color:var(--wacom-error)}.wacom-alert__progress-bar--success[_ngcontent-%COMP%]{background-color:var(--wacom-success)}.wacom-alert__progress-bar--warning[_ngcontent-%COMP%]{background-color:var(--wacom-warning)}.wacom-alert__progress-bar--question[_ngcontent-%COMP%]{background-color:var(--wacom-question)}.wacom-alert__body[_ngcontent-%COMP%]{position:relative;padding:0 0 0 10px;min-height:36px;margin:0 0 0 15px;text-align:left;display:flex;justify-content:space-between;align-items:center}.wacom-alert__texts[_ngcontent-%COMP%]{margin:10px 0 0;padding-right:2px;display:flex;justify-content:space-between;align-items:center}.wacom-alert__message[_ngcontent-%COMP%]{padding:0;font-size:14px;line-height:16px;text-align:left;color:#0009;white-space:normal}.wacom-alert__message--slide-in[_ngcontent-%COMP%]{-webkit-animation:iziT-slideIn 1s cubic-bezier(.16,.81,.32,1) both;-moz-animation:iziT-slideIn 1s cubic-bezier(.16,.81,.32,1) both;animation:iziT-slideIn 1s cubic-bezier(.16,.81,.32,1) both}']});let r=t;return r})();var Yi=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=W({type:t,selectors:[["lib-wrapper"]],decls:10,vars:0,consts:[[1,"wacom-wrapper"],["id","topLeft",1,"wacom-wrapper__alert","wacom-wrapper__alert--top-left"],["id","top",1,"wacom-wrapper__alert","wacom-wrapper__alert--top"],["id","topRight",1,"wacom-wrapper__alert","wacom-wrapper__alert--top-right"],["id","left",1,"wacom-wrapper__alert","wacom-wrapper__alert--left"],["id","center",1,"wacom-wrapper__alert","wacom-wrapper__alert--center"],["id","right",1,"wacom-wrapper__alert","wacom-wrapper__alert--right"],["id","bottomLeft",1,"wacom-wrapper__alert","wacom-wrapper__alert--bottom-left"],["id","bottom",1,"wacom-wrapper__alert","wacom-wrapper__alert--bottom"],["id","bottomRight",1,"wacom-wrapper__alert","wacom-wrapper__alert--bottom-right"]],template:function(i,s){i&1&&(st(0,"div",0),at(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),ot())},styles:[".wacom-wrapper__alert[_ngcontent-%COMP%]{z-index:99999;position:fixed;width:100%;pointer-events:none;display:flex;flex-direction:column}.wacom-wrapper__alert--top-left[_ngcontent-%COMP%]{top:0;left:0;text-align:left}.wacom-wrapper__alert--top[_ngcontent-%COMP%]{top:0;left:0;right:0;text-align:center}.wacom-wrapper__alert--top-right[_ngcontent-%COMP%]{top:0;right:0;text-align:right}.wacom-wrapper__alert--left[_ngcontent-%COMP%]{top:0;bottom:0;left:0;justify-content:center;text-align:left}.wacom-wrapper__alert--center[_ngcontent-%COMP%]{inset:0;text-align:center;justify-content:center;flex-flow:column;align-items:center}.wacom-wrapper__alert--right[_ngcontent-%COMP%]{top:0;bottom:0;right:0;justify-content:center;text-align:right}.wacom-wrapper__alert--bottom-left[_ngcontent-%COMP%]{bottom:0;left:0;text-align:left}.wacom-wrapper__alert--bottom[_ngcontent-%COMP%]{bottom:0;left:0;right:0;text-align:center}.wacom-wrapper__alert--bottom-right[_ngcontent-%COMP%]{bottom:0;right:0;text-align:right}@media only screen and (max-width: 567px){.wacom-wrapper__alert--top-left[_ngcontent-%COMP%], .wacom-wrapper__alert--top-right[_ngcontent-%COMP%], .wacom-wrapper__alert--left[_ngcontent-%COMP%], .wacom-wrapper__alert--right[_ngcontent-%COMP%], .wacom-wrapper__alert--bottom-left[_ngcontent-%COMP%], .wacom-wrapper__alert--bottom-right[_ngcontent-%COMP%], .wacom-wrapper__alert--center[_ngcontent-%COMP%]{left:0;right:0;text-align:center}.wacom-wrapper__alert--center[_ngcontent-%COMP%]{align-items:stretch}.wacom-wrapper__alert--left[_ngcontent-%COMP%], .wacom-wrapper__alert--right[_ngcontent-%COMP%]{flex-flow:column;align-items:center}}"]});let r=t;return r})(),Ue=(()=>{let t=class t{constructor(){this._appRef=h(Ae),this._injector=h(Xe),this._providedIn={}}appendById(e,i={},s){let o=me(e,{environmentInjector:this._injector});this.projectComponentInputs(o,i),this._appRef.attachView(o.hostView);let a=o.hostView.rootNodes[0],l=document.getElementById(s);return l&&typeof l.appendChild=="function"&&l.appendChild(a),{nativeElement:a,componentRef:o,remove:()=>this.removeComponent(o)}}appendComponent(e,i={},s=document.body){if(i.providedIn){if(this._providedIn[i.providedIn])return;this._providedIn[i.providedIn]=!0}let o=me(e,{environmentInjector:this._injector});this.projectComponentInputs(o,i),this._appRef.attachView(o.hostView);let a=o.hostView.rootNodes[0];return s&&typeof s.appendChild=="function"&&s.appendChild(a),{nativeElement:a,componentRef:o,remove:()=>this.removeComponent(o,i.providedIn)}}getComponentRef(e,i={}){let s=me(e,{environmentInjector:this._injector});return this.projectComponentInputs(s,i),this._appRef.attachView(s.hostView),s}projectComponentInputs(e,i){if(i){let s=Object.getOwnPropertyNames(i);for(let o of s)e.instance[o]=i[o]}return e}removeComponent(e,i){this._appRef.detachView(e.hostView),e.destroy(),i&&delete this._providedIn[i]}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})(),Wt=(()=>{let t=class t{constructor(e,i){this._dom=i,this._alerts=[],this._positionNumber={topLeft:0,top:1,topRight:2,left:3,center:4,right:5,bottomLeft:6,bottom:7,bottomRight:8},this._translate=s=>"",this._config=c(c({},qi),e?.alert||{}),this._container=this._dom.appendComponent(Yi)}show(e){if(e=this._opts(e),e.text&&typeof this._translate=="function"&&(e.text=this._translate(e.text)),e.unique&&this._alerts.find(o=>o.unique===e.unique))return this._alerts.find(o=>o.unique===e.unique);this._alerts.push(e),e.id||=Math.floor(Math.random()*Date.now())+Date.now(),e.type||(e.type="info"),e.position||(e.position="bottomRight");let i,s;return e.close=()=>{s?.remove(),i?.remove(),s=void 0,i=void 0,typeof e.onClose=="function"&&e.onClose?.(),this._alerts.splice(this._alerts.findIndex(o=>o.id===e.id),1)},i=this._dom.appendById(zi,e,e.position),typeof e.component=="function"&&(s=this._dom.appendComponent(e.component,e,this._container.nativeElement.children[0].children[this._positionNumber[e.position]||0])),typeof e.timeout!="number"&&(e.timeout=3e3),e.timeout&&setTimeout(()=>{e.close?.()},e.timeout),e}open(e){this.show(e)}info(e){e=this._opts(e),e.type="info",this.show(e)}success(e){e=this._opts(e),e.type="success",this.show(e)}warning(e){e=this._opts(e),e.type="warning",this.show(e)}error(e){e=this._opts(e),e.type="error",this.show(e)}question(e){e=this._opts(e),e.type="question",this.show(e)}destroy(){for(let e=this._alerts.length-1;e>=0;e--)this._alerts[e].close?.()}setTranslate(e){this._translate=e}_opts(e){return typeof e=="string"?p(c({},this._config),{text:e}):c(c({},this._config),e)}};t.\u0275fac=function(i){return new(i||t)(m(E,8),m(Ue))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();String.prototype.capitalize||(String.prototype.capitalize=function(){return this.length>0?this.charAt(0).toUpperCase()+this.slice(1).toLowerCase():""});var zt=(()=>{let t=class t{constructor(){this.deviceID=localStorage.getItem("deviceID")||(typeof crypto?.randomUUID=="function"?crypto.randomUUID():this.UUID()),this._afterWhile={},this.device="",this.version="1.0.0",this.appVersion="",this.dateVersion="",this._locked={},this._unlockResolvers={},localStorage.setItem("deviceID",this.deviceID),this.detectDevice()}UUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let i=Math.random()*16|0;return(e==="x"?i:i&3|8).toString(16)})}ota(e,i=!1){if(Array.isArray(e))return e;if(typeof e!="object"||e===null)return[];let s=[];for(let o in e)e.hasOwnProperty(o)&&(e[o]||typeof e[o]=="number"||typeof e[o]=="boolean")&&(i?s.push(o):s.push(e[o]));return s}splice(e,i,s="_id"){if(!Array.isArray(e)||!Array.isArray(i))return i;let o=new Set(e.map(a=>a[s]));return i.filter(a=>!o.has(a[s]))}ids2id(...e){return e.sort((i,s)=>Number(i.toString().substring(0,8))>Number(s.toString().substring(0,8))?1:-1),e.join()}afterWhile(e,i,s=1e3){typeof e=="function"&&(i=e,e="common"),typeof i=="function"&&typeof s=="number"&&(typeof e=="string"?(clearTimeout(this._afterWhile[e]),this._afterWhile[e]=window.setTimeout(i,s)):typeof e=="object"?(clearTimeout(e.__afterWhile),e.__afterWhile=window.setTimeout(i,s)):console.warn("badly configured after while"))}copy(e,i){for(let s in e)typeof e[s]!="object"||e[s]instanceof Date||Array.isArray(e[s])||e[s]===null?i[s]=e[s]:((typeof i[s]!="object"||i[s]instanceof Date||Array.isArray(i[s])||i[s]===null)&&(i[s]={}),this.copy(e[s],i[s]))}detectDevice(){let e=navigator.userAgent||navigator.vendor||window.opera;/windows phone/i.test(e)?this.device="Windows Phone":/android/i.test(e)?this.device="Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?this.device="iOS":this.device="Web"}isMobile(){return this.device==="Windows Phone"||this.device==="Android"||this.device==="iOS"}isTablet(){return this.device==="iOS"&&/iPad/.test(navigator.userAgent)}isWeb(){return this.device==="Web"}isAndroid(){return this.device==="Android"}isIos(){return this.device==="iOS"}setVersion(){this.version=this.appVersion||"",this.version+=this.version&&this.dateVersion?" ":"",this.version+=this.dateVersion||""}setAppVersion(e){this.appVersion=e,this.setVersion()}setDateVersion(e){this.dateVersion=e,this.setVersion()}lock(e){this._locked[e]=!0,this._unlockResolvers[e]||(this._unlockResolvers[e]=[])}unlock(e){this._locked[e]=!1,this._unlockResolvers[e]&&(this._unlockResolvers[e].forEach(i=>i()),this._unlockResolvers[e]=[])}onUnlock(e){return this._locked[e]?new Promise(i=>{this._unlockResolvers[e]||(this._unlockResolvers[e]=[]),this._unlockResolvers[e].push(i)}):Promise.resolve()}locked(e){return!!this._locked[e]}toSignal(e,i={}){if(Object.keys(i).length){let s={};for(let o in i)s[o]=g(i[o](e));return g(c(c({},e),s))}else return g(e)}toSignalsArray(e,i={}){return e.map(s=>this.toSignal(s,i))}pushSignal(e,i,s={}){e.push(this.toSignal(i,s))}removeSignalByField(e,i,s="_id"){let o=e.findIndex(a=>a()[s]===i);o>-1&&e.splice(o,1)}trackBySignalField(e){return(i,s)=>s()[e]}findSignalByField(e,i,s="_id"){return e.find(o=>o()[s]===i)}updateSignalByField(e,i,s,o){let a=this.findSignalByField(e,i,o);a&&a.update(s)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})(),qt=class{constructor(t,n,e,i,s=""){this.formService=n,this.translateService=e,this.documents=g([]),this.page=1,this.__core=h(zt),this.__alert=h(Wt),this.__cdr=h(Z),this.updatableFields=["_id","name","description","data"],this.configType="server",this.perPage=20,this._module="";let o=t;this.__form=n,this.form=this.__form.prepareForm(o),this.crudService=i,this._module=s}setDocuments(t=this.page,n=""){return new Promise(e=>{this.configType==="server"?(this.page=t,this.__core.afterWhile(this,()=>{this.crudService.get({page:t,query:n},this.getOptions()).subscribe(i=>{this.documents.update(()=>this.__core.toSignalsArray(i)),e(),this.__cdr.markForCheck()})},250)):(this.documents.update(()=>this.__core.toSignalsArray(this.crudService.getDocs())),this.crudService.loaded.subscribe(()=>{e(),this.__cdr.markForCheck()}))})}preCreate(t){delete t.__creating}allowCreate(){return!0}allowMutate(){return!0}allowUrl(){return!0}allowSort(){return!1}getOptions(){return{}}bulkManagement(t=!0){return()=>{this.__form.modalDocs(t?[]:this.documents().map(n=>Object.fromEntries(this.updatableFields.map(e=>[e,n()[e]])))).then(n=>y(this,null,function*(){if(t)for(let e of n)this.preCreate(e),yield I(this.crudService.create(e));else{for(let e of this.documents())n.find(i=>i._id===e()._id)||(yield I(this.crudService.delete(e())));for(let e of n){let i=this.documents().find(s=>s()._id===e._id);i?(i.update(s=>(this.__core.copy(e,s),s)),yield I(this.crudService.update(i()))):(this.preCreate(e),yield I(this.crudService.create(e)))}}this.setDocuments()}))}}create(){this.__form.modal(this.form,{label:"Create",click:(t,n)=>y(this,null,function*(){n(),this.preCreate(t),yield I(this.crudService.create(t)),this.setDocuments()})})}update(t){this.__form.modal(this.form,{label:"Update",click:(n,e)=>{e(),this.__core.copy(n,t),this.crudService.update(t),this.__cdr.markForCheck()}},t)}delete(t){this.__alert.question({text:`Are you sure you want to delete this${this._module?" "+this._module:""}?`,buttons:[{text:"No"},{text:"Yes",callback:()=>y(this,null,function*(){yield I(this.crudService.delete(t)),this.setDocuments()})}]})}mutateUrl(t){this.__form.modalUnique(this._module,"url",t)}moveUp(t){let n=this.documents().findIndex(e=>e()._id===t._id);n&&this.documents.update(e=>(e.splice(n,1),e.splice(n-1,0,this.__core.toSignal(t)),e));for(let e=0;e<this.documents().length;e++)this.documents()[e]().order!==e&&(this.documents()[e]().order=e,this.crudService.update(this.documents()[e]()));this.__cdr.markForCheck()}getConfig(){let t={create:this.allowCreate()?()=>{this.create()}:null,update:this.allowMutate()?n=>{this.update(n)}:null,delete:this.allowMutate()?n=>{this.delete(n)}:null,buttons:[],headerButtons:[],allDocs:!0};return this.allowUrl()&&t.buttons.push({icon:"cloud_download",click:n=>{this.mutateUrl(n)}}),this.allowSort()&&t.buttons.push({icon:"arrow_upward",click:n=>{this.moveUp(n)}}),this.allowCreate()&&t.headerButtons.push({icon:"playlist_add",click:this.bulkManagement(),class:"playlist"}),this.allowMutate()&&t.headerButtons.push({icon:"edit_note",click:this.bulkManagement(!1),class:"edit"}),this.configType==="server"?p(c({},t),{paginate:this.setDocuments.bind(this),perPage:this.perPage,setPerPage:this.crudService.setPerPage?.bind(this.crudService),allDocs:!1}):t}};var Ji=(()=>{let t=class t{constructor(){this.closable=!0,this.allowClose=!0}ngOnInit(){typeof this.onClickOutside!="function"&&(this.onClickOutside=this.close),typeof this.onOpen=="function"&&this.onOpen(),window.addEventListener("popstate",this.popStateListener.bind(this))}ngOnDestroy(){window.removeEventListener("popstate",this.popStateListener.bind(this))}popStateListener(e){this.close()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=W({type:t,selectors:[["lib-modal"]],decls:4,vars:1,consts:[[1,"wacom-modal",3,"click"],[1,"wacom-modal__content",3,"click"],["class","wacom-modal__close",3,"click",4,"ngIf"],[1,"wacom-modal__close",3,"click"]],template:function(i,s){i&1&&(b(0,"div",0),D("click",function(){return s.onClickOutside()}),b(1,"div",1),D("click",function(a){return a.stopPropagation()}),he(2,"div"),it(3,Gi,2,0,"span",2),A()()),i&2&&(C(3),R("ngIf",s.closable))},dependencies:[ge,vt],styles:[".wacom-modal[_ngcontent-%COMP%]{position:fixed;z-index:9999;left:0;top:0;width:100%;height:100%;overflow-y:auto;background-color:#000;background-color:#00000080}.wacom-modal__content[_ngcontent-%COMP%]{position:relative;background-color:var(--wacom-primary);margin:15% auto;padding:20px;border:1px solid #888;min-width:20%;max-width:80%}.wacom-modal__close[_ngcontent-%COMP%]{color:#aaa;position:absolute;right:10px;top:3px;font-size:32px;line-height:1}.wacom-modal__close[_ngcontent-%COMP%]:hover, .wacom-modal__close[_ngcontent-%COMP%]:focus{color:var(--wacom-secondary);text-decoration:none;cursor:pointer}"]});let r=t;return r})(),cr=(()=>{let t=class t{constructor(){this.clickOutside=mt(),this._host=h(P),this._cdr=h(Z),this._dref=h(H),this.handler=e=>{this._host.nativeElement.contains(e.target)||(this.clickOutside.emit(e),this._cdr.markForCheck())},document.addEventListener("pointerdown",this.handler,!0),this._dref.onDestroy(()=>document.removeEventListener("pointerdown",this.handler,!0))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=V({type:t,selectors:[["","clickOutside",""]],outputs:{clickOutside:"clickOutside"}});let r=t;return r})();var Zi=(()=>{let t=class t{constructor(){this.now=new Date().getTime()}refreshNow(){this.now=new Date().getTime()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})(),Yt=(()=>{let t=class t{constructor(){this._signals=new Map,this._closers=new Map,this._streams=new Map,this._done=new Map}_getSignal(e){let i=this._signals.get(e);return i||(i=g(void 0,{equal:()=>!1}),this._signals.set(e,i)),i}_getCloser(e){let i=this._closers.get(e);return i||(i=new ne,this._closers.set(e,i)),i}_getStream(e){let i=this._streams.get(e);if(!i){let s=this._getSignal(e),o=this._getCloser(e);i=Ie(s).pipe(Ze(1),Me(o),Je()),this._streams.set(e,i)}return i}emit(e,i){this._getSignal(e).set(i)}on(e){return this._getStream(e)}off(e){let i=this._closers.get(e);i&&(i.next(),i.complete(),this._closers.delete(e)),this._signals.delete(e),this._streams.delete(e)}offAll(){for(let e of Array.from(this._closers.keys()))this.off(e)}has(e){return this._signals.has(e)}_getDoneSignal(e){let i=this._done.get(e);return i||(i=g(void 0),this._done.set(e,i)),i}complete(e,i=!0){this._getDoneSignal(e).set(i)}clearCompleted(e){(this._done.get(e)??this._getDoneSignal(e)).set(void 0)}completed(e){return this._getDoneSignal(e)()}isCompleted(e){return this._getDoneSignal(e)()!==void 0}onComplete(e,i){let s=(Array.isArray(e)?e:[e]).filter(Boolean),o=s.map(l=>Ie(this._getDoneSignal(l)).pipe(We(d=>d!==void 0),se(d=>d))),a;if(s.length<=1?a=o[0]?.pipe(oe(1))??new w:i?.mode==="any"?a=He(...o).pipe(oe(1)):a=Be(o).pipe(oe(1)),i?.timeoutMs&&Number.isFinite(i.timeoutMs)&&(a=a.pipe(Ge({first:i.timeoutMs}))),i?.abort){let l=new w(d=>{let u=()=>{d.next(),d.complete()};return i.abort.addEventListener("abort",u),()=>i.abort.removeEventListener("abort",u)});a=a.pipe(Me(l))}return a}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})(),Ki={headers:{},url:""},Jt=(()=>{let t=class t{constructor(e,i){if(this._http=i,this.errors=[],this.url=localStorage.getItem("wacom-http.url")||"",this.locked=!1,this.awaitLocked=[],this._headers=localStorage.getItem("wacom-http.headers")?JSON.parse(localStorage.getItem("wacom-http.headers")):{},this._http_headers=new K(this._headers),this._config=c(c({},Ki),e.http||{}),typeof this._config.url=="string"&&this.setUrl(this._config.url),typeof this._config.headers=="object"){for(let s in this._config.headers)this._headers[s]=this._config.headers[s];this._http_headers=new K(this._headers)}}setUrl(e){this.url=e,localStorage.setItem("wacom-http.url",e)}removeUrl(){this.url=this._config.url||"",localStorage.removeItem("wacom-http.url")}set(e,i){this._headers[e]=i,localStorage.setItem("wacom-http.headers",JSON.stringify(this._headers)),this._http_headers=new K(this._headers)}header(e){return this._headers[e]}remove(e){delete this._headers[e],localStorage.setItem("wacom-http.headers",JSON.stringify(this._headers)),this._http_headers=new K(this._headers)}_httpMethod(e,i,s,o){return e==="post"?this._http.post(i,s,o):e==="put"?this._http.put(i,s,o):e==="patch"?this._http.patch(i,s,o):e==="delete"?this._http.delete(i,o):this._http.get(i,o)}_post(e,i,s=l=>{},o={},a="post"){if(typeof o=="function"&&(o={err:o}),o.err||(o.err=u=>{}),this.locked&&!o.skipLock)return new w(u=>{let f=setTimeout(()=>{this._post(e,i,s,o,a).subscribe(u)},100);this.awaitLocked.push(f)});let l=(o.url||this.url)+e;this.prepare_handle(l,i);let d=new re(1);return this._httpMethod(a,l,i,{headers:this._http_headers}).pipe(Ye(),ze(u=>(this.handleError(o.err,()=>{this._post(e,i,s,o,a).subscribe(d)})(u),d.error(u),$e))).subscribe({next:u=>{if(o.acceptance&&typeof o.acceptance=="function"&&!o.acceptance(u)){let f=new wt({error:"Acceptance failed",status:400});this.handleError(o.err,()=>{})(f),d.error(f);return}if(o.replace&&typeof o.replace=="function"&&(Array.isArray(this._getObjectToReplace(u,o.data))?this._getObjectToReplace(u,o.data).map(f=>o.replace(f)):this._getObjectToReplace(u,o.data)&&o.replace(this._getObjectToReplace(u,o.data))),Array.isArray(o.fields)){if(Array.isArray(this._getObjectToReplace(u,o.data)))this._getObjectToReplace(u,o.data).map(f=>this._newDoc(f,o.fields));else if(this._getObjectToReplace(u,o.data)){let f=this._newDoc(this._getObjectToReplace(u,o.data),o.fields);o.data?this._setObjectToReplace(u,o.data,f):u=f}}this.response_handle(l,u,()=>s(u)),d.next(u),d.complete()},error:u=>d.error(u),complete:()=>d.complete()}),d.asObservable()}post(e,i,s=a=>{},o={}){return this._post(e,i,s,o)}put(e,i,s=a=>{},o={}){return this._post(e,i,s,o,"put")}patch(e,i,s=a=>{},o={}){return this._post(e,i,s,o,"patch")}delete(e,i=o=>{},s={}){return this._post(e,null,i,s,"delete")}get(e,i=o=>{},s={}){return this._post(e,null,i,s,"get")}clearLocked(){for(let e of this.awaitLocked)clearTimeout(e);this.awaitLocked=[]}lock(){this.locked=!0}unlock(){this.locked=!1}handleError(e,i){return s=>new Promise(o=>{this.err_handle(s,e,i),o()})}err_handle(e,i,s){typeof i=="function"&&i(e);for(let o of this.errors)typeof o=="function"&&o(e,s)}prepare_handle(e,i){}response_handle(e,i,s){typeof s=="function"&&s()}_getObjectToReplace(e,i=""){if(i.includes(".")){let s=i.split(""),o=s.pop()||"";return this._getObjectToReplace(e[o]||{},s.join("."))}else return i?e[i]:e}_setObjectToReplace(e,i="",s){for(;i.includes(".");){let o=i.split(""),a=o.pop()||"";e=e[a]||{},i=o.join(".")}e[i]=s}_newDoc(e,i){let s={};for(let o of i)s[o]=e[o];return s}};t.\u0275fac=function(i){return new(i||t)(m(E,8),m(bt))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})(),Qi={endpoints:["https://api.webart.work/status","https://www.google.com/generate_204","https://www.gstatic.com/generate_204","https://www.cloudflare.com/cdn-cgi/trace"],intervalMs:3e4,timeoutMs:2500,goodLatencyMs:300,maxConsecutiveFails:3};var Xi=(()=>{let t=class t{constructor(e){this._status=g(navigator.onLine?"poor":"none"),this._latencyMs=g(null),this._isOnline=g(navigator.onLine),this.status=this._status.asReadonly(),this.latencyMs=this._latencyMs.asReadonly(),this.isOnline=this._isOnline.asReadonly(),this.fails=0,this._emitterService=h(Yt),this._config=c(c({},Qi),e.network||{}),this._bindEvents(),this.recheckNow(),window.setInterval(()=>this.recheckNow(),this._config.intervalMs)}recheckNow(){return y(this,null,function*(){let e=yield this._pingAny();e.ok&&e.latency!=null?(this.fails=0,this._latencyMs.set(e.latency),this._isOnline.set(!0)):(this.fails++,this._latencyMs.set(null)),this._updateClassification()})}_updateClassification(){if(!this._isOnline()||this.fails>=this._config.maxConsecutiveFails){this._status()!=="none"&&(this._status.set("none"),this._emitterService.emit("wacom_offline"));return}let e=this._latencyMs();e!=null&&e<=this._config.goodLatencyMs?this._status()!=="good"&&(this._status.set("good"),this._emitterService.emit("wacom_online")):this._status()!=="poor"&&(this._status.set("poor"),this._emitterService.emit("wacom_online"))}_bindEvents(){window.addEventListener("online",()=>{this._isOnline.set(!0),this.recheckNow()}),window.addEventListener("offline",()=>{this._isOnline.set(!1),this._updateClassification()}),navigator.connection?.addEventListener?.("change",()=>this.recheckNow())}_pingAny(){return y(this,null,function*(){for(let e of this._config.endpoints){let i=!e.includes("api.webart.work"),s=yield this._measure(e,this._config.timeoutMs,i).catch(()=>null);if(s?.ok)return s}return{ok:!1,latency:null}})}_measure(e,i,s=!1){return y(this,null,function*(){let o=new AbortController,a=setTimeout(()=>o.abort(),i),l=performance.now();try{let d=yield fetch(e+(e.includes("?")?"&":"?")+"t="+Date.now(),{method:"GET",cache:"no-store",credentials:"omit",signal:o.signal,mode:s?"no-cors":"cors"});clearTimeout(a);let u=Math.round(performance.now()-l);return{ok:s?!0:d.ok,latency:u}}catch{return clearTimeout(a),{ok:!1,latency:null}}})}};t.\u0275fac=function(i){return new(i||t)(m(E,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})(),en=(()=>{let t=class t{constructor(e){this._prefix="",this._config=c(c({},M),e?.store||{})}setPrefix(e){this._prefix=e}set(e,i,s=()=>{},o=()=>{}){return y(this,null,function*(){e=this._applyPrefix(e);try{return this._config.set?yield this._config.set(e,i,s,o):(localStorage.setItem(e,i),s()),!0}catch(a){return console.error(a),o(a),!1}})}get(e,i,s=()=>{}){return y(this,null,function*(){e=this._applyPrefix(e);try{if(this._config.get)return(yield this._config.get(e,a=>{i?.(a??null)},s))??null;{let o=localStorage.getItem(e);return i?.(o??null),o??null}}catch(o){return console.error(o),s(o),null}})}setJson(e,i,s=()=>{},o=()=>{}){return y(this,null,function*(){return yield this.set(e,JSON.stringify(i),s,o)})}getJson(e,i,s=()=>{}){return y(this,null,function*(){let o=yield this.get(e);if(o===null)return null;try{let a=JSON.parse(o);return i?.(a),a}catch(a){return s?.(a),console.error(a),null}})}remove(e,i=()=>{},s=()=>{}){return y(this,null,function*(){e=this._applyPrefix(e);try{return this._config.remove?yield this._config.remove(e,i,s):(localStorage.removeItem(e),i(),!0)}catch(o){return console.error(o),s(o),!1}})}clear(e,i){return y(this,null,function*(){try{return this._config.clear?yield this._config.clear():localStorage.clear(),e?.(),!0}catch(s){return console.error(s),i?.(s),!1}})}_applyPrefix(e){return this._config.prefix&&(e=this._config.prefix+e),this._prefix&&(e=this._prefix+e),e}};t.\u0275fac=function(i){return new(i||t)(m(E,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})(),Ht=class extends Zi{constructor(t){super(),this._config=t,this._url="/api/",this._docs=[],this._perPage=20,this._filteredDocumentsCallbacks=[],this.__httpService=h(Jt),this.__storeService=h(en),this.__alertService=h(Wt),this.__coreService=h(zt),this.__emitterService=h(Yt),this.__networkService=h(Xi),this._signals={},this._fetchingId={},this._onOnline=[],this._randomCount=0,this._config.signalFields=this._config.signalFields||{},this._url+=this._config.name,this.loaded=this.__emitterService.onComplete(this._config.name+"_loaded"),this.getted=this.__emitterService.onComplete(this._config.name+"_getted"),this._config.unauthorized?this.restoreDocs():localStorage.getItem("waw_user")&&JSON.parse(localStorage.getItem("waw_user"))._id===localStorage.getItem(this._config.name+"waw_user_id")&&this.restoreDocs(),this.__emitterService.on("wipe").subscribe(()=>{this.clearDocs(),this._filterDocuments()}),this.__emitterService.on("wacom_online").subscribe(()=>{for(let n of this._onOnline)n();this._onOnline.length=0})}getSignal(t){return this._signals[t]||=this.__coreService.toSignal(this.doc(t)||{_id:t},this._config.signalFields),this._signals[t]}removeSignals(t=[]){for(let n in this._signals)t.includes(n)||delete this._signals[n]}restoreDocs(){return y(this,null,function*(){let t=yield this.__storeService.getJson("docs_"+this._config.name);if(t?.length){this._docs.length=0,this._docs.push(...t),this._filterDocuments();for(let n of this._docs)if(n.__deleted)this.delete(n,n.__options?.delete||{});else if(!n._id)this.create(n,n.__options?.create||{});else if(n.__modified?.length)for(let e of n.__modified)e.startsWith("up")?this.update(n,n.__options?.[e]||{}):this.unique(n,n.__options?.[e]||{});this.__emitterService.complete(this._config.name+"_loaded",this._docs)}})}setDocs(){this.__storeService.setJson("docs_"+this._config.name,this._docs)}getDocs(t=()=>!0){return this._docs.filter(t)}clearDocs(){this._docs.splice(0,this._docs.length),this.setDocs()}addDocs(t){if(Array.isArray(t))for(let n of t)this.addDoc(n)}addDoc(t){this._config.replace&&this._config.replace(t);let n=this._docs.find(e=>this._id(t)&&this._id(e)===this._id(t)||t._localId&&e._localId===t._localId);n?(this.__coreService.copy(t,n),this.__coreService.copy(n,t)):this._docs.push(t),this.setDocs()}new(t={}){return p(c({},t),{_id:void 0,_localId:this._localId(),__created:!1,__modified:!1})}doc(t){let n=this._docs.find(e=>this._id(e)===t||e._localId&&e._localId===Number(t))||this.new({_id:t});return!this._docs.find(e=>this._id(e)===t)&&!this._fetchingId[t]&&(this._fetchingId[t]=!0,setTimeout(()=>{this.fetch({_id:t}).subscribe(e=>{this._fetchingId[t]=!1,e&&this.__coreService.copy(e,n)})})),n}setPerPage(t){this._perPage=t}get(t={},n={}){if(!this.__networkService.isOnline())return new w(o=>{this._onOnline.push(()=>{this.get(t,n).subscribe(o)})});if(!this._config.unauthorized&&localStorage.getItem("waw_user")){let o=JSON.parse(localStorage.getItem("waw_user"));localStorage.setItem(this._config.name+"waw_user_id",o._id)}let e=`${this._url}/get${n.name||""}`,i=(typeof t.page=="number"||t.query?"?":"")+(t.query||"")+(typeof t.page=="number"?`&skip=${this._perPage*(t.page-1)}&limit=${this._perPage}`:""),s=this.__httpService.get(`${e}${i}`);return s.subscribe({next:o=>{o=o||[],typeof t.page!="number"&&this.clearDocs(),o.forEach(a=>this.addDoc(a)),n.callback&&n.callback(o),typeof t.page!="number"&&(this._filterDocuments(),this.__emitterService.complete(this._config.name+"_getted",this._docs)),this.__emitterService.emit(`${this._config.name}_get`,this._docs)},error:o=>{n.errCallback&&n.errCallback(o)}}),s}create(t={},n={}){if(t._id)return this.update(t,n);if(t._localId||=this._localId(),t.__options||={},t.__options.create=n,this.addDoc(t),this._filterDocuments(),!this.__networkService.isOnline())return new w(i=>{this._onOnline.push(()=>{this.create(t,n).subscribe(i)})});if(t.__creating)return new w(i=>{i.error(new Error("Document is currently already creating."))});this._config.appId&&(t.appId=this._config.appId),t.__creating=!0;let e=this.__httpService.post(`${this._url}/create${n.name||""}`,t);return e.subscribe({next:i=>{i?(this.__coreService.copy(i,t),this.addDoc(t),this._filterDocuments(),n.callback&&n.callback(t),n.alert&&this.__alertService.show({unique:`${this._config.name}create`,text:n.alert})):(t.__creating=!1,n.errCallback&&n.errCallback(i)),this.__emitterService.emit(`${this._config.name}_create`,t),this.__emitterService.emit(`${this._config.name}_list`,t),this.__emitterService.emit(`${this._config.name}_changed`,t)},error:i=>{t.__creating=!1,n.errCallback&&n.errCallback(i)}}),e}fetch(t={},n={}){if(!this.__networkService.isOnline())return new w(i=>{this._onOnline.push(()=>{this.fetch(t,n).subscribe(i)})});let e=this.__httpService.post(`${this._url}/fetch${n.name||""}`,t);return e.subscribe({next:i=>{i?(this.addDoc(i),this._filterDocuments(),n.callback&&n.callback(i),n.alert&&this.__alertService.show({unique:`${this._config.name}create`,text:n.alert}),this.__emitterService.emit(`${this._config.name}_changed`,i)):n.errCallback&&n.errCallback(i)},error:i=>{n.errCallback&&n.errCallback(i)}}),e}updateAfterWhile(t,n={}){return new w(e=>{this.__coreService.afterWhile(this._id(t),()=>{this.update(t,n).subscribe({next:i=>{e.next(i)},error:i=>{e.error(i)},complete:()=>{e.complete()}})})})}update(t,n={}){if(this._updateModified(t,"up"+(n.name||""),n),!this.__networkService.isOnline())return new w(i=>{this._onOnline.push(()=>{this.update(t,n).subscribe(i)})});let e=this.__httpService.post(`${this._url}/update${n.name||""}`,t);return e.subscribe({next:i=>{if(i){this._removeModified(t,"up"+(n.name||""));let s=this.doc(t._id);this.__coreService.copy(i,s),this.__coreService.copy(i,t),n.callback&&n.callback(t),n.alert&&this.__alertService.show({unique:`${this._config.name}update`,text:n.alert})}else n.errCallback&&n.errCallback(i);this.__emitterService.emit(`${this._config.name}_update`,t),this.__emitterService.emit(`${this._config.name}_changed`,t)},error:i=>{n.errCallback&&n.errCallback(i)}}),e}unique(t,n={}){if(this._updateModified(t,"un"+(n.name||""),n),!this.__networkService.isOnline())return new w(i=>{this._onOnline.push(()=>{this.unique(t,n).subscribe(i)})});let e=this.__httpService.post(`${this._url}/unique${n.name||""}`,t);return e.subscribe({next:i=>{i?(this._removeModified(t,"un"+(n.name||"")),t[n.name]=i,n.callback&&n.callback(t),n.alert&&this.__alertService.show({unique:`${this._config.name}unique`,text:n.alert})):n.errCallback&&n.errCallback(i),this.__emitterService.emit(`${this._config.name}_unique`,t),this.__emitterService.emit(`${this._config.name}_changed`,t)},error:i=>{n.errCallback&&n.errCallback(i)}}),e}delete(t,n={}){if(t.__deleted=!0,t.__options||={},t.__options.delete=n,this.addDoc(t),this._filterDocuments(),!this.__networkService.isOnline())return new w(i=>{this._onOnline.push(()=>{this.delete(t,n).subscribe(i)})});let e=this.__httpService.post(`${this._url}/delete${n.name||""}`,t);return e.subscribe({next:i=>{i?(this._docs.splice(this._docs.findIndex(s=>this._id(s)===this._id(t)),1),this.setDocs(),this._filterDocuments(),n.callback&&n.callback(t),n.alert&&this.__alertService.show({unique:`${this._config.name}delete`,text:n.alert})):n.errCallback&&n.errCallback(i),this.__emitterService.emit(`${this._config.name}_delete`,t),this.__emitterService.emit(`${this._config.name}_list`,t),this.__emitterService.emit(`${this._config.name}_changed`,t)},error:i=>{n.errCallback&&n.errCallback(i)}}),e}filteredDocuments(t,n={}){let e=()=>{if(Array.isArray(t)){let i=this._docs.filter(s=>!s.__deleted).filter(n.valid??(()=>!0));t.length=0,typeof n.sort=="function"&&(i=i.sort(n.sort)),t.push(...i)}else{let i=t;for(let s in i)for(let o=i[s].length-1;o>=0;o--){let a=typeof n.field=="function"?n.field(i[s][o]):n.field||"author",l=i[s][o];this._docs.find(d=>Array.isArray(d[a])?d[a].includes(l[this._id(d)]):d[a]===l[this._id(d)])||i[s].splice(o,1)}for(let s of this._docs){if(s.__deleted)continue;let o=typeof n.field=="function"?n.field(s):n.field||"author";(typeof n.valid=="function"?!n.valid(s):Array.isArray(s[o])?!s[o]?.length:!s[o])||(typeof n.field=="function"?n.field(s)&&!i[s[o]].find(a=>a._id===s._id)&&i[s[o]].push(s):Array.isArray(s[o])?s[o].forEach(a=>{i[a]=i[a]||[],i[a].find(l=>l._id===s._id)||i[a].push(s)}):(i[s[o]]=i[s[o]]||[],i[s[o]].find(a=>a._id===s._id)||i[s[o]].push(s)))}if(typeof n.sort=="function")for(let s in i)i[s].sort(n.sort)}n.filtered?.(t)};return this._filteredDocumentsCallbacks.push(e),e}_id(t){return t[this._config._id||"_id"]?.toString()}_filterDocuments(){for(let t of this._filteredDocumentsCallbacks)t();this.__emitterService.emit(`${this._config.name}_filtered`)}_updateModified(t,n,e){t.__modified||=[],t.__options||={},t.__options[n]=e,t.__modified.find(i=>i===n)||(t.__modified.push(n),this.addDoc(t))}_removeModified(t,n){t.__modified||=[],t.__modified.find(e=>e===n)&&(t.__modified.splice(t.__modified.findIndex(e=>e===n),1),this.addDoc(t))}_localId(){return+(Date.now()+""+this._randomCount++)}},tn=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=W({type:t,selectors:[["lib-files"]],decls:2,vars:0,consts:[["input",""],["type","file","name","file",3,"id","hidden","accept","multiple"],["type","file","name","file",3,"change","id","hidden","accept","multiple"]],template:function(i,s){i&1&&Se(0,Bi,2,4,"input",1,rt),i&2&&xe(s.fs.files)},dependencies:[ge],encapsulation:2});let r=t;return r})(),ur=(()=>{let t=class t{constructor(e,i){this.dom=e,this.http=i,this.added={},this.files=[],this._component=this.dom.appendComponent(tn,{fs:this})}add(e){if(typeof e=="string"&&(e={id:e}),!e.id){console.log("You have to pass ID into file object");return}if(e.type=e.type||"image",typeof e.resize=="number"&&(e.resize={width:e.resize,height:e.resize}),this.added[e.id]&&(this.files=this.files.filter(i=>i.id!==e.id)),this.files.push(e),this.added[e.id]=e,e.save)return()=>{e.complete?.()}}change(e,i){let s=e.target;s.files&&(i.type==="image"?i.multiple?(i.multiple_cb&&(i.multiple_files=[],i.multiple_counter=s.files.length),Array.from(s.files).forEach(o=>this.process(o,i))):this.process(s.files[0],i):i.type==="file"?(i.multiple&&i.multiple_cb?.(Array.from(s.files).map(o=>({dataUrl:"",file:o}))),Array.from(s.files).forEach(o=>i.cb?.("",o)),(i.part||i.url)&&this.uploadFiles(i,s.files)):console.log("Provide type `image` or `file`"))}remove(e,i,s={},o=()=>{}){if(s.url=i,s.save)return()=>{this.http.post(s.api||`/api/${e}/file/delete`,s,o)};this.http.post(s.api||`/api/${e}/file/delete`,s,o)}uploadFiles(e,i,s=()=>{}){let o=new FormData;e.append?e.append(o,i):i.forEach((l,d)=>o.append(`file[${d}]`,l));let a=typeof e.body=="function"?e.body():e.body||{};Object.entries(a).forEach(([l,d])=>o.append(l,d)),e.save?e.complete=()=>{this.http.post(e.api||`/api/${e.part}/file${e.name?`/${e.name}`:""}`,o,l=>{e.resp?.(l),s(l)})}:this.http.post(e.api||`/api/${e.part}/file${e.name?`/${e.name}`:""}`,o,l=>{e.resp?.(l),s(l)})}image(e,i=()=>{}){if(e.save)return()=>{this.http.post(e.api||`/api/${e.part}/file${e.name?`/${e.name}`:""}`,e,i)};this.http.post(e.api||`/api/${e.part}/file${e.name?`/${e.name}`:""}`,e,i)}update(e,i,s){if(i.cb?.(e,s),i.multiple_cb&&(i.multiple_files.push({dataUrl:e,file:s}),--i.multiple_counter===0&&i.multiple_cb(i.multiple_files)),!i.part)return;let o=typeof i.body=="function"?i.body():i.body||{};o.dataUrl=e,i.save?i.complete=()=>{this.http.post(i.api||`/api/${i.part}/file${i.name?`/${i.name}`:""}`,o,a=>{i.cb?.(a)})}:this.http.post(i.api||`/api/${i.part}/file${i.name?`/${i.name}`:""}`,o,a=>{i.cb?.(a)})}process(e,i){if(!e.type.startsWith("image/")){i.cb?.(!1,e),i.multiple_cb&&(i.multiple_files.push({dataUrl:"",file:e}),--i.multiple_counter===0&&i.multiple_cb(i.multiple_files));return}i.resize&&(i.resize.width=i.resize.width||1920,i.resize.height=i.resize.height||1080);let s=new FileReader;s.onload=o=>{if(!i.resize)return this.update(o.target?.result,i,e);let a=document.createElement("canvas"),l=document.createElement("img");l.onload=()=>{if(l.width<=i.resize.width&&l.height<=i.resize.height)return this.update(o.target?.result,i,e);let d=i.resize.width/i.resize.height,u=l.width/l.height,f,L;u>d?(f=Math.min(i.resize.width,l.width),L=f/u):(L=Math.min(i.resize.height,l.height),f=L*u),a.width=f,a.height=L,a.getContext("2d")?.drawImage(l,0,0,f,L);let Zt=a.toDataURL("image/jpeg",1);this.update(Zt,i,e)},l.src=o.target?.result},s.readAsDataURL(e)}destroy(){this._component.remove()}};t.\u0275fac=function(i){return new(i||t)(m(Ue),m(Jt))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var dr=(()=>{let t=class t{constructor(e,i){this._dom=i,this._modals=[],this._config=c(c({},Hi),e?.modal||{})}show(e){if(e=this._opts(e),e.unique&&this._modals.find(o=>o.unique===e.unique))return this._modals.find(o=>o.unique===e.unique);this._modals.push(e),e.class||="",e.id||=Math.floor(Math.random()*Date.now())+Date.now(),document.body.classList.add("modalOpened");let i,s;return e.close=()=>{s?.remove(),s=void 0,i?.remove(),i=void 0,typeof e.onClose=="function"&&e.onClose(),this._modals.splice(this._modals.findIndex(o=>o.id===e.id),1),this._modals.length||document.body.classList.remove("modalOpened")},typeof e.timeout=="number"&&e.timeout>0&&setTimeout(e.close,e.timeout),i=this._dom.appendComponent(Ji,e),s=this._dom.appendComponent(e.component,e,i.nativeElement.children[0].children[0].children[0]),e}open(e){this.show(e)}small(e){e=this._opts(e),e.size="small",this.show(e)}mid(e){e=this._opts(e),e.size="mid",this.show(e)}big(e){e=this._opts(e),e.size="big",this.show(e)}full(e){e=this._opts(e),e.size="full",this.show(e)}destroy(){for(let e=this._modals.length-1;e>=0;e--)this._modals[e].close?.()}_opts(e){return typeof e=="function"?p(c({},this._config),{component:e}):p(c(c({},this._config),e),{component:e.component})}};t.\u0275fac=function(i){return new(i||t)(m(E,8),m(Ue))},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var hr=(()=>{let t=class t{constructor(){this._storageKey="css_variables",this._css={},this._cssSig=g({}),this._forms=new Map,this.var={},this._loadCss();for(let e of Object.keys(this._css))this._setProperty(e,this._css[e]);this._cssSig.set(c({},this._css))}formSignal(e){let i=this._forms.get(e);return i||(i=g({}),this._forms.set(e,i)),i}form(e){let i=this.formSignal(e),s=i();if(s&&typeof s=="object")return s;let o={};return i.set(o),o}hasForm(e){return this._forms.has(e)}clearForm(e){this._forms.delete(e)}valid(e,i="email",s=0){switch(i){case"email":return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,10})+$/.test(e||"");case"text":return typeof e=="string";case"array":return Array.isArray(e);case"object":return typeof e=="object"&&!Array.isArray(e)&&e!==null;case"number":return typeof e=="number"&&Number.isFinite(e);case"password":if(!e)return!1;switch(s){case 1:return/^((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9]))/.test(e);case 2:return/^(((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{8,})/.test(e);case 3:return/^((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]))(?=.{8,})/.test(e);case 4:return/^((?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[@#$%&!\-_]))(?=.{8,})/.test(e);default:return!!e}}}level(e=""){if(!e)return 0;let i=0;return e.length>8&&i++,/[a-z]/.test(e)&&i++,/[A-Z]/.test(e)&&i++,/[0-9]/.test(e)&&i++,/[`~!@#$%^&*()_\-+=\[\]{};:'",.<>/?\\|]/.test(e)&&i++,i}setCss(e,i={}){typeof i=="string"&&(i=i==="local"?{local:!0}:{host:i});let{local:s=!1,host:o}=i;if(!(o&&typeof window<"u"&&window.location.host!==o)){for(let a of Object.keys(e)){let l=e[a];if(s)this._css[a]=l;else if(this._css[a]){this._setProperty(a,this._css[a]);continue}this._setProperty(a,l)}s&&(this._saveCss(),this._cssSig.set(c({},this._css)))}}getCss(){return c({},this._css)}cssSignal(){return this._cssSig}removeCss(e){let i=Array.isArray(e)?e:e.split(" ");for(let s of i)delete this._css[s];this._saveCss(),this._cssSig.set(c({},this._css))}arr(e=10,i="number"){let s=[];for(let o=0;o<e;o++)switch(i){case"number":s.push(o+1);break;case"text":s.push(this.text());break;case"date":s.push(new Date(Date.now()+o*864e5));break;default:s.push(i)}return s}text(e=10){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s="";for(let o=0;o<e;o++)s+=i.charAt(Math.floor(Math.random()*i.length));return s}_saveCss(){try{typeof localStorage<"u"&&localStorage.setItem(this._storageKey,JSON.stringify(this._css))}catch{}}_loadCss(){try{if(typeof localStorage<"u"){let e=localStorage.getItem(this._storageKey);this._css=e?JSON.parse(e):{}}}catch{this._css={}}}_setProperty(e,i){try{typeof document<"u"&&document.documentElement.style.setProperty(e,i)}catch{}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})(),nn=()=>Qe(()=>{let r=h(et),t=h(E);r?.documentElement?.style.setProperty("--wacom-primary",t.theme?.primary||M.theme?.primary||""),r?.documentElement?.style.setProperty("--wacom-secondary",t.theme?.secondary||M.theme?.secondary||""),r?.documentElement?.style.setProperty("--wacom-info",t.theme?.info||M.theme?.info||""),r?.documentElement?.style.setProperty("--wacom-error",t.theme?.error||M.theme?.error||""),r?.documentElement?.style.setProperty("--wacom-success",t.theme?.success||M.theme?.success||""),r?.documentElement?.style.setProperty("--wacom-warning",t.theme?.warning||M.theme?.warning||""),r?.documentElement?.style.setProperty("--wacom-question",t.theme?.question||M.theme?.question||"")});function fr(r=M){return Ke([{provide:E,useValue:r},Ct(Dt()),nn()])}var gr={roles:[],production:!0,appId:"appId",url:"https://api.webart.work",sign:{logo:"",email:"",password:""},image:{default:"https://ngx.webart.work/assets/logo.png",logo:"https://ngx.webart.work/assets/logo.png"},meta:{title:"Web Art Work",description:"An amazing solution to build web or mobile app for your business",favicon:"https://ngx.webart.work/assets/favicon.ico",image:"https://ngx.webart.work/assets/logo.png"},defaultLanguageCode:"en",languages:[{name:"Ukrainian",origin:"\u0443\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430",code:"uk"},{code:"en",name:"English",origin:"English"}]};export{be as a,ei as b,Nt as c,Nn as d,xi as e,Ii as f,Rn as g,lr as h,Wt as i,zt as j,qt as k,cr as l,Yt as m,Jt as n,en as o,Ht as p,ur as q,dr as r,hr as s,fr as t,gr as u};
