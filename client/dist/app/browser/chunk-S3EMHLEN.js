import{a as M}from"./chunk-SYBEMF4V.js";import{b as V,e as F}from"./chunk-HTMOC5FV.js";import{$ as _,Ba as C,G as l,H as r,K as v,L as S,Na as k,O as w,Q as m,Ra as y,U as n,V as o,Z as h,_ as a,bb as b,cb as I,db as x,gb as E,ha as f,ib as j,r as g,rb as P,sb as T,w as p,x as d}from"./chunk-7WP2SVVU.js";function R(t,N){if(t&1){let e=h();n(0,"span",9),a("click",function(){p(e);let i=_();return d(i.us.setMode("dark"))}),f(1," dark_mode "),o()}}function A(t,N){if(t&1){let e=h();n(0,"span",10),a("click",function(){p(e);let i=_();return d(i.us.setMode())}),f(1," light_mode "),o()}}var L=(()=>{class t{constructor(e,s,i,c,U,q,B,D){this.us=e,this.ui=s,this._alert=i,this._http=c,this._hash=U,this._router=q,this._form=B,this._translate=D,this.form=this._form.getForm("sign",{formId:"sign",title:"Sign In / Sign Up",components:[{name:"Email",key:"email",focused:!0,required:!0,fields:[{name:"Placeholder",value:"Enter your email"},{name:"Label",value:"Email"}]},{name:"Password",key:"password",required:!0,fields:[{name:"Placeholder",value:"Enter your password"},{name:"Label",value:"Password"}]},{name:"Number",key:"resetPin",fields:[{name:"Placeholder",value:"Enter code from email"},{name:"Label",value:"code"}],hidden:!0},{name:"Button",fields:[{name:"Label",value:"Let's go"},{name:"Submit",value:!0},{name:"Click",value:()=>{this.submit()}}]}]}),this.user={email:"ceo@webart.work",password:"asdasdasdasd",resetPin:null},this._set=u=>{u?(localStorage.setItem("waw_user",JSON.stringify(u)),this.us.setUser(u),this.us.get(),this._router.navigateByUrl("/profile")):this._alert.error({text:"Something went wrong"})}}submit(){!this.form.components[2].hidden&&this.user.resetPin?this.save():this.user.email||this._alert.error({text:this._translate.translate("Sign.Enter your email")}),this.ui.valid(this.user.email)?this.user.password?(this._hash.set("email",this.user.email),this._http.post("/api/user/status",this.user,e=>{e.email&&e.pass?this.login():e.email?this.reset():this.sign()})):this._alert.error({text:this._translate.translate("Sign.Enter your password")}):this._alert.error({text:this._translate.translate("Sign.Enter proper email")})}login(){this._http.post("/api/user/login",this.user,this._set.bind(this))}sign(){this._http.post("/api/user/sign",this.user,this._set.bind(this))}reset(){this._http.post("/api/user/request",this.user,()=>{this.form.components[2].hidden=!1}),this._alert.info({text:"Mail will sent to your email"})}save(){this._http.post("/api/user/change",this.user,e=>{e?this._alert.info({text:"Password successfully changed"}):this._alert.error({text:"Wrong Code"}),this.login()})}static{this.\u0275fac=function(s){return new(s||t)(r(M),r(E),r(x),r(b),r(I),r(k),r(P),r(j))}}static{this.\u0275cmp=v({type:t,selectors:[["ng-component"]],standalone:!1,decls:9,vars:4,consts:[[1,"auth-wrapper"],[1,"auth__wrap"],[1,"auth__img"],[3,"click"],[1,"auth__form"],[1,"auth"],["class","material-icons",3,"click",4,"ngIf"],["class","material-icons auth__icon",3,"click",4,"ngIf"],[3,"wSubmit","submition","config"],[1,"material-icons",3,"click"],[1,"material-icons","auth__icon",3,"click"]],template:function(s,i){s&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"icon-spider",3),a("click",function(){return i.us.setMode(i.us.mode?"":"dark")}),o()(),n(4,"div",4)(5,"div",5),w(6,R,2,0,"span",6)(7,A,2,0,"span",7),n(8,"wform",8),a("wSubmit",function(){return i.submit()}),o()()()()()),s&2&&(l(6),m("ngIf",!i.us.mode),l(),m("ngIf",i.us.mode),l(),m("submition",i.user)("config",i.form))},dependencies:[C,T,V],encapsulation:2})}}return t})();var J=[{path:"",component:L}],ie=(()=>{class t{static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275mod=S({type:t})}static{this.\u0275inj=g({imports:[y.forChild(J),F]})}}return t})();export{ie as SignModule};
