"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[367],{5367:(C,h,o)=>{o.r(h),o.d(h,{SignModule:()=>S});var g=o(4596),t=o(865),p=o(3611),l=o(2868),d=o(7524),a=o(9010),m=o(6019);const f=["email"],c=["password"];function w(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"span",5),t._uU(2,"Code:"),t.qZA(),t.TgZ(3,"input",13),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().user.code=n}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.user.code)}}const _=[{path:"",component:(()=>{class i{constructor(e,s,n,r,v){this.router=e,this.hash=s,this.us=n,this.http=r,this.alert=v,this.user={},this.reseting=!1,this.user.email=this.hash.get("email")||"ceo@webart.work",this.user.password=this.hash.get("password")||"asdasdasdasd"}email_focus(){setTimeout(()=>{this.email.nativeElement.focus()},100)}password_focus(){setTimeout(()=>{this.password.nativeElement.focus()},100)}submit(){return this.reseting&&this.user.code?this.save():this.user.email?(this.hash.set("email",this.user.email),this.user.password?void this.http.post("/api/user/status",this.user,e=>{e.email&&e.pass?this.login():e.email?this.reset():this.sign()}):(this.alert.error({text:"Enter your password"}),this.password_focus())):(this.alert.error({text:"Enter your email"}),this.email_focus())}login(){this.http.post("/api/user/login",this.user,e=>{if(!e)return this.alert.error({text:"Something went wrong"});this.us.user=e,localStorage.setItem("waw_user",JSON.stringify(e)),this.router.navigate(["/profile"])})}sign(){this.http.post("/api/user/signup",this.user,e=>{if(!e)return this.alert.error({text:"Something went wrong"});this.us.user=e,localStorage.setItem("waw_user",JSON.stringify(e)),this.router.navigate(["/profile"])})}reset(){this.http.post("/api/user/request",this.user,e=>{this.reseting=!0}),this.alert.info({text:"Mail will sent to your email"})}save(){this.http.post("/api/user/change",this.user,e=>{this.alert.info({text:e}),"Password successfully changed."==e&&this.http.post("/api/user/login",this.user,s=>{if(!s)return this.alert.error({text:"Something went wrong"});this.us.user=s,localStorage.setItem("waw_user",JSON.stringify(s)),this.router.navigate(["/profile"])})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.F0),t.Y36(l.ol),t.Y36(d.KD),t.Y36(l.OE),t.Y36(l.c9))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sign"]],viewQuery:function(e,s){if(1&e&&(t.Gf(f,5),t.Gf(c,5)),2&e){let n;t.iGM(n=t.CRH())&&(s.email=n.first),t.iGM(n=t.CRH())&&(s.password=n.first)}},decls:19,vars:3,consts:[[1,"auth-wrapper"],[1,"auth"],[1,"auth__title"],[1,"auth__forms",3,"ngSubmit"],[1,"forms"],[1,"forms__title"],["type","text","placeholder","Email","name","email",1,"forms__input",3,"ngModel","keydown.enter","ngModelChange"],["email",""],["type","password","placeholder","Password","name","password",1,"forms__input",3,"ngModel","ngModelChange"],["password",""],["class","forms",4,"ngIf"],[1,"auth__btn"],["type","submit",1,"btn","_primary"],["type","text","placeholder","Code","name","code",1,"forms__input",3,"ngModel","ngModelChange"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3,"Sign"),t.qZA(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return s.submit()}),t.TgZ(5,"div",4),t.TgZ(6,"span",5),t._uU(7,"Email:"),t.qZA(),t.TgZ(8,"input",6,7),t.NdJ("keydown.enter",function(){return!s.user.password&&s.password_focus()})("ngModelChange",function(r){return s.user.email=r}),t.qZA(),t.qZA(),t.TgZ(10,"div",4),t.TgZ(11,"span",5),t._uU(12,"Password:"),t.qZA(),t.TgZ(13,"input",8,9),t.NdJ("ngModelChange",function(r){return s.user.password=r}),t.qZA(),t.qZA(),t.YNc(15,w,4,1,"div",10),t.TgZ(16,"div",11),t.TgZ(17,"button",12),t._uU(18,"Sign"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(8),t.Q6J("ngModel",s.user.email),t.xp6(5),t.Q6J("ngModel",s.user.password),t.xp6(2),t.Q6J("ngIf",s.reseting))},directives:[a._Y,a.JL,a.F,a.Fj,a.JJ,a.On,m.O5],styles:["[_nghost-%COMP%]{position:fixed;width:100%;height:100%;overflow-y:auto;display:flex;flex-direction:column}"]}),i})()}];let S=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[],imports:[[p.Bz.forChild(_),g.I]]}),i})()}}]);