import{c as tt}from"./chunk-2SLBFLKS.js";import{A as z,C as ke,Ca as te,D as E,E as ge,Ea as Ye,F as m,G as Z,H as J,Ha as se,I as l,Ia as Xe,J as p,K as d,L as Le,La as ce,M as Ve,Ma as qe,N,Na as ie,O as w,Oa as Ge,P as f,Pa as Ke,Q as He,R as Be,S as We,Sa as $,T as ue,Ta as T,U as xe,Ua as le,V as Ce,W as O,Wa as Ze,X as Y,Xa as Je,Ya as pe,Za as $e,a as L,ab as et,b as Re,d as V,da as Ue,e as ee,ea as De,f as fe,g as ze,ga as I,h as Oe,ha as Pe,ia as X,j as Q,ja as S,k as v,l as H,m as _,n as b,na as je,oa as Qe,q as Ee,qa as Ne,r as x,s as C,t as Te,v as U,x as q,y as Fe,z as u}from"./chunk-ZHX44H7W.js";var It=["*"];function Rt(r,n){if(r&1&&d(0,"img",5),r&2){let t=f();We("src",t.image,q)}}function zt(r,n){if(r&1&&(l(0,"h1",6),O(1),p()),r&2){let t=f();u(),Y(t.title)}}function Ot(r,n){if(r&1&&(l(0,"span",7),O(1),p()),r&2){let t=f();u(),Y(t.subtitle)}}function Et(r,n){if(r&1&&(l(0,"p",8),O(1),p()),r&2){let t=f();u(),Y(t.text)}}var si=(()=>{let n=class n{constructor(){this.padding=!1,this.align="center",this.image=!1}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=_({type:n,selectors:[["wcard"]],inputs:{padding:"padding",align:"align",image:"image",title:"title",subtitle:"subtitle",text:"text"},ngContentSelectors:It,decls:6,vars:6,consts:[[1,"w-card"],["alt","","class","w-card__img",3,"src",4,"ngIf"],["class","w-card__title",4,"ngIf"],["class","w-card__subtitle",4,"ngIf"],["class","w-card__text",4,"ngIf"],["alt","",1,"w-card__img",3,"src"],[1,"w-card__title"],[1,"w-card__subtitle"],[1,"w-card__text"]],template:function(i,o){i&1&&(He(),l(0,"div",0),E(1,Rt,1,1,"img",1)(2,zt,2,1,"h1",2)(3,Ot,2,1,"span",3)(4,Et,2,1,"p",4),Be(5),p()),i&2&&(J("_pd",o.padding),u(),m("ngIf",o.image),u(),m("ngIf",o.title),u(),m("ngIf",o.subtitle),u(),m("ngIf",o.text))},dependencies:[X],styles:[".w-card[_ngcontent-%COMP%]{background:var(--c-bg-secondary);border-radius:var(--b-radius-card);position:relative}.w-card._pd[_ngcontent-%COMP%]{padding:20px}.w-card._align[_ngcontent-%COMP%]{text-align:center}.w-card__title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:10px}.w-card__subtitle[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin-bottom:10px}.w-card__text[_ngcontent-%COMP%]{font-size:14px}.w-card__img[_ngcontent-%COMP%]{width:100%}@media (max-width: 991.9px){.w-card[_ngcontent-%COMP%]{border-radius:0}}"]});let r=n;return r})();var it=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=b({type:n}),n.\u0275inj=v({imports:[te,S,ie]});let r=n;return r})();var Tt=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=_({type:n,selectors:[["icon-spider"]],decls:30,vars:0,consts:[["viewBox","0 0 72 84","width","300px","height","300px","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M29.7441 38.2845C29.7441 38.2845 31.8474 35.0824 33.6034 33.46C35.2166 31.9737 35.9191 31.6079 36.0232 31.5575C36.1314 31.6079 36.8298 31.9737 38.443 33.46C40.1991 35.0824 42.3025 38.2845 42.3025 38.2845C42.3025 38.2845 47.196 35.9266 47.196 29.1802C47.196 22.4337 42.8736 18.9516 42.8736 18.9516C47.9679 27.7872 43.1013 33.2694 43.1013 33.2694C43.1013 33.2694 42.1364 33.1137 40.3998 31.0165C39.0996 29.5517 37.6333 28.246 36.031 27.126V27.1064V27.126C34.4245 28.2391 32.953 29.5384 31.6468 30.9971C29.9139 33.0942 28.9452 33.2498 28.9452 33.2498C28.9452 33.2498 24.0746 27.7679 29.1691 18.9321C29.1691 18.9321 24.8504 22.3948 24.8504 29.1607C24.8504 35.9266 29.7441 38.2845 29.7441 38.2845Z","fill","url(#paint0_linear_5_30)"],["d","M31.1333 41.3775C30.7938 44.101 32.322 45.2097 32.322 45.2097C32.3393 44.5685 32.4233 43.9308 32.5729 43.3072C32.7736 42.7159 33.8967 41.3618 35.0583 41.3618H36.988C38.1459 41.3618 39.2727 42.7003 39.4772 43.3072C39.6241 43.9312 39.707 44.5688 39.7242 45.2097C39.7242 45.2097 41.268 44.101 40.9167 41.3775C40.5965 38.8135 36.5132 35.3236 36.0464 34.9306V34.8917H36.0232H36V34.9306C35.533 35.3236 31.4499 38.8135 31.1333 41.3775Z","fill","url(#paint1_linear_5_30)"],["d","M43.2673 45.91C42.5186 47.5046 41.2429 48.7867 39.6587 49.5362C39.6587 49.5362 36.2085 44.7117 36.0386 44.5639V44.5406V44.5639C35.8688 44.7117 32.4224 49.5362 32.4224 49.5362C30.8254 48.7934 29.5365 47.5106 28.7792 45.91C27.6832 43.3578 28.7792 40.0742 28.7792 40.0742C27.8222 40.9534 25.823 45.91 28.0074 49.7775C28.644 50.9108 29.5247 51.8858 30.5848 52.6305C31.6448 53.3753 32.857 53.8708 34.1322 54.0805C34.1322 54.0805 33.395 52.9756 34.0125 51.1587C34.3557 50.1073 35.0716 49.2207 36.0232 48.6687C36.9748 49.2207 37.6907 50.1073 38.034 51.1587C38.6552 52.9756 37.9143 54.0805 37.9143 54.0805C39.1933 53.8718 40.4095 53.3761 41.473 52.6299C42.5364 51.8838 43.4201 50.9063 44.0583 49.7696C46.2235 45.879 44.2244 40.9456 43.2866 40.0663C43.2673 40.0742 44.3827 43.3578 43.2673 45.91Z","fill","url(#paint2_linear_5_30)"],["d","M18.7064 30.4135C19.2274 31.2189 25.8191 39.9729 25.8191 39.9729C25.8191 39.9729 27.1042 37.4868 25.9232 36.0005C24.7424 34.5144 21.5507 30.3474 20.9486 29.363C20.4509 28.4918 20.1627 27.515 20.1073 26.5111C20.034 25.6902 19.0767 14.6757 19.0767 14.6757C19.8965 11.6482 21.2001 8.77554 22.9362 6.17063C24.3439 4.00548 25.9018 1.94346 27.5982 0C27.5982 0 23.0403 3.23317 20.4314 7.2717C18.8838 9.64045 17.6645 12.2114 16.8074 14.913C16.8074 14.913 17.4134 24.6125 17.5407 26.5189C17.5809 27.8983 17.9831 29.2421 18.7064 30.4135Z","fill","url(#paint3_linear_5_30)"],["d","M19.0923 59.368C19.0923 59.368 19.0923 57.6639 20.1227 54.7848C21.1531 51.9056 24.7539 45.416 24.7539 45.416L25.0279 40.8056L24.3139 39.8095C24.3139 39.8095 19.096 37.7863 16.9811 36.6464C14.8663 35.5064 14.3105 35.1952 14.3105 35.1952C13.5116 33.6583 12.8328 32.0608 12.2805 30.4174C11.1922 27.3555 10.7599 25.9625 10.7599 25.9625C10.5214 22.9704 10.4609 19.9668 10.5785 16.9673C10.7599 11.781 11.0301 10.1158 11.0301 10.1158C11.0301 10.1158 9.72946 12.0067 9.15056 16.4031C8.57166 20.7996 8.44816 26.2622 8.44816 26.2622L11.7054 36.6152C11.7054 36.6152 14.407 38.4827 17.9074 40.4204C19.0234 41.0646 20.2047 41.5863 21.431 41.9767L12.4464 43.3735L3.91342 50.7658C2.51875 53.6073 1.48155 56.6135 0.825943 59.7142C-0.277831 64.9084 0.0540732 70.581 0.0540732 70.581C0.0540732 70.581 1.39713 64.9084 2.99104 59.8194C4.58495 54.7304 5.95501 52.3647 5.95501 52.3647L13.6737 46.3343L19.787 45.7468L15.0708 57.8078C15.0708 57.8078 15.0283 59.3641 15.7037 62.8657C16.3792 66.3673 19.266 75.67 19.266 75.67L26.6296 84L27.3397 83.8715L21.7822 74.6156L19.0923 59.368Z","fill","url(#paint4_linear_5_30)"],["d","M52.923 14.6757C52.923 14.6757 51.9659 25.6786 51.8888 26.5111C51.8333 27.515 51.5451 28.4918 51.0475 29.363C50.4492 30.3513 47.2537 34.5105 46.0728 36.0005C44.8918 37.4907 46.1769 39.9729 46.1769 39.9729C46.1769 39.9729 52.7725 31.2189 53.2936 30.4135C54.0144 29.2429 54.4139 27.9002 54.4514 26.5228C54.5826 24.6164 55.1886 14.9169 55.1886 14.9169C54.3296 12.216 53.1105 9.64533 51.5646 7.27559C48.9596 3.23317 44.4017 0 44.4017 0C46.1041 1.94244 47.6672 4.00452 49.0791 6.17063C50.8088 8.7772 52.1069 11.6496 52.923 14.6757Z","fill","url(#paint5_linear_5_30)"],["d","M71.1821 59.7027C70.5274 56.6015 69.4902 53.5952 68.0945 50.7541L59.5576 43.3617L50.5576 41.9689C51.7828 41.5784 52.9627 41.0566 54.0774 40.4126C57.5932 38.4673 60.2833 36.6075 60.2833 36.6075L63.5366 26.2544C63.5366 26.2544 63.4132 20.8074 62.8343 16.3992C62.2554 11.9911 60.9779 10.1158 60.9779 10.1158C60.9779 10.1158 61.248 11.7771 61.4295 16.9634C61.5448 19.9628 61.4841 22.9665 61.248 25.9586C61.248 25.9586 60.8081 27.3516 59.7313 30.4135C59.179 32.0569 58.5003 33.6544 57.7014 35.1913C57.7014 35.1913 57.1456 35.4986 55.0307 36.6425C52.9158 37.7863 47.6979 39.8056 47.6979 39.8056L46.9839 40.8017L47.2541 45.4121C47.2541 45.4121 50.8664 51.9017 51.8853 54.7808C52.9041 57.66 52.9158 59.3641 52.9158 59.3641L50.2142 74.6117L44.6528 83.8715L45.3629 84L52.7305 75.6778C52.7305 75.6778 55.6134 66.3868 56.2927 62.8735C56.972 59.3603 56.9256 57.8156 56.9256 57.8156L52.2094 45.7544L58.3189 46.3419L66.0375 52.3725C66.0375 52.3725 67.4115 54.738 69.0054 59.8272C70.5993 64.9162 71.9423 70.5888 71.9423 70.5888C71.9423 70.5888 72.2896 64.8967 71.1821 59.7027Z","fill","url(#paint6_linear_5_30)"],["id","paint0_linear_5_30","x1","36.0232","y1","18.9321","x2","36.0232","y2","38.2845","gradientUnits","userSpaceOnUse"],["stop-color","#F6C93C"],["offset","1","stop-color","#A79F1E"],["id","paint1_linear_5_30","x1","36.0264","y1","34.8917","x2","36.0264","y2","45.2097","gradientUnits","userSpaceOnUse"],["id","paint2_linear_5_30","x1","36.0264","y1","40.0663","x2","36.0264","y2","54.0805","gradientUnits","userSpaceOnUse"],["id","paint3_linear_5_30","x1","22.2029","y1","0","x2","22.2029","y2","39.9729","gradientUnits","userSpaceOnUse"],["id","paint4_linear_5_30","x1","13.6735","y1","10.1158","x2","13.6735","y2","84","gradientUnits","userSpaceOnUse"],["id","paint5_linear_5_30","x1","49.7951","y1","0","x2","49.7951","y2","39.9729","gradientUnits","userSpaceOnUse"],["id","paint6_linear_5_30","x1","58.3234","y1","10.1158","x2","58.3234","y2","84","gradientUnits","userSpaceOnUse"]],template:function(i,o){i&1&&(Te(),l(0,"svg",0),d(1,"path",1)(2,"path",2)(3,"path",3)(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),l(8,"defs")(9,"linearGradient",8),d(10,"stop",9)(11,"stop",10),p(),l(12,"linearGradient",11),d(13,"stop",9)(14,"stop",10),p(),l(15,"linearGradient",12),d(16,"stop",9)(17,"stop",10),p(),l(18,"linearGradient",13),d(19,"stop",9)(20,"stop",10),p(),l(21,"linearGradient",14),d(22,"stop",9)(23,"stop",10),p(),l(24,"linearGradient",15),d(25,"stop",9)(26,"stop",10),p(),l(27,"linearGradient",16),d(28,"stop",9)(29,"stop",10),p()()())}});let r=n;return r})();var ot=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=b({type:n}),n.\u0275inj=v({});let r=n;return r})();var nt=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=b({type:n}),n.\u0275inj=v({imports:[S,$]});let r=n;return r})();var rt=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=b({type:n}),n.\u0275inj=v({imports:[S]});let r=n;return r})();var at=(()=>{let n=class n{constructor(e){this._file=e,this._file.add({id:"formPhoto",accept:"image/*",resize:1920,cb:i=>{typeof i=="string"&&typeof this.setFile=="function"&&this.setFile(i)}}),this._file.add({id:"formPhotos",accept:"image/*",multiple:!0,resize:1920,cb:i=>{typeof i=="string"&&typeof this.setFile=="function"&&this.setFile(i)}})}};n.\u0275fac=function(i){return new(i||n)(H(ce))},n.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"});let r=n;return r})();var kt=["wrapper"],Lt=["sourceImage"];function Vt(r,n){if(r&1){let t=N();l(0,"img",5,1),w("load",function(){x(t);let i=f();return C(i.imageLoadedInView())})("mousedown",function(i){x(t);let o=f();return C(o.startMove(i,o.moveTypes.Drag))})("touchstart",function(i){x(t);let o=f();return C(o.startMove(i,o.moveTypes.Drag))})("error",function(i){x(t);let o=f();return C(o.loadImageError(i))}),p()}if(r&2){let t=f();Z("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),J("ngx-ic-draggable",!t.disabled&&t.allowMoveImage),m("src",t.safeImgDataUrl,q),ge("alt",t.imageAltText)}}function Ht(r,n){if(r&1){let t=N();Le(0),l(1,"span",9),w("mousedown",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"topleft"))})("touchstart",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"topleft"))}),d(2,"span",10),p(),l(3,"span",11),d(4,"span",10),p(),l(5,"span",12),w("mousedown",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"topright"))})("touchstart",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"topright"))}),d(6,"span",10),p(),l(7,"span",13),d(8,"span",10),p(),l(9,"span",14),w("mousedown",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"bottomright"))})("touchstart",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"bottomright"))}),d(10,"span",10),p(),l(11,"span",15),d(12,"span",10),p(),l(13,"span",16),w("mousedown",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"bottomleft"))})("touchstart",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"bottomleft"))}),d(14,"span",10),p(),l(15,"span",17),d(16,"span",10),p(),l(17,"span",18),w("mousedown",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"top"))})("touchstart",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"top"))}),p(),l(18,"span",19),w("mousedown",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"right"))})("touchstart",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"right"))}),p(),l(19,"span",20),w("mousedown",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"bottom"))})("touchstart",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"bottom"))}),p(),l(20,"span",21),w("mousedown",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"left"))})("touchstart",function(i){x(t);let o=f(2);return C(o.startMove(i,o.moveTypes.Resize,"left"))}),p(),Ve()}}function Bt(r,n){if(r&1){let t=N();l(0,"div",6),w("keydown",function(i){x(t);let o=f();return C(o.keyboardAccess(i))}),l(1,"div",7),w("mousedown",function(i){x(t);let o=f();return C(o.startMove(i,o.moveTypes.Move))})("touchstart",function(i){x(t);let o=f();return C(o.startMove(i,o.moveTypes.Move))}),p(),E(2,Ht,21,0,"ng-container",8),p()}if(r&2){let t=f();Z("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left",t.alignImage==="center"?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),J("ngx-ic-round",t.roundCropper),ge("aria-label",t.cropperFrameAriaLabel),u(2),m("ngIf",!t.hideResizeSquares)}}var we=class{constructor(){this.format="png",this.output="blob",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperFrameAriaLabel="Crop photo",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(n){Object.keys(n).filter(t=>t in this).forEach(t=>this[t]=n[t]),this.validateOptions()}setOptionsFromChanges(n){Object.keys(n).filter(t=>t in this).forEach(t=>this[t]=n[t].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}},F=function(r){return r.Drag="drag",r.Move="move",r.Resize="resize",r.Pinch="pinch",r}(F||{});function Wt(r){switch(r){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}function Ut(r){switch(r){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}function Dt(r,n){switch(r){case"ArrowUp":return{clientX:0,clientY:n*-1};case"ArrowRight":return{clientX:n,clientY:0};case"ArrowDown":return{clientX:0,clientY:n};case"ArrowLeft":default:return{clientX:n*-1,clientY:0}}}function Pt(r,n,t){let e=r.width,i=r.height;n=Math.round(n),t=Math.round(t);let o=e/n,a=i/t,s=Math.ceil(o/2),c=Math.ceil(a/2),h=r.getContext("2d");if(h){let g=h.getImageData(0,0,e,i),y=h.createImageData(n,t),A=g.data,W=y.data;for(let P=0;P<t;P++)for(let j=0;j<n;j++){let B=(j+P*n)*4,k=P*a,R=0,ne=0,ye=0,Me=0,ve=0,be=0,Ae=0,vt=Math.floor(j*o),bt=Math.floor(P*a),he=Math.ceil((j+1)*o),de=Math.ceil((P+1)*a);he=Math.min(he,e),de=Math.min(de,i);for(let re=bt;re<de;re++){let Se=Math.abs(k-re)/c,At=j*o,St=Se*Se;for(let ae=vt;ae<he;ae++){let Ie=Math.abs(At-ae)/s,G=Math.sqrt(St+Ie*Ie);if(G>=1)continue;R=2*G*G*G-3*G*G+1;let K=4*(ae+re*e);Ae+=R*A[K+3],ye+=R,A[K+3]<255&&(R=R*A[K+3]/250),Me+=R*A[K],ve+=R*A[K+1],be+=R*A[K+2],ne+=R}}W[B]=Me/ne,W[B+1]=ve/ne,W[B+2]=be/ne,W[B+3]=Ae/ye}r.width=n,r.height=t,h.putImageData(y,0,0)}}function st(r,n){return r/100*n}var jt=(()=>{class r{crop(t,e,i,o,a){let s=this.getImagePosition(t,e,i,a),c=s.x2-s.x1,h=s.y2-s.y1,g=document.createElement("canvas");g.width=c,g.height=h;let y=g.getContext("2d");if(!y)return null;i.backgroundColor!=null&&(y.fillStyle=i.backgroundColor,y.fillRect(0,0,c,h));let A=(i.transform.scale||1)*(i.transform.flipH?-1:1),W=(i.transform.scale||1)*(i.transform.flipV?-1:1),{translateH:P,translateV:j}=this.getCanvasTranslate(t,i,a),B=t.transformed;y.setTransform(A,0,0,W,B.size.width/2+P,B.size.height/2+j),y.translate(-s.x1/A,-s.y1/W),y.rotate((i.transform.rotate||0)*Math.PI/180),y.drawImage(B.image,-B.size.width/2,-B.size.height/2);let k={width:c,height:h,imagePosition:s,cropperPosition:L({},e)};i.containWithinAspectRatio&&(k.offsetImagePosition=this.getOffsetImagePosition(t,e,i,a));let R=this.getResizeRatio(c,h,i);return R!==1&&(k.width=Math.round(c*R),k.height=i.maintainAspectRatio?Math.round(k.width/i.aspectRatio):Math.round(h*R),Pt(g,k.width,k.height)),o==="blob"?this.cropToBlob(k,g,i):(k.base64=g.toDataURL("image/"+i.format,this.getQuality(i)),k)}cropToBlob(t,e,i){return V(this,null,function*(){return t.blob=yield new Promise(o=>e.toBlob(o,"image/"+i.format,this.getQuality(i))),t.blob&&(t.objectUrl=URL.createObjectURL(t.blob)),t})}getCanvasTranslate(t,e,i){if(e.transform.translateUnit==="px"){let o=this.getRatio(t,i);return{translateH:(e.transform.translateH||0)*o,translateV:(e.transform.translateV||0)*o}}else return{translateH:e.transform.translateH?st(e.transform.translateH,t.transformed.size.width):0,translateV:e.transform.translateV?st(e.transform.translateV,t.transformed.size.height):0}}getRatio(t,e){return t.transformed.size.width/e.width}getImagePosition(t,e,i,o){let a=this.getRatio(t,o),s={x1:Math.round(e.x1*a),y1:Math.round(e.y1*a),x2:Math.round(e.x2*a),y2:Math.round(e.y2*a)};return i.containWithinAspectRatio||(s.x1=Math.max(s.x1,0),s.y1=Math.max(s.y1,0),s.x2=Math.min(s.x2,t.transformed.size.width),s.y2=Math.min(s.y2,t.transformed.size.height)),s}getOffsetImagePosition(t,e,i,o){let a=i.canvasRotation+t.exifTransform.rotate,s=this.getRatio(t,o),c,h;a%2?(c=(t.transformed.size.width-t.original.size.height)/2,h=(t.transformed.size.height-t.original.size.width)/2):(c=(t.transformed.size.width-t.original.size.width)/2,h=(t.transformed.size.height-t.original.size.height)/2);let g={x1:Math.round(e.x1*s)-c,y1:Math.round(e.y1*s)-h,x2:Math.round(e.x2*s)-c,y2:Math.round(e.y2*s)-h};return i.containWithinAspectRatio||(g.x1=Math.max(g.x1,0),g.y1=Math.max(g.y1,0),g.x2=Math.min(g.x2,t.transformed.size.width),g.y2=Math.min(g.y2,t.transformed.size.height)),g}getResizeRatio(t,e,i){let o=i.resizeToWidth/t,a=i.resizeToHeight/e,s=new Array;i.resizeToWidth>0&&s.push(o),i.resizeToHeight>0&&s.push(a);let c=s.length===0?1:Math.min(...s);return c>1&&!i.onlyScaleDown?c:Math.min(c,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Qt=(()=>{class r{resetCropperPosition(t,e,i,o){if(t?.nativeElement)if(i.cropperStaticHeight&&i.cropperStaticWidth)e.x1=0,e.x2=o.width>i.cropperStaticWidth?i.cropperStaticWidth:o.width,e.y1=0,e.y2=o.height>i.cropperStaticHeight?i.cropperStaticHeight:o.height;else{let a=Math.min(i.cropperScaledMaxWidth,o.width),s=Math.min(i.cropperScaledMaxHeight,o.height);if(!i.maintainAspectRatio)e.x1=0,e.x2=a,e.y1=0,e.y2=s;else if(o.width/i.aspectRatio<o.height){e.x1=0,e.x2=a;let c=a/i.aspectRatio;e.y1=(o.height-c)/2,e.y2=e.y1+c}else{e.y1=0,e.y2=s;let c=s*i.aspectRatio;e.x1=(o.width-c)/2,e.x2=e.x1+c}}}move(t,e,i){let o=this.getClientX(t)-e.clientX,a=this.getClientY(t)-e.clientY;i.x1=e.x1+o,i.y1=e.y1+a,i.x2=e.x2+o,i.y2=e.y2+a}resize(t,e,i,o,a){let s=this.getClientX(t)-e.clientX,c=this.getClientY(t)-e.clientY;switch(e.position){case"left":i.x1=Math.min(Math.max(e.x1+s,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth);break;case"topleft":i.x1=Math.min(Math.max(e.x1+s,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth),i.y1=Math.min(Math.max(e.y1+c,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"top":i.y1=Math.min(Math.max(e.y1+c,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"topright":i.x2=Math.max(Math.min(e.x2+s,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth),i.y1=Math.min(Math.max(e.y1+c,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"right":i.x2=Math.max(Math.min(e.x2+s,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth);break;case"bottomright":i.x2=Math.max(Math.min(e.x2+s,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth),i.y2=Math.max(Math.min(e.y2+c,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"bottom":i.y2=Math.max(Math.min(e.y2+c,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"bottomleft":i.x1=Math.min(Math.max(e.x1+s,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth),i.y2=Math.max(Math.min(e.y2+c,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"center":let h=t.scale,g=Math.min(Math.max(a.cropperScaledMinWidth,Math.abs(e.x2-e.x1)*h),a.cropperScaledMaxWidth),y=Math.min(Math.max(a.cropperScaledMinHeight,Math.abs(e.y2-e.y1)*h),a.cropperScaledMaxHeight);i.x1=e.clientX-g/2,i.x2=e.clientX+g/2,i.y1=e.clientY-y/2,i.y2=e.clientY+y/2,i.x1<0?(i.x2-=i.x1,i.x1=0):i.x2>o.width&&(i.x1-=i.x2-o.width,i.x2=o.width),i.y1<0?(i.y2-=i.y1,i.y1=0):i.y2>o.height&&(i.y1-=i.y2-o.height,i.y2=o.height);break}a.maintainAspectRatio&&this.checkAspectRatio(e.position,i,o,a)}checkAspectRatio(t,e,i,o){let a=0,s=0;switch(t){case"top":e.x2=e.x1+(e.y2-e.y1)*o.aspectRatio,a=Math.max(e.x2-i.width,0),s=Math.max(0-e.y1,0),(a>0||s>0)&&(e.x2-=s*o.aspectRatio>a?s*o.aspectRatio:a,e.y1+=s*o.aspectRatio>a?s:a/o.aspectRatio);break;case"bottom":e.x2=e.x1+(e.y2-e.y1)*o.aspectRatio,a=Math.max(e.x2-i.width,0),s=Math.max(e.y2-i.height,0),(a>0||s>0)&&(e.x2-=s*o.aspectRatio>a?s*o.aspectRatio:a,e.y2-=s*o.aspectRatio>a?s:a/o.aspectRatio);break;case"topleft":e.y1=e.y2-(e.x2-e.x1)/o.aspectRatio,a=Math.max(0-e.x1,0),s=Math.max(0-e.y1,0),(a>0||s>0)&&(e.x1+=s*o.aspectRatio>a?s*o.aspectRatio:a,e.y1+=s*o.aspectRatio>a?s:a/o.aspectRatio);break;case"topright":e.y1=e.y2-(e.x2-e.x1)/o.aspectRatio,a=Math.max(e.x2-i.width,0),s=Math.max(0-e.y1,0),(a>0||s>0)&&(e.x2-=s*o.aspectRatio>a?s*o.aspectRatio:a,e.y1+=s*o.aspectRatio>a?s:a/o.aspectRatio);break;case"right":case"bottomright":e.y2=e.y1+(e.x2-e.x1)/o.aspectRatio,a=Math.max(e.x2-i.width,0),s=Math.max(e.y2-i.height,0),(a>0||s>0)&&(e.x2-=s*o.aspectRatio>a?s*o.aspectRatio:a,e.y2-=s*o.aspectRatio>a?s:a/o.aspectRatio);break;case"left":case"bottomleft":e.y2=e.y1+(e.x2-e.x1)/o.aspectRatio,a=Math.max(0-e.x1,0),s=Math.max(e.y2-i.height,0),(a>0||s>0)&&(e.x1+=s*o.aspectRatio>a?s*o.aspectRatio:a,e.y2-=s*o.aspectRatio>a?s:a/o.aspectRatio);break;case"center":e.x2=e.x1+(e.y2-e.y1)*o.aspectRatio,e.y2=e.y1+(e.x2-e.x1)/o.aspectRatio;let c=Math.max(0-e.x1,0),h=Math.max(e.x2-i.width,0),g=Math.max(e.y2-i.height,0),y=Math.max(0-e.y1,0);(c>0||h>0||g>0||y>0)&&(e.x1+=g*o.aspectRatio>c?g*o.aspectRatio:c,e.x2-=y*o.aspectRatio>h?y*o.aspectRatio:h,e.y1+=y*o.aspectRatio>h?y:h/o.aspectRatio,e.y2-=g*o.aspectRatio>c?g:c/o.aspectRatio);break}}getClientX(t){return t.touches?.[0].clientX||t.clientX||0}getClientY(t){return t.touches?.[0].clientY||t.clientY||0}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Nt="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==";function Yt(){return new Promise(r=>{let n=new Image;n.onload=()=>{let t=n.width===1&&n.height===2;r(t)},n.src=Nt})}function Xt(r){switch(typeof r=="object"&&(r=qt(r)),r){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}function qt(r){let n=new DataView(r);if(n.getUint16(0,!1)!==65496)return-2;let t=n.byteLength,e=2;for(;e<t;){if(n.getUint16(e+2,!1)<=8)return-1;let i=n.getUint16(e,!1);if(e+=2,i==65505){if(n.getUint32(e+=2,!1)!==1165519206)return-1;let o=n.getUint16(e+=6,!1)==18761;e+=n.getUint32(e+4,o);let a=n.getUint16(e,o);e+=2;for(let s=0;s<a;s++)if(n.getUint16(e+s*12,o)==274)return n.getUint16(e+s*12+8,o)}else{if((i&65280)!==65280)break;e+=n.getUint16(e,!1)}}return-1}var Gt=(()=>{class r{constructor(){this.autoRotateSupported=Yt()}loadImageFile(t,e){return V(this,null,function*(){let i=yield t.arrayBuffer();return yield this.checkImageTypeAndLoadImageFromArrayBuffer(i,t.type,e)})}checkImageTypeAndLoadImageFromArrayBuffer(t,e,i){return this.isValidImageType(e)?this.loadImageFromArrayBuffer(t,i,e):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|svg|webp|x-icon|vnd.microsoft.icon)/.test(t)}loadImageFromURL(t,e){return V(this,null,function*(){let o=yield(yield fetch(t)).blob(),a=yield o.arrayBuffer();return yield this.loadImageFromArrayBuffer(a,e,o.type)})}loadBase64Image(t,e){let i=this.base64ToArrayBuffer(t);return this.loadImageFromArrayBuffer(i,e)}base64ToArrayBuffer(t){t=t.replace(/^data:([^;]+);base64,/gmi,"");let e=atob(t),i=e.length,o=new Uint8Array(i);for(let a=0;a<i;a++)o[a]=e.charCodeAt(a);return o.buffer}loadImageFromArrayBuffer(t,e,i){return V(this,null,function*(){let o=yield new Promise((a,s)=>V(this,null,function*(){try{let c=new Blob([t],i?{type:i}:void 0),h=URL.createObjectURL(c),g=new Image,A=i==="image/svg+xml"?yield this.getSvgImageSize(c):void 0;g.onload=()=>a({originalImage:g,originalImageSize:A,originalObjectUrl:h,originalArrayBuffer:t}),g.onerror=s,g.src=h}catch(c){s(c)}}));return yield this.transformImageFromArrayBuffer(o,e,o.originalImageSize!=null)})}getSvgImageSize(t){return V(this,null,function*(){let o=new DOMParser().parseFromString(yield t.text(),"image/svg+xml").querySelector("svg");if(!o)throw Error("Failed to parse SVG image");let a=o.getAttribute("width"),s=o.getAttribute("height");if(a&&s)return null;let c=o.getAttribute("viewBox")||o.getAttribute("viewbox");if(c){let h=c.split(" ");return{width:+h[2],height:+h[3]}}throw Error("Failed to load SVG image. SVG must have width + height or viewBox definition.")})}transformImageFromArrayBuffer(t,e,i=!1){return V(this,null,function*(){let o=yield this.autoRotateSupported,a=Xt(o?-1:t.originalArrayBuffer);if(!t.originalImage||!t.originalImage.complete)return Promise.reject(new Error("No image loaded"));let s={original:{objectUrl:t.originalObjectUrl,image:t.originalImage,size:t.originalImageSize??{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:a};return this.transformLoadedImage(s,e,i)})}transformLoadedImage(t,e,i=!1){return V(this,null,function*(){let o=e.canvasRotation+t.exifTransform.rotate,a=t.original.size;if(!i&&o===0&&!t.exifTransform.flip&&!e.containWithinAspectRatio)return{original:{objectUrl:t.original.objectUrl,image:t.original.image,size:L({},a)},transformed:{objectUrl:t.original.objectUrl,image:t.original.image,size:L({},a)},exifTransform:t.exifTransform};let s=this.getTransformedSize(a,t.exifTransform,e),c=document.createElement("canvas");c.width=s.width,c.height=s.height;let h=c.getContext("2d");h?.setTransform(t.exifTransform.flip?-1:1,0,0,1,c.width/2,c.height/2),h?.rotate(Math.PI*(o/2)),h?.drawImage(t.original.image,-a.width/2,-a.height/2);let g=yield new Promise(W=>c.toBlob(W,e.format));if(!g)throw new Error("Failed to get Blob for transformed image.");let y=URL.createObjectURL(g),A=yield this.loadImageFromObjectUrl(y);return{original:{objectUrl:t.original.objectUrl,image:t.original.image,size:L({},a)},transformed:{objectUrl:y,image:A,size:{width:A.width,height:A.height}},exifTransform:t.exifTransform}})}loadImageFromObjectUrl(t){return new Promise((e,i)=>{let o=new Image;o.onload=()=>e(o),o.onerror=i,o.src=t})}getTransformedSize(t,e,i){let o=i.canvasRotation+e.rotate;if(i.containWithinAspectRatio)if(o%2){let a=t.width*i.aspectRatio,s=t.height/i.aspectRatio;return{width:Math.max(t.height,a),height:Math.max(t.width,s)}}else{let a=t.height*i.aspectRatio,s=t.width/i.aspectRatio;return{width:Math.max(t.width,a),height:Math.max(t.height,s)}}return o%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),ct=(()=>{class r{constructor(t,e,i,o,a,s,c){this.cropService=t,this.cropperPositionService=e,this.loadImageService=i,this.sanitizer=o,this.cd=a,this.zone=s,this.hammerLoader=c,this.settings=new we,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=F,this.imageVisible=!1,this.cropperFrameAriaLabel=this.settings.cropperFrameAriaLabel,this.output=this.settings.output,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new U,this.startCropImage=new U,this.imageLoaded=new U,this.cropperReady=new U,this.loadImageFailed=new U,this.transformChange=new U,this.reset()}ngOnChanges(t){this.onChangesUpdateSettings(t),this.onChangesInputImage(t),this.loadedImage?.original.image.complete&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.maintainAspectRatio&&(this.resetCropOnAspectRatioChange||!this.aspectRatioIsCorrect())&&(t.maintainAspectRatio||t.aspectRatio)?this.resetCropperPosition():t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop())),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop()),t.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&(this.hideResizeSquares=!0,this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1}))}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent?.target?.files?.length>0}setCssTransform(){let t=this.transform?.translateUnit||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${t}, ${this.transform.translateV||0}${t}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.objectUrl),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){this.loadedImage!=null&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(L({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>0}onResize(){if(this.loadedImage)if(this.hidden)this.resizedWhileHidden=!0;else{let t=L({},this.maxSize);this.setMaxSize(),this.resizeCropperPosition(t),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()}}activatePinchGesture(){return V(this,null,function*(){yield this.hammerLoader?.();let t=window?.Hammer||null;if(t){let e=new t(this.wrapper.nativeElement);e.get("pinch").set({enable:!0}),e.on("pinchmove",this.onPinch.bind(this)),e.on("pinchend",this.pinchStop.bind(this)),e.on("pinchstart",this.startPinch.bind(this))}else Ue()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")})}resizeCropperPosition(t){(t.width!==this.maxSize.width||t.height!==this.maxSize.height)&&(this.cropper.x1=this.cropper.x1*this.maxSize.width/t.width,this.cropper.x2=this.cropper.x2*this.maxSize.width/t.width,this.cropper.y1=this.cropper.y1*this.maxSize.height/t.height,this.cropper.y2=this.cropper.y2*this.maxSize.height/t.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings,this.maxSize),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){let e=+t.key;e>=1&&e<=9&&(this.settings.stepSize=e)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;let i=t.shiftKey?F.Resize:F.Move,o=t.altKey?Ut(t.key):Wt(t.key),a=Dt(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},i,o),this.handleMouseMove(a),this.handleMouseUp()}startMove(t,e,i=null){this.disabled||this.moveStart?.active&&this.moveStart?.type===F.Pinch||e===F.Drag&&!this.allowMoveImage||(t.preventDefault&&t.preventDefault(),this.moveStart=L({active:!0,type:e,position:i,transform:L({},this.transform),clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t)},this.cropper),this.initMouseMove())}initMouseMove(){fe(ee(document,"mousemove"),ee(document,"touchmove")).pipe(Oe(fe(ee(document,"mouseup"),ee(document,"touchend")).pipe(ze()))).subscribe({next:t=>this.zone.run(()=>{this.handleMouseMove(t),this.cd.markForCheck()}),complete:()=>this.zone.run(()=>{this.handleMouseUp(),this.cd.markForCheck()})})}startPinch(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart=L({active:!0,type:F.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}handleMouseMove(t){if(this.moveStart.active){if(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===F.Move)this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===F.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===F.Drag){let e=this.cropperPositionService.getClientX(t)-this.moveStart.clientX,i=this.cropperPositionService.getClientY(t)-this.moveStart.clientY;this.transform=Re(L({},this.transform),{translateH:(this.moveStart.transform?.translateH||0)+e,translateV:(this.moveStart.transform?.translateV||0)+i}),this.setCssTransform()}}}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===F.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.markForCheck())}setMaxSize(){if(this.sourceImage){let t=getComputedStyle(this.sourceImage.nativeElement);this.maxSize.width=parseFloat(t.width),this.maxSize.height=parseFloat(t.height),this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage?.transformed?.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.maintainAspectRatio?this.settings.cropperScaledMinHeight=Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?this.settings.cropperScaledMinHeight=Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):this.settings.cropperScaledMinHeight=20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed?.image){let t=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/t:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/t:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}handleMouseUp(){this.moveStart.active&&(this.moveStart.active=!1,this.moveStart?.type===F.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(t=this.settings.output){if(this.loadedImage?.transformed?.image!=null){if(this.startCropImage.emit(),t==="blob")return this.cropToBlob();if(t==="base64")return this.cropToBase64()}return null}cropToBlob(){return new Promise((t,e)=>this.zone.run(()=>V(this,null,function*(){let i=yield this.cropService.crop(this.loadedImage,this.cropper,this.settings,"blob",this.maxSize);i?(this.imageCropped.emit(i),t(i)):e("Crop image failed")})))}cropToBase64(){let t=this.cropService.crop(this.loadedImage,this.cropper,this.settings,"base64",this.maxSize);return t?(this.imageCropped.emit(t),t):null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}}return r.\u0275fac=function(t){return new(t||r)(z(jt),z(Qt),z(Gt),z(Qe),z(De),z(ke),z(je,8))},r.\u0275cmp=_({type:r,selectors:[["image-cropper"]],viewQuery:function(t,e){if(t&1&&(ue(kt,7),ue(Lt,5)),t&2){let i;xe(i=Ce())&&(e.wrapper=i.first),xe(i=Ce())&&(e.sourceImage=i.first)}},hostVars:6,hostBindings:function(t,e){t&1&&w("resize",function(){return e.onResize()},!1,Fe),t&2&&(Z("text-align",e.alignImage),J("disabled",e.disabled)("ngx-ix-hidden",e.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",cropperFrameAriaLabel:"cropperFrameAriaLabel",output:"output",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[Ee],decls:5,vars:10,consts:[["wrapper",""],["sourceImage",""],["class","ngx-ic-source-image","role","presentation",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],["role","presentation",1,"ngx-ic-source-image",3,"load","mousedown","touchstart","error","src"],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],["role","presentation",1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(t,e){t&1&&(l(0,"div",null,0),E(2,Vt,2,8,"img",2),d(3,"div",3),E(4,Bt,3,16,"div",4),p()),t&2&&(Z("background",e.imageVisible&&e.backgroundColor),u(2),m("ngIf",e.safeImgDataUrl),u(),Z("width",e.maxSize.width,"px")("height",e.maxSize.height,"px")("margin-left",e.alignImage==="center"?e.marginLeft:null),u(),m("ngIf",e.imageVisible))},dependencies:[X],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),r})(),lt=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=b({type:r}),r.\u0275inj=v({imports:[[S]]}),r})();function Zt(r,n){if(r&1&&(l(0,"label",5),d(1,"img",6),p()),r&2){let t=f(2);u(),m("src",t.value||"/assets/default.png",q)}}function Jt(r,n){r&1&&(l(0,"label",7),O(1,"Add"),p())}function $t(r,n){if(r&1){let t=N();l(0,"div"),d(1,"img",6),l(2,"i",2),w("click",function(){let i=x(t).index,o=f(3);return C(o.files.splice(i,1))}),O(3,"X"),p()()}if(r&2){let t=n.$implicit;u(),m("src",t,q)}}function ei(r,n){if(r&1&&(l(0,"div"),E(1,$t,4,1,"div",8),p()),r&2){let t=f(2);u(),m("ngForOf",t.files)}}function ti(r,n){if(r&1){let t=N();l(0,"div",2),w("click",function(){x(t);let i=f();return C(i.set())}),l(1,"h3"),O(2),p(),E(3,Zt,2,1,"label",3)(4,Jt,2,0,"label",4)(5,ei,2,1,"div",1),p()}if(r&2){let t=f();u(2),Y(t.label),u(),m("ngIf",!t.multiple),u(),m("ngIf",t.multiple),u(),m("ngIf",t.multiple)}}function ii(r,n){if(r&1){let t=N();l(0,"div")(1,"image-cropper",9),w("imageCropped",function(i){x(t);let o=f();return C(o.imageCropped(i))}),p(),l(2,"button",2),w("click",function(){x(t);let i=f();return C(i.uploadImage())}),O(3,"Cropper"),p()()}if(r&2){let t=f();u(),m("maintainAspectRatio",!0)("imageBase64",t.dataUrl)("aspectRatio",1)("cropperStaticWidth",t.width)("cropperStaticHeight",t.height)}}var me=(()=>{let n=class n{get files(){return this.value}constructor(e,i){this._http=e,this._fs=i,this.container="general",this.name="",this.label="",this.multiple=!1,this.isPhoto=!1,this.value=this.multiple?[]:"",this.update=new U}ngOnInit(){!this.multiple&&this.value&&(this.name=this.value.split("/")[5].split("?")[0])}set(){this._fs.setFile=e=>{this.width&&this.height?this.dataUrl=e:this.uploadImage(e)}}imageCropped(e){this.croppedDataUrl=e.base64}uploadImage(e=this.croppedDataUrl){this._http.post("/api/file/photo",{container:this.container,name:this.name,dataUrl:e},i=>{this.dataUrl="",this.multiple?(this.value||(this.value=[]),this.value.push(i)):(this.name=i.split("/")[5].split("?")[0],this.value=i),this.update.emit(this.value)})}};n.\u0275fac=function(i){return new(i||n)(z(se),z(at))},n.\u0275cmp=_({type:n,selectors:[["ngx-file"]],inputs:{container:"container",name:"name",label:"label",multiple:"multiple",isPhoto:"isPhoto",resize:"resize",width:"width",height:"height",value:"value"},outputs:{update:"update"},decls:2,vars:2,consts:[[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],["for","formPhoto",4,"ngIf"],["for","formPhotos",4,"ngIf"],["for","formPhoto"],["alt","Picture",3,"src"],["for","formPhotos"],[4,"ngFor","ngForOf"],["output","base64","format","png",3,"imageCropped","maintainAspectRatio","imageBase64","aspectRatio","cropperStaticWidth","cropperStaticHeight"]],template:function(i,o){i&1&&E(0,ti,6,4,"div",0)(1,ii,4,5,"div",1),i&2&&(m("ngIf",o.isPhoto),u(),m("ngIf",o.dataUrl))},dependencies:[Pe,X,ct]});let r=n;return r})();var mt=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=b({type:n}),n.\u0275inj=v({imports:[S,lt]});let r=n;return r})();var ht=(()=>{let n=class n{constructor(){this.field={},this.component={}}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=_({type:n,selectors:[["email-formcomponents"]],decls:1,vars:8,consts:[["type","email",3,"placeholder","name","focused","ngClass","formControl","label","form","value"]],template:function(i,o){i&1&&d(0,"winput",0),i&2&&m("placeholder",o.field.Placeholder)("name",o.field.Label||"name")("focused",o.component.focused)("ngClass",o.component.class)("formControl",o.control)("label",o.field.Label)("form",o.form)("value",o.value)},dependencies:[T,I]});let r=n;return r})();var dt=(()=>{let n=class n{constructor(){this.field={},this.component={}}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=_({type:n,selectors:[["number-formcomponents"]],decls:1,vars:8,consts:[["type","number",3,"placeholder","name","focused","ngClass","formControl","label","form","value"]],template:function(i,o){i&1&&d(0,"winput",0),i&2&&m("placeholder",o.field.Placeholder)("name",o.field.Label||"name")("focused",o.component.focused)("ngClass",o.component.class)("formControl",o.control)("label",o.field.Label)("form",o.form)("value",o.value)},dependencies:[T,I]});let r=n;return r})();var ft=(()=>{let n=class n{constructor(){this.field={},this.component={}}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=_({type:n,selectors:[["time-formcomponents"]],decls:1,vars:8,consts:[["type","time",3,"placeholder","name","focused","ngClass","formControl","label","form","value"]],template:function(i,o){i&1&&d(0,"winput",0),i&2&&m("placeholder",o.field.Placeholder)("name",o.field.Label||"name")("focused",o.component.focused)("ngClass",o.component.class)("formControl",o.control)("label",o.field.Label)("form",o.form)("value",o.value)},dependencies:[T,I]});let r=n;return r})();var gt=(()=>{let n=class n{constructor(){this.field={},this.config={},this.component={}}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=_({type:n,selectors:[["photo-formcomponents"]],decls:1,vars:5,consts:[[3,"update","label","width","height","value","isPhoto"]],template:function(i,o){i&1&&(l(0,"ngx-file",0),w("update",function(s){return o.control.setValue(s)}),p()),i&2&&m("label",o.field.Label)("width",o.field.Width)("height",o.field.Height)("value",o.value)("isPhoto",!0)},dependencies:[me]});let r=n;return r})();var ut=(()=>{let n=class n{constructor(){this.field={},this.config={},this.component={}}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=_({type:n,selectors:[["photos-formcomponents"]],decls:1,vars:7,consts:[[3,"update","container","label","width","height","value","multiple","isPhoto"]],template:function(i,o){i&1&&(l(0,"ngx-file",0),w("update",function(s){return o.control.setValue(s)}),p()),i&2&&m("container",o.config.formId)("label",o.field.Label)("width",o.field.Width)("height",o.field.Height)("value",o.value)("multiple",!0)("isPhoto",!0)},dependencies:[me]});let r=n;return r})();var xt=(()=>{let n=class n{constructor(){this.field={},this.component={}}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=_({type:n,selectors:[["date-formcomponents"]],decls:1,vars:8,consts:[["type","date",3,"placeholder","name","focused","ngClass","formControl","label","form","value"]],template:function(i,o){i&1&&d(0,"winput",0),i&2&&m("placeholder",o.field.Placeholder)("name",o.field.Label||"name")("focused",o.component.focused)("ngClass",o.component.class)("formControl",o.control)("label",o.field.Label)("form",o.form)("value",o.value)},dependencies:[T,I]});let r=n;return r})();var Ct=(()=>{let n=class n{constructor(){this.field={},this.component={}}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=_({type:n,selectors:[["text-formcomponents"]],decls:1,vars:8,consts:[[3,"placeholder","name","focused","ngClass","formControl","label","form","value"]],template:function(i,o){i&1&&d(0,"winput",0),i&2&&m("placeholder",o.field.Placeholder)("name",o.field.Label||"name")("focused",o.component.focused)("ngClass",o.component.class)("formControl",o.control)("label",o.field.Label)("form",o.form)("value",o.value)},dependencies:[T,I]});let r=n;return r})();var _t=(()=>{let n=class n{constructor(){this.field={}}click(){console.log("clicked",this.field),typeof this.field.Click=="function"&&this.field.Click()}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=_({type:n,selectors:[["button-formcomponents"]],decls:2,vars:1,consts:[[3,"click"]],template:function(i,o){i&1&&(l(0,"wbutton",0),w("click",function(){return o.click()}),O(1),p()),i&2&&(u(),Y(o.field.Label))},dependencies:[Ge]});let r=n;return r})();function oi(r,n){r&1&&d(0,"span",8)}function ni(r,n){r&1&&d(0,"span",9)}function ri(r,n){r&1&&d(0,"span",10)}function ai(r,n){r&1&&d(0,"span",11)}var wt=(()=>{let n=class n{constructor(e){this.ui=e,this.field={},this.component={}}};n.\u0275fac=function(i){return new(i||n)(z(qe))},n.\u0275cmp=_({type:n,selectors:[["password-formcomponents"]],decls:9,vars:13,consts:[["type","password",3,"type","placeholder","name","focused","ngClass","formControl","label","value","form"],[1,"smart"],["class","red",4,"ngIf"],["class","orange",4,"ngIf"],["class","yellow",4,"ngIf"],["class","green",4,"ngIf"],[1,"eye"],[1,"material-icons",3,"click"],[1,"red"],[1,"orange"],[1,"yellow"],[1,"green"]],template:function(i,o){i&1&&(d(0,"winput",0),l(1,"div",1),E(2,oi,1,0,"span",2)(3,ni,1,0,"span",3)(4,ri,1,0,"span",4)(5,ai,1,0,"span",5),p(),l(6,"div",6)(7,"span",7),w("click",function(){return o.field.Show=!o.field.Show}),O(8," visibility "),p()()),i&2&&(m("type",o.field.Show?"text":"password")("placeholder",o.field.Placeholder)("name",o.field.Label||"name")("focused",o.component.focused)("ngClass",o.component.class)("formControl",o.control)("label",o.field.Label)("value",o.value)("form",o.form),u(2),m("ngIf",o.ui.level(o.control.value)>1),u(),m("ngIf",o.ui.level(o.control.value)>2),u(),m("ngIf",o.ui.level(o.control.value)>3),u(),m("ngIf",o.ui.level(o.control.value)>4))},dependencies:[T,I,X],styles:[".smart[_ngcontent-%COMP%]{position:absolute;left:230px;top:140px}.red[_ngcontent-%COMP%]{width:3px;height:8px;background-color:#bb1717;display:inline-block;margin-left:5px}.orange[_ngcontent-%COMP%]{width:3px;height:10px;background-color:#eb9719;display:inline-block;margin-left:5px}.yellow[_ngcontent-%COMP%]{width:3px;height:12px;background-color:#fffb00;display:inline-block;margin-left:5px}.green[_ngcontent-%COMP%]{width:3px;height:14px;background-color:#21d311;display:inline-block;margin-left:5px}.eye[_ngcontent-%COMP%]{position:relative}.eye[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:-31px;right:10px;font-size:22px;color:#5a5a5a}@media screen and (max-width: 768px){.smart[_ngcontent-%COMP%]{left:222px}.red[_ngcontent-%COMP%]{width:3px;height:8px;background-color:#bb1717;display:inline-block;margin-left:5px}.orange[_ngcontent-%COMP%]{width:3px;height:10px;background-color:#eb9719;display:inline-block;margin-left:5px}.yellow[_ngcontent-%COMP%]{width:3px;height:12px;background-color:#fffb00;display:inline-block;margin-left:5px}.green[_ngcontent-%COMP%]{width:3px;height:14px;background-color:#21d311;display:inline-block;margin-left:5px}#eye[_ngcontent-%COMP%]{position:absolute;left:165px;top:252px;font-size:22px;color:#5a5a5a}}"]});let r=n;return r})();var yt=(()=>{let n=class n{constructor(){this.field={},this.component={},this.value={name:""}}get select(){return this.value?.name||this.value||""}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=_({type:n,selectors:[["select-formcomponents"]],decls:1,vars:8,consts:[[3,"modelChange","select","multiple","placeholder","value","name","ngClass","items","searchable"]],template:function(i,o){i&1&&(l(0,"wselect",0),w("modelChange",function(s){return o.control.setValue(s)}),p()),i&2&&m("select",o.select)("multiple",o.field.Multiple||!1)("placeholder",o.field.Placeholder)("value",o.field.Value||"_id")("name",o.field.Name||"name")("ngClass",o.component.class)("items",o.field.Items)("searchable",!0)},dependencies:[I,Je]});let r=n;return r})();var Mt=(()=>{let n=class n{constructor(e){this._form=e,this._form.addComponent({component:ht,name:"Email",fields:["Placeholder","Label"]}),this._form.addComponent({component:dt,name:"Number",fields:["Placeholder","Label"]}),this._form.addComponent({component:ft,name:"Time",fields:["Placeholder","Label"]}),this._form.addComponent({component:yt,name:"Select",fields:["Placeholder","Label"]}),this._form.addComponent({component:xt,name:"Date",fields:["Placeholder","Label"]}),this._form.addComponent({component:Ct,name:"Text",fields:["Placeholder","Label"]}),this._form.addComponent({component:wt,name:"Password",fields:["Placeholder","Label"]}),this._form.addComponent({component:_t,name:"Button",fields:["Label"]}),this._form.addComponent({component:gt,name:"Photo",fields:["Placeholder","Label"]}),this._form.addComponent({component:ut,name:"Photos",fields:["Placeholder","Label"]}),this._form.inited=!0}};n.\u0275fac=function(i){return new(i||n)(H(Ze))},n.\u0275mod=b({type:n}),n.\u0275inj=v({imports:[le,$,S,mt,pe]});let r=n;return r})();var Go=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=b({type:n}),n.\u0275inj=v({imports:[S,te,ie,Mt,tt,pe,S,te,ie,$,le,it,$e,nt,rt,et,ot]});let r=n;return r})();var $o=(()=>{let n=class n{set(e=""){e?(localStorage.setItem("waw_user_mode",e),document.body.parentNode.classList.add(e)):(localStorage.removeItem("waw_user_mode"),document.body.parentNode.classList.remove("dark")),this.mode=e}role(e){return!!this.user.is[e]}constructor(e,i,o,a,s,c){this._alert=e,this._mongo=i,this._http=o,this._file=a,this._core=s,this._router=c,this.mode=localStorage.getItem("waw_user_mode")||"",this.user=localStorage.getItem("waw_user")?JSON.parse(localStorage.getItem("waw_user")):this.new(),this.roles=["admin"],this.users=[],this._users={},this.mode&&document.body.parentNode.classList.add(this.mode),this._file.add({id:"userAvatarUrl",resize:256,part:"user",cb:h=>{typeof h=="string"&&(this.user.thumb=h)}}),this._mongo.config("user",{replace:{data:(h,g)=>{typeof h!="object"&&(h={}),g(h)},is:this._mongo.beObj}}),localStorage.getItem("waw_user")&&(this.user=JSON.parse(localStorage.getItem("waw_user")),this._core.done("us.user"),this.load())}load(){this._mongo.fetch("user",{name:"me"},e=>{e?(this.user=e,this._core.done("us.user"),localStorage.setItem("waw_user",JSON.stringify(e))):this.logout()}),this.users=this._mongo.get("user",(e,i)=>{this._users=i})}new(){return{is:{},data:{}}}create(e){this._mongo.create("user",e)}doc(e){return this._users[e]||(this._users[e]=this._mongo.fetch("user",{query:{_id:e}})),this._users[e]}update(){this._mongo.afterWhile(this,()=>{localStorage.setItem("waw_user",JSON.stringify(this.user)),this._mongo.update("user",this.user)})}save(e){this._mongo.afterWhile(this,()=>{this._mongo.update("user",e,{name:"admin"})})}delete(e){this._mongo.delete("user",e,{name:"admin"})}change_password(e,i){this._http.post("/api/user/changePassword",{newPass:i,oldPass:e},o=>{o?this._alert.info({text:"Successfully changed password"}):this._alert.error({text:"Failed to change password"})})}logout(){this.user=this.new(),localStorage.removeItem("waw_user"),this._router.navigateByUrl("/sign"),this._http.remove("token")}};n.\u0275fac=function(i){return new(i||n)(H(Ke),H(Xe),H(se),H(ce),H(Ye),H(Ne))},n.\u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"});let r=n;return r})();export{$o as a,si as b,Tt as c,nt as d,rt as e,Go as f};
