(self.webpackChunkapp=self.webpackChunkapp||[]).push([[11],{11:(t,s,e)=>{"use strict";e.r(s),e.d(s,{SignModule:()=>c});var i=e(2398),r=e(8619),o=e(7017),n=e(8400),a=e(6252),u=e(1462),h=e(1116);const l=["email"],p=["password"];function g(t,s){if(1&t){const t=r.EpF();r.TgZ(0,"div",4),r.TgZ(1,"span",5),r._uU(2,"Code:"),r.qZA(),r.TgZ(3,"input",13),r.NdJ("ngModelChange",function(s){return r.CHM(t),r.oxw().user.code=s}),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(3),r.Q6J("ngModel",t.user.code)}}const d=[{path:"",component:(()=>{class t{constructor(t,s,e,i,r){this.router=t,this.hash=s,this.us=e,this.http=i,this.alert=r,this.user={},this.reseting=!1,this.user.email=this.hash.get("email")||"ceo@webart.work",this.user.password=this.hash.get("password")||"asdasdasdasd"}email_focus(){setTimeout(()=>{this.email.nativeElement.focus()},100)}password_focus(){setTimeout(()=>{this.password.nativeElement.focus()},100)}submit(){return this.reseting&&this.user.code?this.save():this.user.email?(this.hash.set("email",this.user.email),this.user.password?void this.http.post("/api/user/status",this.user,t=>{t.email&&t.pass?this.login():t.email?this.reset():this.sign()}):(this.alert.error({text:"Enter your password"}),this.password_focus())):(this.alert.error({text:"Enter your email"}),this.email_focus())}login(){this.http.post("/api/user/login",this.user,t=>{if(!t)return this.alert.error({text:"Something went wrong"});this.us.user=t,localStorage.setItem("waw_user",JSON.stringify(t)),this.router.navigate(["/profile"])})}sign(){this.http.post("/api/user/signup",this.user,t=>{if(!t)return this.alert.error({text:"Something went wrong"});this.us.user=t,localStorage.setItem("waw_user",JSON.stringify(t)),this.router.navigate(["/profile"])})}reset(){this.http.post("/api/user/request",this.user,t=>{this.reseting=!0}),this.alert.info({text:"Mail will sent to your email"})}save(){this.http.post("/api/user/change",this.user,t=>{this.alert.info({text:t}),"Password successfully changed."==t&&this.http.post("/api/user/login",this.user,t=>{if(!t)return this.alert.error({text:"Something went wrong"});this.us.user=t,localStorage.setItem("waw_user",JSON.stringify(t)),this.router.navigate(["/profile"])})})}}return t.\u0275fac=function(s){return new(s||t)(r.Y36(o.F0),r.Y36(n.ol),r.Y36(a.KD),r.Y36(n.OE),r.Y36(n.c9))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-sign"]],viewQuery:function(t,s){if(1&t&&(r.Gf(l,5),r.Gf(p,5)),2&t){let t;r.iGM(t=r.CRH())&&(s.email=t.first),r.iGM(t=r.CRH())&&(s.password=t.first)}},decls:19,vars:3,consts:[[1,"auth-wrapper"],[1,"auth"],[1,"auth__title"],[1,"auth__forms",3,"ngSubmit"],[1,"forms"],[1,"forms__title"],["type","text","placeholder","Email","name","email",1,"forms__input",3,"ngModel","keydown.enter","ngModelChange"],["email",""],["type","password","placeholder","Password","name","password",1,"forms__input",3,"ngModel","ngModelChange"],["password",""],["class","forms",4,"ngIf"],[1,"auth__btn"],["type","submit",1,"btn","_primary"],["type","text","placeholder","Code","name","code",1,"forms__input",3,"ngModel","ngModelChange"]],template:function(t,s){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r._uU(3,"Sign"),r.qZA(),r.TgZ(4,"form",3),r.NdJ("ngSubmit",function(){return s.submit()}),r.TgZ(5,"div",4),r.TgZ(6,"span",5),r._uU(7,"Email:"),r.qZA(),r.TgZ(8,"input",6,7),r.NdJ("keydown.enter",function(){return!s.user.password&&s.password_focus()})("ngModelChange",function(t){return s.user.email=t}),r.qZA(),r.qZA(),r.TgZ(10,"div",4),r.TgZ(11,"span",5),r._uU(12,"Password:"),r.qZA(),r.TgZ(13,"input",8,9),r.NdJ("ngModelChange",function(t){return s.user.password=t}),r.qZA(),r.qZA(),r.YNc(15,g,4,1,"div",10),r.TgZ(16,"div",11),r.TgZ(17,"button",12),r._uU(18,"Sign"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(8),r.Q6J("ngModel",s.user.email),r.xp6(5),r.Q6J("ngModel",s.user.password),r.xp6(2),r.Q6J("ngIf",s.reseting))},directives:[u._Y,u.JL,u.F,u.Fj,u.JJ,u.On,h.O5],styles:[""]}),t})()}];let c=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[],imports:[[o.Bz.forChild(d),i.I]]}),t})()}}]);