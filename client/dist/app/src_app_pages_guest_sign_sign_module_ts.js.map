{"version":3,"file":"src_app_pages_guest_sign_sign_module_ts.js","mappings":"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","sources":["./src/app/pages/guest/sign/sign.component.ts","./src/app/pages/guest/sign/sign.component.html","./src/app/pages/guest/sign/sign.module.ts"],"sourcesContent":["import { Component, ViewChild, ElementRef } from '@angular/core';\r\nimport {\r\n\tFormConfig,\r\n\tFormModules\r\n} from 'src/app/modules/form/form.service';\r\nimport { HashService, HttpService, AlertService, UiService } from 'wacom';\r\nimport { UserService } from 'src/app/core';\r\nimport { Router } from '@angular/router';\r\nimport { User } from 'src/app/core';\r\nimport { InputTypes } from 'src/app/modules/input/input.interface';\r\nimport { ButtonTypes } from 'src/app/modules/button/button.interface';\r\n\r\ninterface RespStatus {\r\n\temail: string;\r\n\tpass: string;\r\n}\r\ninterface Form {\r\n\temail: string;\r\n\tpassword: string;\r\n\tcode: string;\r\n}\r\n\r\n@Component({\r\n\ttemplateUrl: './sign.component.html',\r\n\tstyleUrls: ['./sign.component.scss']\r\n})\r\nexport class SignComponent {\r\n\tformConfig: FormConfig = {\r\n\t\ttitle: 'Sign In / Sign Up',\r\n\t\tcomponents: [\r\n\t\t\t{\r\n\t\t\t\tset: 'ceo@webart.work',\r\n\t\t\t\tmodule: FormModules.INPUT,\r\n\t\t\t\ttype: InputTypes.EMAIL,\r\n\t\t\t\tplaceholder: 'fill your email',\r\n\t\t\t\tlabel: 'E-mail',\r\n\t\t\t\tinput: 'email',\r\n\t\t\t\tfocused: true\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tset: 'asdasdasdasd',\r\n\t\t\t\tmodule: FormModules.INPUT,\r\n\t\t\t\ttype: InputTypes.PASSWORD,\r\n\t\t\t\tplaceholder: 'fill your password',\r\n\t\t\t\tlabel: 'Password',\r\n\t\t\t\tinput: 'password'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tmodule: FormModules.INPUT,\r\n\t\t\t\tplaceholder: 'fill code from email',\r\n\t\t\t\thidden: true,\r\n\t\t\t\tlabel: 'Code',\r\n\t\t\t\tinput: 'code'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tmodule: FormModules.BUTTON,\r\n\t\t\t\ttype: ButtonTypes.PRIMARY,\r\n\t\t\t\tlabel: \"Let's go\"\r\n\t\t\t}\r\n\t\t]\r\n\t};\r\n\r\n\tconstructor(\r\n\t\tprivate alert: AlertService,\r\n\t\tprivate http: HttpService,\r\n\t\tprivate hash: HashService,\r\n\t\tprivate us: UserService,\r\n\t\tprivate router: Router,\r\n\t\tpublic ui: UiService\r\n\t) { }\r\n\r\n\tsubmit(form: Form): void {\r\n\t\tif (!this.formConfig.components[2].hidden && form.code) {\r\n\t\t\treturn this.save();\r\n\t\t}\r\n\r\n\t\tif (!form.email) {\r\n\t\t\tthis.alert.error({\r\n\t\t\t\ttext: 'Enter your email'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t\t//return this.email_focus();\r\n\t\t}\r\n\r\n\t\tif (!this.ui.valid(form.email)) {\r\n\t\t\tthis.alert.error({\r\n\t\t\t\ttext: 'Enter proper email'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t\t//return this.email_focus();\r\n\t\t}\r\n\r\n\t\tthis.hash.set('email', form.email);\r\n\r\n\t\tif (!form.password) {\r\n\t\t\tthis.alert.error({\r\n\t\t\t\ttext: 'Enter your password'\r\n\t\t\t});\r\n\r\n\t\t\treturn;\r\n\t\t\t// return this.password_focus();\r\n\t\t}\r\n\r\n\t\tthis.http.post('/api/user/status', form, (resp: RespStatus) => {\r\n\t\t\tif (resp.email && resp.pass) {\r\n\t\t\t\tthis.login(form);\r\n\t\t\t} else if (resp.email) {\r\n\t\t\t\tthis.reset(form);\r\n\t\t\t} else {\r\n\t\t\t\tthis.sign(form);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tlogin(user: Form): void {\r\n\t\tthis.http.post('/api/user/login', user, this._set.bind(this));\r\n\t}\r\n\r\n\tsign(user: Form): void {\r\n\t\tthis.http.post('/api/user/sign', user, this._set.bind(this));\r\n\t}\r\n\r\n\treset(user: Form): void {\r\n\t\tthis.http.post('/api/user/request', user, () => {\r\n\t\t\tthis.formConfig.components[2].hidden = false;\r\n\t\t});\r\n\r\n\t\tthis.alert.info({\r\n\t\t\ttext: 'Mail will sent to your email'\r\n\t\t});\r\n\t}\r\n\r\n\tsave(): void {\r\n\t\t// this.http.post('/api/user/change', this.user, (resp: boolean) => {\r\n\t\t// \tif (resp) {\r\n\t\t// \t\tthis.alert.info({\r\n\t\t// \t\t\ttext: 'Password successfully changed'\r\n\t\t// \t\t});\r\n\t\t// \t} else {\r\n\t\t// \t\tthis.alert.error({\r\n\t\t// \t\t\ttext: 'Wrong Code'\r\n\t\t// \t\t});\r\n\t\t// \t}\r\n\r\n\t\t// \tthis.login();\r\n\t\t// });\r\n\t}\r\n\r\n\tprivate _set = (user: User): void => {\r\n\t\tif (!user) {\r\n\t\t\treturn this.alert.error({\r\n\t\t\t\ttext: 'Something went wrong'\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tlocalStorage.setItem('waw_user', JSON.stringify(user));\r\n\r\n\t\tthis.http.set('token', user.token);\r\n\r\n\t\tthis.us.user = user;\r\n\r\n\t\tthis.us.load();\r\n\r\n\t\tthis.router.navigate(['/profile']);\r\n\t}\r\n}\r\n","<div class=\"auth-wrapper\">\r\n\t<div class=\"auth\">\r\n\t\t<wform [config]=\"formConfig\" (wSubmit)=\"submit($event)\"></wform>\r\n\t</div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CoreModule } from 'src/app/core';\r\nimport { SignComponent } from './sign.component';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nconst routes: Routes = [\r\n\t{\r\n\t\tpath: '',\r\n\t\tcomponent: SignComponent\r\n\t}\r\n];\r\n\r\n@NgModule({\r\n\timports: [RouterModule.forChild(routes), CoreModule],\r\n\tdeclarations: [SignComponent],\r\n\tproviders: []\r\n})\r\nexport class SignModule {}\r\n"],"names":["FormModules","InputTypes","ButtonTypes","SignComponent","constructor","alert","http","hash","us","router","ui","title","components","set","module","INPUT","type","EMAIL","placeholder","label","input","focused","PASSWORD","hidden","BUTTON","PRIMARY","user","error","text","localStorage","setItem","JSON","stringify","token","load","navigate","submit","form","formConfig","code","save","email","valid","password","post","resp","pass","login","reset","sign","_set","bind","info","i0","selectors","decls","vars","consts","template","ctx","CoreModule","RouterModule","routes","path","component","SignModule","forChild","declarations","imports"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}